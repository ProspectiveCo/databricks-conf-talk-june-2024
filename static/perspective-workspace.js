var ll=Object.create;var Jn=Object.defineProperty;var dl=Object.getOwnPropertyDescriptor;var ul=Object.getOwnPropertyNames;var cl=Object.getPrototypeOf,hl=Object.prototype.hasOwnProperty;var D=(n,t)=>()=>(t||n((t={exports:{}}).exports,t),t.exports);var ml=(n,t,e,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of ul(t))!hl.call(n,r)&&r!==e&&Jn(n,r,{get:()=>t[r],enumerable:!(i=dl(t,r))||i.enumerable});return n};var $e=(n,t,e)=>(e=n!=null?ll(cl(n)):{},ml(t||!n||!n.__esModule?Jn(e,"default",{value:n,enumerable:!0}):e,n));var vt=D((Ht,di)=>{(function(n,t){typeof Ht=="object"&&typeof di<"u"?t(Ht):typeof define=="function"&&define.amd?define(["exports"],t):(n=typeof globalThis<"u"?globalThis:n||self,t(n.lumino_coreutils={}))})(Ht,function(n){"use strict";n.JSONExt=void 0,function(s){s.emptyObject=Object.freeze({}),s.emptyArray=Object.freeze([]);function a(f){return f===null||typeof f=="boolean"||typeof f=="number"||typeof f=="string"}s.isPrimitive=a;function l(f){return Array.isArray(f)}s.isArray=l;function h(f){return!a(f)&&!l(f)}s.isObject=h;function y(f,w){if(f===w)return!0;if(a(f)||a(w))return!1;var x=l(f),T=l(w);return x!==T?!1:x&&T?_(f,w):m(f,w)}s.deepEqual=y;function I(f){return a(f)?f:l(f)?c(f):p(f)}s.deepCopy=I;function _(f,w){if(f===w)return!0;if(f.length!==w.length)return!1;for(var x=0,T=f.length;x<T;++x)if(!y(f[x],w[x]))return!1;return!0}function m(f,w){if(f===w)return!0;for(var x in f)if(f[x]!==void 0&&!(x in w))return!1;for(var x in w)if(w[x]!==void 0&&!(x in f))return!1;for(var x in f){var T=f[x],A=w[x];if(!(T===void 0&&A===void 0)&&(T===void 0||A===void 0||!y(T,A)))return!1}return!0}function c(f){for(var w=new Array(f.length),x=0,T=f.length;x<T;++x)w[x]=I(f[x]);return w}function p(f){var w={};for(var x in f){var T=f[x];T!==void 0&&(w[x]=I(T))}return w}}(n.JSONExt||(n.JSONExt={}));var t=function(){function s(){this._types=[],this._values=[]}return s.prototype.types=function(){return this._types.slice()},s.prototype.hasData=function(a){return this._types.indexOf(a)!==-1},s.prototype.getData=function(a){var l=this._types.indexOf(a);return l!==-1?this._values[l]:void 0},s.prototype.setData=function(a,l){this.clearData(a),this._types.push(a),this._values.push(l)},s.prototype.clearData=function(a){var l=this._types.indexOf(a);l!==-1&&(this._types.splice(l,1),this._values.splice(l,1))},s.prototype.clear=function(){this._types.length=0,this._values.length=0},s}(),e=function(){function s(){var a=this;this.promise=new Promise(function(l,h){a._resolve=l,a._reject=h})}return s.prototype.resolve=function(a){var l=this._resolve;l(a)},s.prototype.reject=function(a){var l=this._reject;l(a)},s}(),i=function(){function s(a){this.name=a,this._tokenStructuralPropertyT=null}return s}();function r(s){for(var a=0,l=0,h=s.length;l<h;++l)l%4===0&&(a=Math.random()*4294967295>>>0),s[l]=a&255,a>>>=8}n.Random=void 0,function(s){s.getRandomValues=function(){var a=typeof window<"u"&&(window.crypto||window.msCrypto)||null;return a&&typeof a.getRandomValues=="function"?function(h){return a.getRandomValues(h)}:r}()}(n.Random||(n.Random={}));function o(s){for(var a=new Uint8Array(16),l=new Array(256),h=0;h<16;++h)l[h]="0"+h.toString(16);for(var h=16;h<256;++h)l[h]=h.toString(16);return function(){return s(a),a[6]=64|a[6]&15,a[8]=128|a[8]&63,l[a[0]]+l[a[1]]+l[a[2]]+l[a[3]]+"-"+l[a[4]]+l[a[5]]+"-"+l[a[6]]+l[a[7]]+"-"+l[a[8]]+l[a[9]]+"-"+l[a[10]]+l[a[11]]+l[a[12]]+l[a[13]]+l[a[14]]+l[a[15]]}}n.UUID=void 0,function(s){s.uuid4=o(n.Random.getRandomValues)}(n.UUID||(n.UUID={})),n.MimeData=t,n.PromiseDelegate=e,n.Token=i,Object.defineProperty(n,"__esModule",{value:!0})})});var mi=D((pI,hi)=>{function Sl(){this.__data__=[],this.size=0}hi.exports=Sl});var gn=D((fI,pi)=>{function Dl(n,t){return n===t||n!==n&&t!==t}pi.exports=Dl});var It=D((gI,fi)=>{var Bl=gn();function zl(n,t){for(var e=n.length;e--;)if(Bl(n[e][0],t))return e;return-1}fi.exports=zl});var bi=D((bI,gi)=>{var Rl=It(),Ol=Array.prototype,Pl=Ol.splice;function Hl(n){var t=this.__data__,e=Rl(t,n);if(e<0)return!1;var i=t.length-1;return e==i?t.pop():Pl.call(t,e,1),--this.size,!0}gi.exports=Hl});var yi=D((vI,vi)=>{var Fl=It();function Wl(n){var t=this.__data__,e=Fl(t,n);return e<0?void 0:t[e][1]}vi.exports=Wl});var xi=D((yI,_i)=>{var ql=It();function Nl(n){return ql(this.__data__,n)>-1}_i.exports=Nl});var Ti=D((_I,Ii)=>{var Kl=It();function jl(n,t){var e=this.__data__,i=Kl(e,n);return i<0?(++this.size,e.push([n,t])):e[i][1]=t,this}Ii.exports=jl});var Tt=D((xI,wi)=>{var Vl=mi(),Ul=bi(),Gl=yi(),$l=xi(),Yl=Ti();function nt(n){var t=-1,e=n==null?0:n.length;for(this.clear();++t<e;){var i=n[t];this.set(i[0],i[1])}}nt.prototype.clear=Vl;nt.prototype.delete=Ul;nt.prototype.get=Gl;nt.prototype.has=$l;nt.prototype.set=Yl;wi.exports=nt});var Ei=D((II,Mi)=>{var Xl=Tt();function Jl(){this.__data__=new Xl,this.size=0}Mi.exports=Jl});var Li=D((TI,ki)=>{function Zl(n){var t=this.__data__,e=t.delete(n);return this.size=t.size,e}ki.exports=Zl});var Ai=D((wI,Ci)=>{function Ql(n){return this.__data__.get(n)}Ci.exports=Ql});var Di=D((MI,Si)=>{function ed(n){return this.__data__.has(n)}Si.exports=ed});var bn=D((EI,Bi)=>{var td=typeof window=="object"&&window&&window.Object===Object&&window;Bi.exports=td});var _e=D((kI,zi)=>{var nd=bn(),id=typeof self=="object"&&self&&self.Object===Object&&self,rd=nd||id||Function("return this")();zi.exports=rd});var wt=D((LI,Ri)=>{var od=_e(),ad=od.Symbol;Ri.exports=ad});var Fi=D((CI,Hi)=>{var Oi=wt(),Pi=Object.prototype,sd=Pi.hasOwnProperty,ld=Pi.toString,Mt=Oi?Oi.toStringTag:void 0;function dd(n){var t=sd.call(n,Mt),e=n[Mt];try{n[Mt]=void 0;var i=!0}catch{}var r=ld.call(n);return i&&(t?n[Mt]=e:delete n[Mt]),r}Hi.exports=dd});var qi=D((AI,Wi)=>{var ud=Object.prototype,cd=ud.toString;function hd(n){return cd.call(n)}Wi.exports=hd});var it=D((SI,ji)=>{var Ni=wt(),md=Fi(),pd=qi(),fd="[object Null]",gd="[object Undefined]",Ki=Ni?Ni.toStringTag:void 0;function bd(n){return n==null?n===void 0?gd:fd:Ki&&Ki in Object(n)?md(n):pd(n)}ji.exports=bd});var rt=D((DI,Vi)=>{function vd(n){var t=typeof n;return n!=null&&(t=="object"||t=="function")}Vi.exports=vd});var vn=D((BI,Ui)=>{var yd=it(),_d=rt(),xd="[object AsyncFunction]",Id="[object Function]",Td="[object GeneratorFunction]",wd="[object Proxy]";function Md(n){if(!_d(n))return!1;var t=yd(n);return t==Id||t==Td||t==xd||t==wd}Ui.exports=Md});var $i=D((zI,Gi)=>{var Ed=_e(),kd=Ed["__core-js_shared__"];Gi.exports=kd});var Ji=D((RI,Xi)=>{var yn=$i(),Yi=function(){var n=/[^.]+$/.exec(yn&&yn.keys&&yn.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function Ld(n){return!!Yi&&Yi in n}Xi.exports=Ld});var _n=D((OI,Zi)=>{var Cd=Function.prototype,Ad=Cd.toString;function Sd(n){if(n!=null){try{return Ad.call(n)}catch{}try{return n+""}catch{}}return""}Zi.exports=Sd});var er=D((PI,Qi)=>{var Dd=vn(),Bd=Ji(),zd=rt(),Rd=_n(),Od=/[\\^$.*+?()[\]{}|]/g,Pd=/^\[object .+?Constructor\]$/,Hd=Function.prototype,Fd=Object.prototype,Wd=Hd.toString,qd=Fd.hasOwnProperty,Nd=RegExp("^"+Wd.call(qd).replace(Od,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Kd(n){if(!zd(n)||Bd(n))return!1;var t=Dd(n)?Nd:Pd;return t.test(Rd(n))}Qi.exports=Kd});var nr=D((HI,tr)=>{function jd(n,t){return n?.[t]}tr.exports=jd});var Ue=D((FI,ir)=>{var Vd=er(),Ud=nr();function Gd(n,t){var e=Ud(n,t);return Vd(e)?e:void 0}ir.exports=Gd});var Vt=D((WI,rr)=>{var $d=Ue(),Yd=_e(),Xd=$d(Yd,"Map");rr.exports=Xd});var Et=D((qI,or)=>{var Jd=Ue(),Zd=Jd(Object,"create");or.exports=Zd});var lr=D((NI,sr)=>{var ar=Et();function Qd(){this.__data__=ar?ar(null):{},this.size=0}sr.exports=Qd});var ur=D((KI,dr)=>{function eu(n){var t=this.has(n)&&delete this.__data__[n];return this.size-=t?1:0,t}dr.exports=eu});var hr=D((jI,cr)=>{var tu=Et(),nu="__lodash_hash_undefined__",iu=Object.prototype,ru=iu.hasOwnProperty;function ou(n){var t=this.__data__;if(tu){var e=t[n];return e===nu?void 0:e}return ru.call(t,n)?t[n]:void 0}cr.exports=ou});var pr=D((VI,mr)=>{var au=Et(),su=Object.prototype,lu=su.hasOwnProperty;function du(n){var t=this.__data__;return au?t[n]!==void 0:lu.call(t,n)}mr.exports=du});var gr=D((UI,fr)=>{var uu=Et(),cu="__lodash_hash_undefined__";function hu(n,t){var e=this.__data__;return this.size+=this.has(n)?0:1,e[n]=uu&&t===void 0?cu:t,this}fr.exports=hu});var vr=D((GI,br)=>{var mu=lr(),pu=ur(),fu=hr(),gu=pr(),bu=gr();function ot(n){var t=-1,e=n==null?0:n.length;for(this.clear();++t<e;){var i=n[t];this.set(i[0],i[1])}}ot.prototype.clear=mu;ot.prototype.delete=pu;ot.prototype.get=fu;ot.prototype.has=gu;ot.prototype.set=bu;br.exports=ot});var xr=D(($I,_r)=>{var yr=vr(),vu=Tt(),yu=Vt();function _u(){this.size=0,this.__data__={hash:new yr,map:new(yu||vu),string:new yr}}_r.exports=_u});var Tr=D((YI,Ir)=>{function xu(n){var t=typeof n;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?n!=="__proto__":n===null}Ir.exports=xu});var kt=D((XI,wr)=>{var Iu=Tr();function Tu(n,t){var e=n.__data__;return Iu(t)?e[typeof t=="string"?"string":"hash"]:e.map}wr.exports=Tu});var Er=D((JI,Mr)=>{var wu=kt();function Mu(n){var t=wu(this,n).delete(n);return this.size-=t?1:0,t}Mr.exports=Mu});var Lr=D((ZI,kr)=>{var Eu=kt();function ku(n){return Eu(this,n).get(n)}kr.exports=ku});var Ar=D((QI,Cr)=>{var Lu=kt();function Cu(n){return Lu(this,n).has(n)}Cr.exports=Cu});var Dr=D((eT,Sr)=>{var Au=kt();function Su(n,t){var e=Au(this,n),i=e.size;return e.set(n,t),this.size+=e.size==i?0:1,this}Sr.exports=Su});var Ut=D((tT,Br)=>{var Du=xr(),Bu=Er(),zu=Lr(),Ru=Ar(),Ou=Dr();function at(n){var t=-1,e=n==null?0:n.length;for(this.clear();++t<e;){var i=n[t];this.set(i[0],i[1])}}at.prototype.clear=Du;at.prototype.delete=Bu;at.prototype.get=zu;at.prototype.has=Ru;at.prototype.set=Ou;Br.exports=at});var Rr=D((nT,zr)=>{var Pu=Tt(),Hu=Vt(),Fu=Ut(),Wu=200;function qu(n,t){var e=this.__data__;if(e instanceof Pu){var i=e.__data__;if(!Hu||i.length<Wu-1)return i.push([n,t]),this.size=++e.size,this;e=this.__data__=new Fu(i)}return e.set(n,t),this.size=e.size,this}zr.exports=qu});var xn=D((iT,Or)=>{var Nu=Tt(),Ku=Ei(),ju=Li(),Vu=Ai(),Uu=Di(),Gu=Rr();function st(n){var t=this.__data__=new Nu(n);this.size=t.size}st.prototype.clear=Ku;st.prototype.delete=ju;st.prototype.get=Vu;st.prototype.has=Uu;st.prototype.set=Gu;Or.exports=st});var Hr=D((rT,Pr)=>{var $u="__lodash_hash_undefined__";function Yu(n){return this.__data__.set(n,$u),this}Pr.exports=Yu});var Wr=D((oT,Fr)=>{function Xu(n){return this.__data__.has(n)}Fr.exports=Xu});var In=D((aT,qr)=>{var Ju=Ut(),Zu=Hr(),Qu=Wr();function Gt(n){var t=-1,e=n==null?0:n.length;for(this.__data__=new Ju;++t<e;)this.add(n[t])}Gt.prototype.add=Gt.prototype.push=Zu;Gt.prototype.has=Qu;qr.exports=Gt});var Kr=D((sT,Nr)=>{function ec(n,t){for(var e=-1,i=n==null?0:n.length;++e<i;)if(t(n[e],e,n))return!0;return!1}Nr.exports=ec});var Tn=D((lT,jr)=>{function tc(n,t){return n.has(t)}jr.exports=tc});var wn=D((dT,Vr)=>{var nc=In(),ic=Kr(),rc=Tn(),oc=1,ac=2;function sc(n,t,e,i,r,o){var s=e&oc,a=n.length,l=t.length;if(a!=l&&!(s&&l>a))return!1;var h=o.get(n),y=o.get(t);if(h&&y)return h==t&&y==n;var I=-1,_=!0,m=e&ac?new nc:void 0;for(o.set(n,t),o.set(t,n);++I<a;){var c=n[I],p=t[I];if(i)var f=s?i(p,c,I,t,n,o):i(c,p,I,n,t,o);if(f!==void 0){if(f)continue;_=!1;break}if(m){if(!ic(t,function(w,x){if(!rc(m,x)&&(c===w||r(c,w,e,i,o)))return m.push(x)})){_=!1;break}}else if(!(c===p||r(c,p,e,i,o))){_=!1;break}}return o.delete(n),o.delete(t),_}Vr.exports=sc});var Gr=D((uT,Ur)=>{var lc=_e(),dc=lc.Uint8Array;Ur.exports=dc});var Yr=D((cT,$r)=>{function uc(n){var t=-1,e=Array(n.size);return n.forEach(function(i,r){e[++t]=[r,i]}),e}$r.exports=uc});var $t=D((hT,Xr)=>{function cc(n){var t=-1,e=Array(n.size);return n.forEach(function(i){e[++t]=i}),e}Xr.exports=cc});var to=D((mT,eo)=>{var Jr=wt(),Zr=Gr(),hc=gn(),mc=wn(),pc=Yr(),fc=$t(),gc=1,bc=2,vc="[object Boolean]",yc="[object Date]",_c="[object Error]",xc="[object Map]",Ic="[object Number]",Tc="[object RegExp]",wc="[object Set]",Mc="[object String]",Ec="[object Symbol]",kc="[object ArrayBuffer]",Lc="[object DataView]",Qr=Jr?Jr.prototype:void 0,Mn=Qr?Qr.valueOf:void 0;function Cc(n,t,e,i,r,o,s){switch(e){case Lc:if(n.byteLength!=t.byteLength||n.byteOffset!=t.byteOffset)return!1;n=n.buffer,t=t.buffer;case kc:return!(n.byteLength!=t.byteLength||!o(new Zr(n),new Zr(t)));case vc:case yc:case Ic:return hc(+n,+t);case _c:return n.name==t.name&&n.message==t.message;case Tc:case Mc:return n==t+"";case xc:var a=pc;case wc:var l=i&gc;if(a||(a=fc),n.size!=t.size&&!l)return!1;var h=s.get(n);if(h)return h==t;i|=bc,s.set(n,t);var y=mc(a(n),a(t),i,r,o,s);return s.delete(n),y;case Ec:if(Mn)return Mn.call(n)==Mn.call(t)}return!1}eo.exports=Cc});var io=D((pT,no)=>{function Ac(n,t){for(var e=-1,i=t.length,r=n.length;++e<i;)n[r+e]=t[e];return n}no.exports=Ac});var Ae=D((fT,ro)=>{var Sc=Array.isArray;ro.exports=Sc});var ao=D((gT,oo)=>{var Dc=io(),Bc=Ae();function zc(n,t,e){var i=t(n);return Bc(n)?i:Dc(i,e(n))}oo.exports=zc});var lo=D((bT,so)=>{function Rc(n,t){for(var e=-1,i=n==null?0:n.length,r=0,o=[];++e<i;){var s=n[e];t(s,e,n)&&(o[r++]=s)}return o}so.exports=Rc});var co=D((vT,uo)=>{function Oc(){return[]}uo.exports=Oc});var po=D((yT,mo)=>{var Pc=lo(),Hc=co(),Fc=Object.prototype,Wc=Fc.propertyIsEnumerable,ho=Object.getOwnPropertySymbols,qc=ho?function(n){return n==null?[]:(n=Object(n),Pc(ho(n),function(t){return Wc.call(n,t)}))}:Hc;mo.exports=qc});var go=D((_T,fo)=>{function Nc(n,t){for(var e=-1,i=Array(n);++e<n;)i[e]=t(e);return i}fo.exports=Nc});var lt=D((xT,bo)=>{function Kc(n){return n!=null&&typeof n=="object"}bo.exports=Kc});var yo=D((IT,vo)=>{var jc=it(),Vc=lt(),Uc="[object Arguments]";function Gc(n){return Vc(n)&&jc(n)==Uc}vo.exports=Gc});var En=D((TT,Io)=>{var _o=yo(),$c=lt(),xo=Object.prototype,Yc=xo.hasOwnProperty,Xc=xo.propertyIsEnumerable,Jc=_o(function(){return arguments}())?_o:function(n){return $c(n)&&Yc.call(n,"callee")&&!Xc.call(n,"callee")};Io.exports=Jc});var wo=D((wT,To)=>{function Zc(){return!1}To.exports=Zc});var kn=D((Lt,dt)=>{var Qc=_e(),eh=wo(),ko=typeof Lt=="object"&&Lt&&!Lt.nodeType&&Lt,Mo=ko&&typeof dt=="object"&&dt&&!dt.nodeType&&dt,th=Mo&&Mo.exports===ko,Eo=th?Qc.Buffer:void 0,nh=Eo?Eo.isBuffer:void 0,ih=nh||eh;dt.exports=ih});var Ln=D((MT,Lo)=>{var rh=9007199254740991,oh=/^(?:0|[1-9]\d*)$/;function ah(n,t){var e=typeof n;return t=t??rh,!!t&&(e=="number"||e!="symbol"&&oh.test(n))&&n>-1&&n%1==0&&n<t}Lo.exports=ah});var Yt=D((ET,Co)=>{var sh=9007199254740991;function lh(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=sh}Co.exports=lh});var So=D((kT,Ao)=>{var dh=it(),uh=Yt(),ch=lt(),hh="[object Arguments]",mh="[object Array]",ph="[object Boolean]",fh="[object Date]",gh="[object Error]",bh="[object Function]",vh="[object Map]",yh="[object Number]",_h="[object Object]",xh="[object RegExp]",Ih="[object Set]",Th="[object String]",wh="[object WeakMap]",Mh="[object ArrayBuffer]",Eh="[object DataView]",kh="[object Float32Array]",Lh="[object Float64Array]",Ch="[object Int8Array]",Ah="[object Int16Array]",Sh="[object Int32Array]",Dh="[object Uint8Array]",Bh="[object Uint8ClampedArray]",zh="[object Uint16Array]",Rh="[object Uint32Array]",V={};V[kh]=V[Lh]=V[Ch]=V[Ah]=V[Sh]=V[Dh]=V[Bh]=V[zh]=V[Rh]=!0;V[hh]=V[mh]=V[Mh]=V[ph]=V[Eh]=V[fh]=V[gh]=V[bh]=V[vh]=V[yh]=V[_h]=V[xh]=V[Ih]=V[Th]=V[wh]=!1;function Oh(n){return ch(n)&&uh(n.length)&&!!V[dh(n)]}Ao.exports=Oh});var Bo=D((LT,Do)=>{function Ph(n){return function(t){return n(t)}}Do.exports=Ph});var Ro=D((Ct,ut)=>{var Hh=bn(),zo=typeof Ct=="object"&&Ct&&!Ct.nodeType&&Ct,At=zo&&typeof ut=="object"&&ut&&!ut.nodeType&&ut,Fh=At&&At.exports===zo,Cn=Fh&&Hh.process,Wh=function(){try{var n=At&&At.require&&At.require("util").types;return n||Cn&&Cn.binding&&Cn.binding("util")}catch{}}();ut.exports=Wh});var An=D((CT,Ho)=>{var qh=So(),Nh=Bo(),Oo=Ro(),Po=Oo&&Oo.isTypedArray,Kh=Po?Nh(Po):qh;Ho.exports=Kh});var Wo=D((AT,Fo)=>{var jh=go(),Vh=En(),Uh=Ae(),Gh=kn(),$h=Ln(),Yh=An(),Xh=Object.prototype,Jh=Xh.hasOwnProperty;function Zh(n,t){var e=Uh(n),i=!e&&Vh(n),r=!e&&!i&&Gh(n),o=!e&&!i&&!r&&Yh(n),s=e||i||r||o,a=s?jh(n.length,String):[],l=a.length;for(var h in n)(t||Jh.call(n,h))&&!(s&&(h=="length"||r&&(h=="offset"||h=="parent")||o&&(h=="buffer"||h=="byteLength"||h=="byteOffset")||$h(h,l)))&&a.push(h);return a}Fo.exports=Zh});var No=D((ST,qo)=>{var Qh=Object.prototype;function em(n){var t=n&&n.constructor,e=typeof t=="function"&&t.prototype||Qh;return n===e}qo.exports=em});var jo=D((DT,Ko)=>{function tm(n,t){return function(e){return n(t(e))}}Ko.exports=tm});var Uo=D((BT,Vo)=>{var nm=jo(),im=nm(Object.keys,Object);Vo.exports=im});var $o=D((zT,Go)=>{var rm=No(),om=Uo(),am=Object.prototype,sm=am.hasOwnProperty;function lm(n){if(!rm(n))return om(n);var t=[];for(var e in Object(n))sm.call(n,e)&&e!="constructor"&&t.push(e);return t}Go.exports=lm});var Xo=D((RT,Yo)=>{var dm=vn(),um=Yt();function cm(n){return n!=null&&um(n.length)&&!dm(n)}Yo.exports=cm});var Sn=D((OT,Jo)=>{var hm=Wo(),mm=$o(),pm=Xo();function fm(n){return pm(n)?hm(n):mm(n)}Jo.exports=fm});var Qo=D((PT,Zo)=>{var gm=ao(),bm=po(),vm=Sn();function ym(n){return gm(n,vm,bm)}Zo.exports=ym});var na=D((HT,ta)=>{var ea=Qo(),_m=1,xm=Object.prototype,Im=xm.hasOwnProperty;function Tm(n,t,e,i,r,o){var s=e&_m,a=ea(n),l=a.length,h=ea(t),y=h.length;if(l!=y&&!s)return!1;for(var I=l;I--;){var _=a[I];if(!(s?_ in t:Im.call(t,_)))return!1}var m=o.get(n),c=o.get(t);if(m&&c)return m==t&&c==n;var p=!0;o.set(n,t),o.set(t,n);for(var f=s;++I<l;){_=a[I];var w=n[_],x=t[_];if(i)var T=s?i(x,w,_,t,n,o):i(w,x,_,n,t,o);if(!(T===void 0?w===x||r(w,x,e,i,o):T)){p=!1;break}f||(f=_=="constructor")}if(p&&!f){var A=n.constructor,E=t.constructor;A!=E&&"constructor"in n&&"constructor"in t&&!(typeof A=="function"&&A instanceof A&&typeof E=="function"&&E instanceof E)&&(p=!1)}return o.delete(n),o.delete(t),p}ta.exports=Tm});var ra=D((FT,ia)=>{var wm=Ue(),Mm=_e(),Em=wm(Mm,"DataView");ia.exports=Em});var aa=D((WT,oa)=>{var km=Ue(),Lm=_e(),Cm=km(Lm,"Promise");oa.exports=Cm});var Dn=D((qT,sa)=>{var Am=Ue(),Sm=_e(),Dm=Am(Sm,"Set");sa.exports=Dm});var da=D((NT,la)=>{var Bm=Ue(),zm=_e(),Rm=Bm(zm,"WeakMap");la.exports=Rm});var ba=D((KT,ga)=>{var Bn=ra(),zn=Vt(),Rn=aa(),On=Dn(),Pn=da(),fa=it(),ct=_n(),ua="[object Map]",Om="[object Object]",ca="[object Promise]",ha="[object Set]",ma="[object WeakMap]",pa="[object DataView]",Pm=ct(Bn),Hm=ct(zn),Fm=ct(Rn),Wm=ct(On),qm=ct(Pn),Ge=fa;(Bn&&Ge(new Bn(new ArrayBuffer(1)))!=pa||zn&&Ge(new zn)!=ua||Rn&&Ge(Rn.resolve())!=ca||On&&Ge(new On)!=ha||Pn&&Ge(new Pn)!=ma)&&(Ge=function(n){var t=fa(n),e=t==Om?n.constructor:void 0,i=e?ct(e):"";if(i)switch(i){case Pm:return pa;case Hm:return ua;case Fm:return ca;case Wm:return ha;case qm:return ma}return t});ga.exports=Ge});var Ma=D((jT,wa)=>{var Hn=xn(),Nm=wn(),Km=to(),jm=na(),va=ba(),ya=Ae(),_a=kn(),Vm=An(),Um=1,xa="[object Arguments]",Ia="[object Array]",Xt="[object Object]",Gm=Object.prototype,Ta=Gm.hasOwnProperty;function $m(n,t,e,i,r,o){var s=ya(n),a=ya(t),l=s?Ia:va(n),h=a?Ia:va(t);l=l==xa?Xt:l,h=h==xa?Xt:h;var y=l==Xt,I=h==Xt,_=l==h;if(_&&_a(n)){if(!_a(t))return!1;s=!0,y=!1}if(_&&!y)return o||(o=new Hn),s||Vm(n)?Nm(n,t,e,i,r,o):Km(n,t,l,e,i,r,o);if(!(e&Um)){var m=y&&Ta.call(n,"__wrapped__"),c=I&&Ta.call(t,"__wrapped__");if(m||c){var p=m?n.value():n,f=c?t.value():t;return o||(o=new Hn),r(p,f,e,i,o)}}return _?(o||(o=new Hn),jm(n,t,e,i,r,o)):!1}wa.exports=$m});var Fn=D((VT,La)=>{var Ym=Ma(),Ea=lt();function ka(n,t,e,i,r){return n===t?!0:n==null||t==null||!Ea(n)&&!Ea(t)?n!==n&&t!==t:Ym(n,t,e,i,ka,r)}La.exports=ka});var Aa=D((UT,Ca)=>{var Xm=xn(),Jm=Fn(),Zm=1,Qm=2;function ep(n,t,e,i){var r=e.length,o=r,s=!i;if(n==null)return!o;for(n=Object(n);r--;){var a=e[r];if(s&&a[2]?a[1]!==n[a[0]]:!(a[0]in n))return!1}for(;++r<o;){a=e[r];var l=a[0],h=n[l],y=a[1];if(s&&a[2]){if(h===void 0&&!(l in n))return!1}else{var I=new Xm;if(i)var _=i(h,y,l,n,t,I);if(!(_===void 0?Jm(y,h,Zm|Qm,i,I):_))return!1}}return!0}Ca.exports=ep});var Wn=D((GT,Sa)=>{var tp=rt();function np(n){return n===n&&!tp(n)}Sa.exports=np});var Ba=D(($T,Da)=>{var ip=Wn(),rp=Sn();function op(n){for(var t=rp(n),e=t.length;e--;){var i=t[e],r=n[i];t[e]=[i,r,ip(r)]}return t}Da.exports=op});var qn=D((YT,za)=>{function ap(n,t){return function(e){return e==null?!1:e[n]===t&&(t!==void 0||n in Object(e))}}za.exports=ap});var Oa=D((XT,Ra)=>{var sp=Aa(),lp=Ba(),dp=qn();function up(n){var t=lp(n);return t.length==1&&t[0][2]?dp(t[0][0],t[0][1]):function(e){return e===n||sp(e,n,t)}}Ra.exports=up});var St=D((JT,Pa)=>{var cp=it(),hp=lt(),mp="[object Symbol]";function pp(n){return typeof n=="symbol"||hp(n)&&cp(n)==mp}Pa.exports=pp});var Jt=D((ZT,Ha)=>{var fp=Ae(),gp=St(),bp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,vp=/^\w*$/;function yp(n,t){if(fp(n))return!1;var e=typeof n;return e=="number"||e=="symbol"||e=="boolean"||n==null||gp(n)?!0:vp.test(n)||!bp.test(n)||t!=null&&n in Object(t)}Ha.exports=yp});var qa=D((QT,Wa)=>{var Fa=Ut(),_p="Expected a function";function Nn(n,t){if(typeof n!="function"||t!=null&&typeof t!="function")throw new TypeError(_p);var e=function(){var i=arguments,r=t?t.apply(this,i):i[0],o=e.cache;if(o.has(r))return o.get(r);var s=n.apply(this,i);return e.cache=o.set(r,s)||o,s};return e.cache=new(Nn.Cache||Fa),e}Nn.Cache=Fa;Wa.exports=Nn});var Ka=D((ew,Na)=>{var xp=qa(),Ip=500;function Tp(n){var t=xp(n,function(i){return e.size===Ip&&e.clear(),i}),e=t.cache;return t}Na.exports=Tp});var Va=D((tw,ja)=>{var wp=Ka(),Mp=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ep=/\\(\\)?/g,kp=wp(function(n){var t=[];return n.charCodeAt(0)===46&&t.push(""),n.replace(Mp,function(e,i,r,o){t.push(r?o.replace(Ep,"$1"):i||e)}),t});ja.exports=kp});var Ga=D((nw,Ua)=>{function Lp(n,t){for(var e=-1,i=n==null?0:n.length,r=Array(i);++e<i;)r[e]=t(n[e],e,n);return r}Ua.exports=Lp});var Qa=D((iw,Za)=>{var $a=wt(),Cp=Ga(),Ap=Ae(),Sp=St(),Dp=1/0,Ya=$a?$a.prototype:void 0,Xa=Ya?Ya.toString:void 0;function Ja(n){if(typeof n=="string")return n;if(Ap(n))return Cp(n,Ja)+"";if(Sp(n))return Xa?Xa.call(n):"";var t=n+"";return t=="0"&&1/n==-Dp?"-0":t}Za.exports=Ja});var ts=D((rw,es)=>{var Bp=Qa();function zp(n){return n==null?"":Bp(n)}es.exports=zp});var Kn=D((ow,ns)=>{var Rp=Ae(),Op=Jt(),Pp=Va(),Hp=ts();function Fp(n,t){return Rp(n)?n:Op(n,t)?[n]:Pp(Hp(n))}ns.exports=Fp});var Dt=D((aw,is)=>{var Wp=St(),qp=1/0;function Np(n){if(typeof n=="string"||Wp(n))return n;var t=n+"";return t=="0"&&1/n==-qp?"-0":t}is.exports=Np});var jn=D((sw,rs)=>{var Kp=Kn(),jp=Dt();function Vp(n,t){t=Kp(t,n);for(var e=0,i=t.length;n!=null&&e<i;)n=n[jp(t[e++])];return e&&e==i?n:void 0}rs.exports=Vp});var as=D((lw,os)=>{var Up=jn();function Gp(n,t,e){var i=n==null?void 0:Up(n,t);return i===void 0?e:i}os.exports=Gp});var ls=D((dw,ss)=>{function $p(n,t){return n!=null&&t in Object(n)}ss.exports=$p});var us=D((uw,ds)=>{var Yp=Kn(),Xp=En(),Jp=Ae(),Zp=Ln(),Qp=Yt(),ef=Dt();function tf(n,t,e){t=Yp(t,n);for(var i=-1,r=t.length,o=!1;++i<r;){var s=ef(t[i]);if(!(o=n!=null&&e(n,s)))break;n=n[s]}return o||++i!=r?o:(r=n==null?0:n.length,!!r&&Qp(r)&&Zp(s,r)&&(Jp(n)||Xp(n)))}ds.exports=tf});var hs=D((cw,cs)=>{var nf=ls(),rf=us();function of(n,t){return n!=null&&rf(n,t,nf)}cs.exports=of});var ps=D((hw,ms)=>{var af=Fn(),sf=as(),lf=hs(),df=Jt(),uf=Wn(),cf=qn(),hf=Dt(),mf=1,pf=2;function ff(n,t){return df(n)&&uf(t)?cf(hf(n),t):function(e){var i=sf(e,n);return i===void 0&&i===t?lf(e,n):af(t,i,mf|pf)}}ms.exports=ff});var gs=D((mw,fs)=>{function gf(n){return n}fs.exports=gf});var vs=D((pw,bs)=>{function bf(n){return function(t){return t?.[n]}}bs.exports=bf});var _s=D((fw,ys)=>{var vf=jn();function yf(n){return function(t){return vf(t,n)}}ys.exports=yf});var Is=D((gw,xs)=>{var _f=vs(),xf=_s(),If=Jt(),Tf=Dt();function wf(n){return If(n)?_f(Tf(n)):xf(n)}xs.exports=wf});var ws=D((bw,Ts)=>{var Mf=Oa(),Ef=ps(),kf=gs(),Lf=Ae(),Cf=Is();function Af(n){return typeof n=="function"?n:n==null?kf:typeof n=="object"?Lf(n)?Ef(n[0],n[1]):Mf(n):Cf(n)}Ts.exports=Af});var Es=D((vw,Ms)=>{function Sf(n,t,e,i){for(var r=n.length,o=e+(i?1:-1);i?o--:++o<r;)if(t(n[o],o,n))return o;return-1}Ms.exports=Sf});var Ls=D((yw,ks)=>{function Df(n){return n!==n}ks.exports=Df});var As=D((_w,Cs)=>{function Bf(n,t,e){for(var i=e-1,r=n.length;++i<r;)if(n[i]===t)return i;return-1}Cs.exports=Bf});var Ds=D((xw,Ss)=>{var zf=Es(),Rf=Ls(),Of=As();function Pf(n,t,e){return t===t?Of(n,t,e):zf(n,Rf,e)}Ss.exports=Pf});var zs=D((Iw,Bs)=>{var Hf=Ds();function Ff(n,t){var e=n==null?0:n.length;return!!e&&Hf(n,t,0)>-1}Bs.exports=Ff});var Os=D((Tw,Rs)=>{function Wf(n,t,e){for(var i=-1,r=n==null?0:n.length;++i<r;)if(e(t,n[i]))return!0;return!1}Rs.exports=Wf});var Hs=D((ww,Ps)=>{function qf(){}Ps.exports=qf});var Ws=D((Mw,Fs)=>{var Vn=Dn(),Nf=Hs(),Kf=$t(),jf=1/0,Vf=Vn&&1/Kf(new Vn([,-0]))[1]==jf?function(n){return new Vn(n)}:Nf;Fs.exports=Vf});var Ns=D((Ew,qs)=>{var Uf=In(),Gf=zs(),$f=Os(),Yf=Tn(),Xf=Ws(),Jf=$t(),Zf=200;function Qf(n,t,e){var i=-1,r=Gf,o=n.length,s=!0,a=[],l=a;if(e)s=!1,r=$f;else if(o>=Zf){var h=t?null:Xf(n);if(h)return Jf(h);s=!1,r=Yf,l=new Uf}else l=t?[]:a;e:for(;++i<o;){var y=n[i],I=t?t(y):y;if(y=e||y!==0?y:0,s&&I===I){for(var _=l.length;_--;)if(l[_]===I)continue e;t&&l.push(I),a.push(y)}else r(l,I,e)||(l!==a&&l.push(I),a.push(y))}return a}qs.exports=Qf});var js=D((kw,Ks)=>{var eg=ws(),tg=Ns();function ng(n,t){return n&&n.length?tg(n,eg(t,2)):[]}Ks.exports=ng});var Us=D((Lw,Vs)=>{var ig=_e(),rg=function(){return ig.Date.now()};Vs.exports=rg});var $s=D((Cw,Gs)=>{var og=/\s/;function ag(n){for(var t=n.length;t--&&og.test(n.charAt(t)););return t}Gs.exports=ag});var Xs=D((Aw,Ys)=>{var sg=$s(),lg=/^\s+/;function dg(n){return n&&n.slice(0,sg(n)+1).replace(lg,"")}Ys.exports=dg});var el=D((Sw,Qs)=>{var ug=Xs(),Js=rt(),cg=St(),Zs=0/0,hg=/^[-+]0x[0-9a-f]+$/i,mg=/^0b[01]+$/i,pg=/^0o[0-7]+$/i,fg=parseInt;function gg(n){if(typeof n=="number")return n;if(cg(n))return Zs;if(Js(n)){var t=typeof n.valueOf=="function"?n.valueOf():n;n=Js(t)?t+"":t}if(typeof n!="string")return n===0?n:+n;n=ug(n);var e=mg.test(n);return e||pg.test(n)?fg(n.slice(2),e?2:8):hg.test(n)?Zs:+n}Qs.exports=gg});var il=D((Dw,nl)=>{var bg=rt(),Un=Us(),tl=el(),vg="Expected a function",yg=Math.max,_g=Math.min;function xg(n,t,e){var i,r,o,s,a,l,h=0,y=!1,I=!1,_=!0;if(typeof n!="function")throw new TypeError(vg);t=tl(t)||0,bg(e)&&(y=!!e.leading,I="maxWait"in e,o=I?yg(tl(e.maxWait)||0,t):o,_="trailing"in e?!!e.trailing:_);function m(S){var v=i,M=r;return i=r=void 0,h=S,s=n.apply(M,v),s}function c(S){return h=S,a=setTimeout(w,t),y?m(S):s}function p(S){var v=S-l,M=S-h,d=t-v;return I?_g(d,o-M):d}function f(S){var v=S-l,M=S-h;return l===void 0||v>=t||v<0||I&&M>=o}function w(){var S=Un();if(f(S))return x(S);a=setTimeout(w,p(S))}function x(S){return a=void 0,_&&i?m(S):(i=r=void 0,s)}function T(){a!==void 0&&clearTimeout(a),h=0,i=l=r=a=void 0}function A(){return a===void 0?s:x(Un())}function E(){var S=Un(),v=f(S);if(i=arguments,r=this,l=S,v){if(a===void 0)return c(l);if(I)return clearTimeout(a),a=setTimeout(w,t),m(l)}return a===void 0&&(a=setTimeout(w,t)),s}return E.cancel=T,E.flush=A,E}nl.exports=xg});var Zn=`.p-Widget,.lm-Widget{box-sizing:border-box;position:relative;overflow:hidden;cursor:default;}.p-Widget.p-mod-hidden,.lm-Widget.lm-mod-hidden{display:none!important;}.lm-AccordionPanel[data-orientation='horizontal']>.lm-AccordionPanel-title{display:block;transform-origin:top left;transform:rotate(-90deg)translate(-100%);}.p-CommandPalette,.lm-CommandPalette{display:flex;flex-direction:column;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}.p-CommandPalette-search,.lm-CommandPalette-search{flex:0 0 auto;}.p-CommandPalette-content,.lm-CommandPalette-content{flex:1 1 auto;margin:0;padding:0;min-height:0;overflow:auto;list-style-type:none;}.p-CommandPalette-header,.lm-CommandPalette-header{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;}.p-CommandPalette-item,.lm-CommandPalette-item{display:flex;flex-direction:row;}.p-CommandPalette-itemIcon,.lm-CommandPalette-itemIcon{flex:0 0 auto;}.p-CommandPalette-itemContent,.lm-CommandPalette-itemContent{flex:1 1 auto;overflow:hidden;}.p-CommandPalette-itemShortcut,.lm-CommandPalette-itemShortcut{flex:0 0 auto;}.p-CommandPalette-itemLabel,.lm-CommandPalette-itemLabel{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;}.lm-close-icon{border:1px solid transparent;background-color:transparent;position:absolute;z-index:1;right:3%;top:0;bottom:0;margin:auto;padding:7px 0;display:none;vertical-align:middle;outline:0;cursor:pointer;}.lm-close-icon:after{content:'X';display:block;width:15px;height:15px;text-align:center;color:#000;font-weight:normal;font-size:12px;cursor:pointer;}.p-DockPanel,.lm-DockPanel{z-index:0;}.p-DockPanel-widget,.lm-DockPanel-widget{z-index:0;}.p-DockPanel-tabBar,.lm-DockPanel-tabBar{z-index:1;}.p-DockPanel-handle,.lm-DockPanel-handle{z-index:2;}.p-DockPanel-handle.p-mod-hidden,.lm-DockPanel-handle.lm-mod-hidden{display:none!important;}.p-DockPanel-handle:after,.lm-DockPanel-handle:after{position:absolute;top:0;left:0;width:100%;height:100%;content:'';}.p-DockPanel-handle[data-orientation='horizontal'],.lm-DockPanel-handle[data-orientation='horizontal']{cursor:ew-resize;}.p-DockPanel-handle[data-orientation='vertical'],.lm-DockPanel-handle[data-orientation='vertical']{cursor:ns-resize;}.p-DockPanel-handle[data-orientation='horizontal']:after,.lm-DockPanel-handle[data-orientation='horizontal']:after{left:50%;min-width:8px;transform:translateX(-50%);}.p-DockPanel-handle[data-orientation='vertical']:after,.lm-DockPanel-handle[data-orientation='vertical']:after{top:50%;min-height:8px;transform:translateY(-50%);}.p-DockPanel-overlay,.lm-DockPanel-overlay{z-index:3;box-sizing:border-box;pointer-events:none;}.p-DockPanel-overlay.p-mod-hidden,.lm-DockPanel-overlay.lm-mod-hidden{display:none!important;}.p-Menu,.lm-Menu{z-index:10000;position:absolute;white-space:nowrap;overflow-x:hidden;overflow-y:auto;outline:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}.p-Menu-content,.lm-Menu-content{margin:0;padding:0;display:table;list-style-type:none;}.p-Menu-item,.lm-Menu-item{display:table-row;}.p-Menu-item.p-mod-hidden,.p-Menu-item.p-mod-collapsed,.lm-Menu-item.lm-mod-hidden,.lm-Menu-item.lm-mod-collapsed{display:none!important;}.p-Menu-itemIcon,.p-Menu-itemSubmenuIcon,.lm-Menu-itemIcon,.lm-Menu-itemSubmenuIcon{display:table-cell;text-align:center;}.p-Menu-itemLabel,.lm-Menu-itemLabel{display:table-cell;text-align:left;}.p-Menu-itemShortcut,.lm-Menu-itemShortcut{display:table-cell;text-align:right;}.p-MenuBar,.lm-MenuBar{outline:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}.p-MenuBar-content,.lm-MenuBar-content{margin:0;padding:0;display:flex;flex-direction:row;list-style-type:none;}.p--MenuBar-item,.lm-MenuBar-item{box-sizing:border-box;}.p-MenuBar-itemIcon,.p-MenuBar-itemLabel,.lm-MenuBar-itemIcon,.lm-MenuBar-itemLabel{display:inline-block;}.p-ScrollBar,.lm-ScrollBar{display:flex;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}.p-ScrollBar[data-orientation='horizontal'],.lm-ScrollBar[data-orientation='horizontal']{flex-direction:row;}.p-ScrollBar[data-orientation='vertical'],.lm-ScrollBar[data-orientation='vertical']{flex-direction:column;}.p-ScrollBar-button,.lm-ScrollBar-button{box-sizing:border-box;flex:0 0 auto;}.p-ScrollBar-track,.lm-ScrollBar-track{box-sizing:border-box;position:relative;overflow:hidden;flex:1 1 auto;}.p-ScrollBar-thumb,.lm-ScrollBar-thumb{box-sizing:border-box;position:absolute;}.p-SplitPanel-child,.lm-SplitPanel-child{z-index:0;}.p-SplitPanel-handle,.lm-SplitPanel-handle{z-index:1;}.p-SplitPanel-handle.p-mod-hidden,.lm-SplitPanel-handle.lm-mod-hidden{display:none!important;}.p-SplitPanel-handle:after,.lm-SplitPanel-handle:after{position:absolute;top:0;left:0;width:100%;height:100%;content:'';}.p-SplitPanel[data-orientation='horizontal']>.p-SplitPanel-handle,.lm-SplitPanel[data-orientation='horizontal']>.lm-SplitPanel-handle{cursor:ew-resize;}.p-SplitPanel[data-orientation='vertical']>.p-SplitPanel-handle,.lm-SplitPanel[data-orientation='vertical']>.lm-SplitPanel-handle{cursor:ns-resize;}.p-SplitPanel[data-orientation='horizontal']>.p-SplitPanel-handle:after,.lm-SplitPanel[data-orientation='horizontal']>.lm-SplitPanel-handle:after{left:50%;min-width:8px;transform:translateX(-50%);}.p-SplitPanel[data-orientation='vertical']>.p-SplitPanel-handle:after,.lm-SplitPanel[data-orientation='vertical']>.lm-SplitPanel-handle:after{top:50%;min-height:8px;transform:translateY(-50%);}.p-TabBar,.lm-TabBar{display:flex;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}.p-TabBar[data-orientation='horizontal'],.lm-TabBar[data-orientation='horizontal']{flex-direction:row;align-items:flex-end;}.p-TabBar[data-orientation='vertical'],.lm-TabBar[data-orientation='vertical']{flex-direction:column;align-items:flex-end;}.p-TabBar-content,.lm-TabBar-content{margin:0;padding:0;display:flex;flex:1 1 auto;list-style-type:none;}.p-TabBar[data-orientation='horizontal']>.p-TabBar-content,.lm-TabBar[data-orientation='horizontal']>.lm-TabBar-content{flex-direction:row;}.p-TabBar[data-orientation='vertical']>.p-TabBar-content,.lm-TabBar[data-orientation='vertical']>.lm-TabBar-content{flex-direction:column;}.p-TabBar-tab,.lm-TabBar-tab{display:flex;flex-direction:row;box-sizing:border-box;overflow:hidden;touch-action:none;}.p-TabBar-tabIcon,.p-TabBar-tabCloseIcon,.lm-TabBar-tabIcon,.lm-TabBar-tabCloseIcon{flex:0 0 auto;}.p-TabBar-tabLabel,.lm-TabBar-tabLabel{flex:1 1 auto;overflow:hidden;white-space:nowrap;}.lm-TabBar-tabInput{user-select:all;width:100%;box-sizing:border-box;}.p-TabBar-tab.p-mod-hidden,.lm-TabBar-tab.lm-mod-hidden{display:none!important;}.lm-TabBar-addButton.lm-mod-hidden{display:none!important;}.p-TabBar.p-mod-dragging .p-TabBar-tab,.lm-TabBar.lm-mod-dragging .lm-TabBar-tab{position:relative;}.p-TabBar.p-mod-dragging[data-orientation='horizontal'] .p-TabBar-tab,.lm-TabBar.lm-mod-dragging[data-orientation='horizontal'] .lm-TabBar-tab{left:0;transition:left 150ms ease;}.p-TabBar.p-mod-dragging[data-orientation='vertical'] .p-TabBar-tab,.lm-TabBar.lm-mod-dragging[data-orientation='vertical'] .lm-TabBar-tab{top:0;transition:top 150ms ease;}.p-TabBar.p-mod-dragging .p-TabBar-tab.p-mod-dragging,.lm-TabBar.lm-mod-dragging .lm-TabBar-tab.lm-mod-dragging{transition:none;}.lm-TabBar-tabLabel .lm-TabBar-tabInput{user-select:all;width:100%;box-sizing:border-box;background:inherit;}.p-TabPanel-tabBar,.lm-TabPanel-tabBar{z-index:1;}.p-TabPanel-stackedPanel,.lm-TabPanel-stackedPanel{z-index:0;}:host .p-TabBar-tabLabel{background-color:transparent;border:none;color:var(--icon--color,#666);cursor:pointer;padding:0px 6px;margin:0;margin-left:10.5px;margin-right:auto;flex:0 1 auto;border-radius:3px;}:host .p-TabBar-tabLabel:hover{background-color:var(--icon--color);color:var(--plugin--background);}:host .p-TabBar-tabLabel:focus{outline:none;color:var(--workspace-secondary--color,#666)!important;cursor:text;}:host .p-TabBar-tab.p-mod-closable>.p-TabBar-tabCloseIcon:before{content:var(--close-button--content,"\\2715");}:host .p-TabBar-tab>.p-TabBar-tabConfigIcon:before{content:var(--open-settings-button--content,"\\1F527");font-family:var(--settings--font-family,"Arial");transition:color 0.5s ease;}:host .p-TabBar-tab.p-mod-current.settings_open>.p-TabBar-tabConfigIcon:before{content:var(--close-settings-button--content,"\\1F527");}:host .p-TabBar-tab.p-mod-current.linked>.p-TabBar-tabConfigIcon:before{color:#22a0ce;}:host .p-TabBar-tab>.p-TabBar-tabConfigIcon{opacity:0;pointer-events:none;}:host .p-TabBar-tab.p-mod-current>.p-TabBar-tabConfigIcon{opacity:1;pointer-events:all;}:host .p-mod-current .p-TabBar-tabConfigIcon,:host .p-mod-current .p-TabBar-tabCloseIcon{color:inherit;transition:color 0.2s ease-out;}:host .p-mod-current .p-TabBar-tabConfigIcon:hover,:host .p-mod-current .p-TabBar-tabCloseIcon:hover{color:#1a7da1;transition:color 0.2s ease-out;}:host .p-BoxPanel{overflow:scroll!important;}:host .p-TabBar,:host .p-TabBar-tab{position:relative;overflow:visible!important;}:host .p-TabBar-tabLabel:empty::after{content:"untitled";color:#aaa;}:host .p-mod-current .p-TabBar-tabLabel:empty::after{color:#ddd;}:host .p-TabBar-tabLabel:empty::after{content:"untitled";}:host .divider{left:32px;bottom:0;position:absolute;right:32px;height:1px;background-color:var(--workspace-tabbar--border-color);margin-bottom:0px;}:host .p-TabBar-tab .drag-handle{height:12px;width:5px;-webkit-mask-image:var(--column-drag-handle--mask-image);mask-image:var(--column-drag-handle--mask-image);margin:0px 0 0 16.5px;background-repeat:no-repeat;background-color:var(--inactive--color,red);content:"";display:inline-block;-webkit-mask-size:cover;mask-size:cover;}:host .p-TabBar-tab.p-mod-hidden{display:flex!important;opacity:0.5;}:host .p-TabBar-tab.p-mod-current .divider{display:block;}:host .p-TabBar{min-height:40px!important;}:host .pfm-button-base{background:white!important;}:host .pfm-button-base:active{background:#016bc6!important;}:host .p-TabBar-content{padding:0px;border-bottom:0px solid#fff!important;border-left:#eaeaea;border-right:#eaeaea;}:host .p-TabBar-tab.p-mod-current .shadow{margin:-1px;position:absolute;width:calc(100% + 2px);height:200%;pointer-events:none;left:0px;}:host .p-TabBar-tab.p-mod-current.settings_open .shadow{box-shadow:none;}:host .p-TabBar-tab{border-color:#eaeaea;align-items:center;}:host .p-TabBar-content.inactive-blur>.p-TabBar-tab{background-color:var(--workspace-inactive-blur--background-color,transparent);}:host .condensed .p-TabBar-content>.p-TabBar-tab.p-mod-current .p-TabBar-tabConfigIcon{display:block;}:host .condensed .p-TabBar-content>.p-TabBar-tab.p-mod-current.settings_open .p-TabBar-tabLabel{margin-left:0px;}:host .p-TabBar-content>.p-TabBar-tab.p-mod-current.settings_open{border-width:1px 1px 0px 1px!important;border-color:var(--workspace-tabbar--border-color,#ddd);}:host .p-TabBar-content>.p-TabBar-tab.p-mod-current.settings_open .p-TabBar-tabToolbar{display:flex;}:host .p-TabBar-content>.p-TabBar-tab.p-mod-current.settings_open .divider{height:1px;margin-bottom:0px;background-color:var(--workspace-tabbar--border-color,#ddd);}:host .p-TabBar-content>.p-TabBar-tab.p-mod-current.settings_open:last-child:first-child .divider{transition:none;}:host .p-TabBar-content>.p-TabBar-tab.p-mod-current.perspective_updating .p-TabBar-tabConfigIcon{display:none;}:host .p-TabBar-content>.p-TabBar-tab.p-mod-current.perspective_updating .p-TabBar-tabLoadingIcon{display:block;}:host .p-TabBar-content>.p-TabBar-tab{max-width:100000px!important;flex:0 1 100000px!important;background:none;color:#737373;height:40px!important;max-height:40px!important;transform:none!important;transition:color 0.2s ease-out;color:#ccc;color:#ccc;}:host .p-TabBar-content>.p-TabBar-tab:hover{color:#ccc;}:host .p-TabBar-content>.p-TabBar-tab.p-mod-current{color:var(--workspace-secondary--color,#666);}:host .p-TabBar-tab.p-mod-current .p-TabBar-tabLabel{white-space:nowrap!important;}:host .p-TabBar-tabLabel{font-family:inherit;font-size:12px;line-height:22px;text-align:start;white-space:normal!important;word-break:break-all;}:host .p-TabBar-tabCloseIcon,:host .p-TabBar-tabConfigIcon{cursor:pointer!important;line-height:22px!important;padding-right:16.5px!important;}:host .p-TabBar-tabConfigIcon{padding-left:8px;padding-right:8px!important;}:host .p-TabBar-tabLoadingIcon{padding-left:11px;padding-right:12px;}:host .bottom .p-TabBar-tab{flex-basis:10000px!important;max-width:10000px!important;}:host .p-TabBar-content>.p-TabBar-tab.p-mod-current{color:var(--workspace-tabbar--color,#666)!important;border:var(--workspace-tabbar--border,1px solid#ddd);border-width:var(--workspace-tabbar-tab--border-width);box-shadow:0 13px 0 -12px var(--inactive--border-color);border-radius:6px 6px 0 0;background-color:var(--workspace-tabbar--background-color,white);height:40px!important;max-height:40px!important;}:host .bottom .p-TabBar-tab.p-mod-current{border:none;}:host ::-webkit-scrollbar-thumb{background-color:#ccc;}:host .perspective-workspace.context-menu * .p-TabBar.context-focus{opacity:1;}:host .perspective-workspace.context-menu * .p-TabBar,:host .perspective-workspace.context-menu .p-Widget.workspace-widget:not(.context-focus) .viewer-container{opacity:0.2;}:host .bookmarks-button{margin-left:11px;margin-right:-13px;border-radius:3px;height:22px;}:host .bookmarks-button:hover{background-color:var(--icon--color);}:host .bookmarks{cursor:pointer;background-repeat:no-repeat;background-color:var(--icon--color);content:"";display:inline-block;-webkit-mask-size:cover;mask-size:cover;width:26px;height:12px;-webkit-mask-image:var(--bookmarks--mask-image);mask-image:var(--bookmarks--mask-image);-webkit-mask-position:center;mask-position:center;-webkit-mask-size:auto;mask-size:auto;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;padding:5px;}:host .bookmarks:hover{background-color:var(--plugin--background);}:host .p-DockPanel{overflow:var(--dock-panel--overflow,hidden);position:absolute;background-color:var(--detail--background-color,transparent);padding:3px;top:0;left:0;right:0;bottom:0;}:host .p-DockPanel[data-mode="single-document"]{padding:0px;}:host .lm-Widget,:host .p-Widget{cursor:inherit;}:host .p-DockPanel.ew,:host .p-DockPanel.ew .p-Widget,:host .p-SplitPanel.ew,:host .p-SplitPanel.ew .p-Widget{cursor:ew-resize!important;}:host .p-DockPanel.ns,:host .p-DockPanel.ns .p-Widget,:host .p-SplitPanel.ns,:host .p-SplitPanel.ns .p-Widget{cursor:ns-resize!important;}:host .workspace-master-widget{min-width:100px!important;}:host .p-DockPanel.resizing ::slotted(perspective-viewer),:host .p-SplitPanel.resizing ::slotted(perspective-viewer){pointer-events:none;}:host .widget-blur ::slotted(perspective-viewer){opacity:0.5;}:host .p-DockPanel-handle.resizing{background-color:rgba(0,0,0,0.05);}:host .perspective-scroll-panel{overflow:auto!important;}:host .p-Panel{min-height:100%;}:host .p-DockPanel-handle{background-color:none;}:host .p-SplitPanel-handle,:host .p-DockPanel-handle{transition:background-color 0.3s ease-out;}:host .p-SplitPanel-handle:hover,:host .p-DockPanel-handle:hover{background-color:rgba(0,0,0,0.05);}:host .p-DockPanel-overlay{background:rgba(75,75,75,0.2);border:1px dashed#666;border-radius:6px;transition-property:top,left,right,bottom;transition-duration:50ms;transition-timing-function:linear;margin:0px;}:host .lm-DockPanel:not([data-mode="single-document"]) .viewer-container{border:var(--workspace-tabbar--border,1px solid var(--inactive--color));border-width:var(--workspace-tabbar--border-width);border-radius:var(--workspace-tabbar--border-radius,0 0 6px 6px);}:host .viewer-container{flex:1;height:100%;overflow:hidden;}:host .perspective-scroll-panel.has-master-panel{margin-left:-8px!important;}:host .perspective-scroll-panel .workspace-widget{min-width:300px;min-height:200px;}:host .workspace-widget{display:flex;flex-direction:column;border:1px solid#eaedef;border-width:0px!important;}:host{background-color:hsl(210deg 18% 90%);width:100%;height:100%;}:host .workspace{width:100%;height:100%;}:host .p-SplitPanel{height:100%;width:100%;}:host div.p-SplitPanel-handle{background-color:inherit;}:host .master-panel{background-color:var(--workspace-master--background-color,inherit);padding:0px 0px 0px 0px;}:host .master-panel .viewer-container{border-width:0px;}:host .perspective-workspace.context-menu * .p-SplitPanel-handle{opacity:0.2;}:host .perspective-workspace.context-menu>.p-SplitPanel-handle{opacity:0.2;}`;var Qn=`<!--

Copyright (c) 2017, the Perspective Authors.

This file is part of the Perspective library, distributed under the terms of
the Apache License 2.0.  The full license can be found in the LICENSE file.

-->
<template id="perspective-workspace">
    <div id="container" class="workspace"></div>
</template>
`;var Qt;(S=>{function n(v,M,d=0,u=-1){let b=v.length;if(b===0)return-1;d<0?d=Math.max(0,d+b):d=Math.min(d,b-1),u<0?u=Math.max(0,u+b):u=Math.min(u,b-1);let k;u<d?k=u+1+(b-d):k=u-d+1;for(let g=0;g<k;++g){let L=(d+g)%b;if(v[L]===M)return L}return-1}S.firstIndexOf=n;function t(v,M,d=-1,u=0){let b=v.length;if(b===0)return-1;d<0?d=Math.max(0,d+b):d=Math.min(d,b-1),u<0?u=Math.max(0,u+b):u=Math.min(u,b-1);let k;d<u?k=d+1+(b-u):k=d-u+1;for(let g=0;g<k;++g){let L=(d-g+b)%b;if(v[L]===M)return L}return-1}S.lastIndexOf=t;function e(v,M,d=0,u=-1){let b=v.length;if(b===0)return-1;d<0?d=Math.max(0,d+b):d=Math.min(d,b-1),u<0?u=Math.max(0,u+b):u=Math.min(u,b-1);let k;u<d?k=u+1+(b-d):k=u-d+1;for(let g=0;g<k;++g){let L=(d+g)%b;if(M(v[L],L))return L}return-1}S.findFirstIndex=e;function i(v,M,d=-1,u=0){let b=v.length;if(b===0)return-1;d<0?d=Math.max(0,d+b):d=Math.min(d,b-1),u<0?u=Math.max(0,u+b):u=Math.min(u,b-1);let k;d<u?k=d+1+(b-u):k=d-u+1;for(let g=0;g<k;++g){let L=(d-g+b)%b;if(M(v[L],L))return L}return-1}S.findLastIndex=i;function r(v,M,d=0,u=-1){let b=e(v,M,d,u);return b!==-1?v[b]:void 0}S.findFirstValue=r;function o(v,M,d=-1,u=0){let b=i(v,M,d,u);return b!==-1?v[b]:void 0}S.findLastValue=o;function s(v,M,d,u=0,b=-1){let k=v.length;if(k===0)return 0;u<0?u=Math.max(0,u+k):u=Math.min(u,k-1),b<0?b=Math.max(0,b+k):b=Math.min(b,k-1);let g=u,L=b-u+1;for(;L>0;){let B=L>>1,O=g+B;d(v[O],M)<0?(g=O+1,L-=B+1):L=B}return g}S.lowerBound=s;function a(v,M,d,u=0,b=-1){let k=v.length;if(k===0)return 0;u<0?u=Math.max(0,u+k):u=Math.min(u,k-1),b<0?b=Math.max(0,b+k):b=Math.min(b,k-1);let g=u,L=b-u+1;for(;L>0;){let B=L>>1,O=g+B;d(v[O],M)>0?L=B:(g=O+1,L-=B+1)}return g}S.upperBound=a;function l(v,M,d){if(v===M)return!0;if(v.length!==M.length)return!1;for(let u=0,b=v.length;u<b;++u)if(d?!d(v[u],M[u]):v[u]!==M[u])return!1;return!0}S.shallowEqual=l;function h(v,M={}){let{start:d,stop:u,step:b}=M;if(b===void 0&&(b=1),b===0)throw new Error("Slice `step` cannot be zero.");let k=v.length;d===void 0?d=b<0?k-1:0:d<0?d=Math.max(d+k,b<0?-1:0):d>=k&&(d=b<0?k-1:k),u===void 0?u=b<0?-1:k:u<0?u=Math.max(u+k,b<0?-1:0):u>=k&&(u=b<0?k-1:k);let g;b<0&&u>=d||b>0&&d>=u?g=0:b<0?g=Math.floor((u-d+1)/b+1):g=Math.floor((u-d-1)/b+1);let L=[];for(let B=0;B<g;++B)L[B]=v[d+B*b];return L}S.slice=h;function y(v,M,d){let u=v.length;if(u<=1||(M<0?M=Math.max(0,M+u):M=Math.min(M,u-1),d<0?d=Math.max(0,d+u):d=Math.min(d,u-1),M===d))return;let b=v[M],k=M<d?1:-1;for(let g=M;g!==d;g+=k)v[g]=v[g+k];v[d]=b}S.move=y;function I(v,M=0,d=-1){let u=v.length;if(!(u<=1))for(M<0?M=Math.max(0,M+u):M=Math.min(M,u-1),d<0?d=Math.max(0,d+u):d=Math.min(d,u-1);M<d;){let b=v[M],k=v[d];v[M++]=k,v[d--]=b}}S.reverse=I;function _(v,M,d=0,u=-1){let b=v.length;if(b<=1||(d<0?d=Math.max(0,d+b):d=Math.min(d,b-1),u<0?u=Math.max(0,u+b):u=Math.min(u,b-1),d>=u))return;let k=u-d+1;if(M>0?M=M%k:M<0&&(M=(M%k+k)%k),M===0)return;let g=d+M;I(v,d,g-1),I(v,g,u),I(v,d,u)}S.rotate=_;function m(v,M,d=0,u=-1){let b=v.length;if(b===0)return;d<0?d=Math.max(0,d+b):d=Math.min(d,b-1),u<0?u=Math.max(0,u+b):u=Math.min(u,b-1);let k;u<d?k=u+1+(b-d):k=u-d+1;for(let g=0;g<k;++g)v[(d+g)%b]=M}S.fill=m;function c(v,M,d){let u=v.length;M<0?M=Math.max(0,M+u):M=Math.min(M,u);for(let b=u;b>M;--b)v[b]=v[b-1];v[M]=d}S.insert=c;function p(v,M){let d=v.length;if(M<0&&(M+=d),M<0||M>=d)return;let u=v[M];for(let b=M+1;b<d;++b)v[b-1]=v[b];return v.length=d-1,u}S.removeAt=p;function f(v,M,d=0,u=-1){let b=n(v,M,d,u);return b!==-1&&p(v,b),b}S.removeFirstOf=f;function w(v,M,d=-1,u=0){let b=t(v,M,d,u);return b!==-1&&p(v,b),b}S.removeLastOf=w;function x(v,M,d=0,u=-1){let b=v.length;if(b===0)return 0;d<0?d=Math.max(0,d+b):d=Math.min(d,b-1),u<0?u=Math.max(0,u+b):u=Math.min(u,b-1);let k=0;for(let g=0;g<b;++g)d<=u&&g>=d&&g<=u&&v[g]===M||u<d&&(g<=u||g>=d)&&v[g]===M?k++:k>0&&(v[g-k]=v[g]);return k>0&&(v.length=b-k),k}S.removeAllOf=x;function T(v,M,d=0,u=-1){let b,k=e(v,M,d,u);return k!==-1&&(b=p(v,k)),{index:k,value:b}}S.removeFirstWhere=T;function A(v,M,d=-1,u=0){let b,k=i(v,M,d,u);return k!==-1&&(b=p(v,k)),{index:k,value:b}}S.removeLastWhere=A;function E(v,M,d=0,u=-1){let b=v.length;if(b===0)return 0;d<0?d=Math.max(0,d+b):d=Math.min(d,b-1),u<0?u=Math.max(0,u+b):u=Math.min(u,b-1);let k=0;for(let g=0;g<b;++g)d<=u&&g>=d&&g<=u&&M(v[g],g)||u<d&&(g<=u||g>=d)&&M(v[g],g)?k++:k>0&&(v[g-k]=v[g]);return k>0&&(v.length=b-k),k}S.removeAllWhere=E})(Qt||={});function fe(n){let t;return typeof n.iter=="function"?t=n.iter():t=new mt(n),t}function pt(n){let t=0,e=[],i=fe(n),r;for(;(r=i.next())!==void 0;)e[t++]=r;return e}var mt=class{constructor(t){this._index=0;this._source=t}iter(){return this}clone(){let t=new mt(this._source);return t._index=this._index,t}next(){if(!(this._index>=this._source.length))return this._source[this._index++]}};function ei(n,t){let e=0,i=fe(n),r;for(;(r=i.next())!==void 0;)if(t(r,e++))return r}var gl;(t=>{function n(e,i,r){return r===0?1/0:e>i&&r>0||e<i&&r<0?0:Math.ceil((i-e)/r)}t.rangeLength=n})(gl||={});var bl;(o=>{function n(s,a,l=0){let h=new Array(a.length);for(let y=0,I=l,_=a.length;y<_;++y,++I){if(I=s.indexOf(a[y],I),I===-1)return null;h[y]=I}return h}o.findIndices=n;function t(s,a,l=0){let h=n(s,a,l);if(!h)return null;let y=0;for(let I=0,_=h.length;I<_;++I){let m=h[I]-l;y+=m*m}return{score:y,indices:h}}o.matchSumOfSquares=t;function e(s,a,l=0){let h=n(s,a,l);if(!h)return null;let y=0,I=l-1;for(let _=0,m=h.length;_<m;++_){let c=h[_];y+=c-I-1,I=c}return{score:y,indices:h}}o.matchSumOfDeltas=e;function i(s,a,l){let h=[],y=0,I=0,_=a.length;for(;y<_;){let m=a[y],c=a[y];for(;++y<_&&a[y]===c+1;)c++;I<m&&h.push(s.slice(I,m)),m<c+1&&h.push(l(s.slice(m,c+1))),I=c+1}return I<s.length&&h.push(s.slice(I)),h}o.highlight=i;function r(s,a){return s<a?-1:s>a?1:0}o.cmp=r})(bl||={});var R;(function(n){function t(v,M,d,u){d===void 0&&(d=0),u===void 0&&(u=-1);var b=v.length;if(b===0)return-1;d<0?d=Math.max(0,d+b):d=Math.min(d,b-1),u<0?u=Math.max(0,u+b):u=Math.min(u,b-1);var k;u<d?k=u+1+(b-d):k=u-d+1;for(var g=0;g<k;++g){var L=(d+g)%b;if(v[L]===M)return L}return-1}n.firstIndexOf=t;function e(v,M,d,u){d===void 0&&(d=-1),u===void 0&&(u=0);var b=v.length;if(b===0)return-1;d<0?d=Math.max(0,d+b):d=Math.min(d,b-1),u<0?u=Math.max(0,u+b):u=Math.min(u,b-1);var k;d<u?k=d+1+(b-u):k=d-u+1;for(var g=0;g<k;++g){var L=(d-g+b)%b;if(v[L]===M)return L}return-1}n.lastIndexOf=e;function i(v,M,d,u){d===void 0&&(d=0),u===void 0&&(u=-1);var b=v.length;if(b===0)return-1;d<0?d=Math.max(0,d+b):d=Math.min(d,b-1),u<0?u=Math.max(0,u+b):u=Math.min(u,b-1);var k;u<d?k=u+1+(b-d):k=u-d+1;for(var g=0;g<k;++g){var L=(d+g)%b;if(M(v[L],L))return L}return-1}n.findFirstIndex=i;function r(v,M,d,u){d===void 0&&(d=-1),u===void 0&&(u=0);var b=v.length;if(b===0)return-1;d<0?d=Math.max(0,d+b):d=Math.min(d,b-1),u<0?u=Math.max(0,u+b):u=Math.min(u,b-1);var k;d<u?k=d+1+(b-u):k=d-u+1;for(var g=0;g<k;++g){var L=(d-g+b)%b;if(M(v[L],L))return L}return-1}n.findLastIndex=r;function o(v,M,d,u){d===void 0&&(d=0),u===void 0&&(u=-1);var b=i(v,M,d,u);return b!==-1?v[b]:void 0}n.findFirstValue=o;function s(v,M,d,u){d===void 0&&(d=-1),u===void 0&&(u=0);var b=r(v,M,d,u);return b!==-1?v[b]:void 0}n.findLastValue=s;function a(v,M,d,u,b){u===void 0&&(u=0),b===void 0&&(b=-1);var k=v.length;if(k===0)return 0;u<0?u=Math.max(0,u+k):u=Math.min(u,k-1),b<0?b=Math.max(0,b+k):b=Math.min(b,k-1);for(var g=u,L=b-u+1;L>0;){var B=L>>1,O=g+B;d(v[O],M)<0?(g=O+1,L-=B+1):L=B}return g}n.lowerBound=a;function l(v,M,d,u,b){u===void 0&&(u=0),b===void 0&&(b=-1);var k=v.length;if(k===0)return 0;u<0?u=Math.max(0,u+k):u=Math.min(u,k-1),b<0?b=Math.max(0,b+k):b=Math.min(b,k-1);for(var g=u,L=b-u+1;L>0;){var B=L>>1,O=g+B;d(v[O],M)>0?L=B:(g=O+1,L-=B+1)}return g}n.upperBound=l;function h(v,M,d){if(v===M)return!0;if(v.length!==M.length)return!1;for(var u=0,b=v.length;u<b;++u)if(d?!d(v[u],M[u]):v[u]!==M[u])return!1;return!0}n.shallowEqual=h;function y(v,M){M===void 0&&(M={});var d=M.start,u=M.stop,b=M.step;if(b===void 0&&(b=1),b===0)throw new Error("Slice `step` cannot be zero.");var k=v.length;d===void 0?d=b<0?k-1:0:d<0?d=Math.max(d+k,b<0?-1:0):d>=k&&(d=b<0?k-1:k),u===void 0?u=b<0?-1:k:u<0?u=Math.max(u+k,b<0?-1:0):u>=k&&(u=b<0?k-1:k);var g;b<0&&u>=d||b>0&&d>=u?g=0:b<0?g=Math.floor((u-d+1)/b+1):g=Math.floor((u-d-1)/b+1);for(var L=[],B=0;B<g;++B)L[B]=v[d+B*b];return L}n.slice=y;function I(v,M,d){var u=v.length;if(!(u<=1)&&(M<0?M=Math.max(0,M+u):M=Math.min(M,u-1),d<0?d=Math.max(0,d+u):d=Math.min(d,u-1),M!==d)){for(var b=v[M],k=M<d?1:-1,g=M;g!==d;g+=k)v[g]=v[g+k];v[d]=b}}n.move=I;function _(v,M,d){M===void 0&&(M=0),d===void 0&&(d=-1);var u=v.length;if(!(u<=1))for(M<0?M=Math.max(0,M+u):M=Math.min(M,u-1),d<0?d=Math.max(0,d+u):d=Math.min(d,u-1);M<d;){var b=v[M],k=v[d];v[M++]=k,v[d--]=b}}n.reverse=_;function m(v,M,d,u){d===void 0&&(d=0),u===void 0&&(u=-1);var b=v.length;if(!(b<=1)&&(d<0?d=Math.max(0,d+b):d=Math.min(d,b-1),u<0?u=Math.max(0,u+b):u=Math.min(u,b-1),!(d>=u))){var k=u-d+1;if(M>0?M=M%k:M<0&&(M=(M%k+k)%k),M!==0){var g=d+M;_(v,d,g-1),_(v,g,u),_(v,d,u)}}}n.rotate=m;function c(v,M,d,u){d===void 0&&(d=0),u===void 0&&(u=-1);var b=v.length;if(b!==0){d<0?d=Math.max(0,d+b):d=Math.min(d,b-1),u<0?u=Math.max(0,u+b):u=Math.min(u,b-1);var k;u<d?k=u+1+(b-d):k=u-d+1;for(var g=0;g<k;++g)v[(d+g)%b]=M}}n.fill=c;function p(v,M,d){var u=v.length;M<0?M=Math.max(0,M+u):M=Math.min(M,u);for(var b=u;b>M;--b)v[b]=v[b-1];v[M]=d}n.insert=p;function f(v,M){var d=v.length;if(M<0&&(M+=d),!(M<0||M>=d)){for(var u=v[M],b=M+1;b<d;++b)v[b-1]=v[b];return v.length=d-1,u}}n.removeAt=f;function w(v,M,d,u){d===void 0&&(d=0),u===void 0&&(u=-1);var b=t(v,M,d,u);return b!==-1&&f(v,b),b}n.removeFirstOf=w;function x(v,M,d,u){d===void 0&&(d=-1),u===void 0&&(u=0);var b=e(v,M,d,u);return b!==-1&&f(v,b),b}n.removeLastOf=x;function T(v,M,d,u){d===void 0&&(d=0),u===void 0&&(u=-1);var b=v.length;if(b===0)return 0;d<0?d=Math.max(0,d+b):d=Math.min(d,b-1),u<0?u=Math.max(0,u+b):u=Math.min(u,b-1);for(var k=0,g=0;g<b;++g)d<=u&&g>=d&&g<=u&&v[g]===M||u<d&&(g<=u||g>=d)&&v[g]===M?k++:k>0&&(v[g-k]=v[g]);return k>0&&(v.length=b-k),k}n.removeAllOf=T;function A(v,M,d,u){d===void 0&&(d=0),u===void 0&&(u=-1);var b,k=i(v,M,d,u);return k!==-1&&(b=f(v,k)),{index:k,value:b}}n.removeFirstWhere=A;function E(v,M,d,u){d===void 0&&(d=-1),u===void 0&&(u=0);var b,k=r(v,M,d,u);return k!==-1&&(b=f(v,k)),{index:k,value:b}}n.removeLastWhere=E;function S(v,M,d,u){d===void 0&&(d=0),u===void 0&&(u=-1);var b=v.length;if(b===0)return 0;d<0?d=Math.max(0,d+b):d=Math.min(d,b-1),u<0?u=Math.max(0,u+b):u=Math.min(u,b-1);for(var k=0,g=0;g<b;++g)d<=u&&g>=d&&g<=u&&M(v[g],g)||u<d&&(g<=u||g>=d)&&M(v[g],g)?k++:k>0&&(v[g-k]=v[g]);return k>0&&(v.length=b-k),k}n.removeAllWhere=S})(R||(R={}));function ge(n){var t;return typeof n.iter=="function"?t=n.iter():t=new vl(n),t}function F(n,t){for(var e=0,i=ge(n),r;(r=i.next())!==void 0;)if(t(r,e++)===!1)return}function zt(n,t){for(var e=0,i=ge(n),r;(r=i.next())!==void 0;)if(!t(r,e++))return!1;return!0}function Rt(n,t){for(var e=0,i=ge(n),r;(r=i.next())!==void 0;)if(t(r,e++))return!0;return!1}function ni(n){for(var t=0,e=[],i=ge(n),r;(r=i.next())!==void 0;)e[t++]=r;return e}var vl=function(){function n(t){this._index=0,this._source=t}return n.prototype.iter=function(){return this},n.prototype.clone=function(){var t=new n(this._source);return t._index=this._index,t},n.prototype.next=function(){if(!(this._index>=this._source.length))return this._source[this._index++]},n}(),Hv=function(){function n(t,e){e===void 0&&(e=Object.keys(t)),this._index=0,this._source=t,this._keys=e}return n.prototype.iter=function(){return this},n.prototype.clone=function(){var t=new n(this._source,this._keys);return t._index=this._index,t},n.prototype.next=function(){if(!(this._index>=this._keys.length)){var t=this._keys[this._index++];return t in this._source?t:this.next()}},n}(),Fv=function(){function n(t,e){e===void 0&&(e=Object.keys(t)),this._index=0,this._source=t,this._keys=e}return n.prototype.iter=function(){return this},n.prototype.clone=function(){var t=new n(this._source,this._keys);return t._index=this._index,t},n.prototype.next=function(){if(!(this._index>=this._keys.length)){var t=this._keys[this._index++];return t in this._source?this._source[t]:this.next()}},n}(),Wv=function(){function n(t,e){e===void 0&&(e=Object.keys(t)),this._index=0,this._source=t,this._keys=e}return n.prototype.iter=function(){return this},n.prototype.clone=function(){var t=new n(this._source,this._keys);return t._index=this._index,t},n.prototype.next=function(){if(!(this._index>=this._keys.length)){var t=this._keys[this._index++];return t in this._source?[t,this._source[t]]:this.next()}},n}(),qv=function(){function n(t){this._fn=t}return n.prototype.iter=function(){return this},n.prototype.clone=function(){throw new Error("An `FnIterator` cannot be cloned.")},n.prototype.next=function(){return this._fn.call(void 0)},n}();function tn(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return new Fe(ge(n.map(ge)))}var Fe=function(){function n(t){this._cloned=!1,this._source=t,this._active=void 0}return n.prototype.iter=function(){return this},n.prototype.clone=function(){var t=new n(this._source.clone());return t._active=this._active&&this._active.clone(),t._cloned=!0,this._cloned=!0,t},n.prototype.next=function(){if(this._active===void 0){var t=this._source.next();if(t===void 0)return;this._active=this._cloned?t.clone():t}var e=this._active.next();return e!==void 0?e:(this._active=void 0,this.next())},n}();function ce(){return new yl}var yl=function(){function n(){}return n.prototype.iter=function(){return this},n.prototype.clone=function(){return new n},n.prototype.next=function(){},n}();var Nv=function(){function n(t,e){this._source=t,this._index=e}return n.prototype.iter=function(){return this},n.prototype.clone=function(){return new n(this._source.clone(),this._index)},n.prototype.next=function(){var t=this._source.next();if(t!==void 0)return[this._index++,t]},n}();var Kv=function(){function n(t,e){this._index=0,this._source=t,this._fn=e}return n.prototype.iter=function(){return this},n.prototype.clone=function(){var t=new n(this._source.clone(),this._fn);return t._index=this._index,t},n.prototype.next=function(){for(var t=this._fn,e=this._source,i;(i=e.next())!==void 0;)if(t(i,this._index++))return i},n}();function ft(n,t){for(var e=0,i=ge(n),r;(r=i.next())!==void 0;)if(t(r,e++))return r}function We(n,t){return new _l(ge(n),t)}var _l=function(){function n(t,e){this._index=0,this._source=t,this._fn=e}return n.prototype.iter=function(){return this},n.prototype.clone=function(){var t=new n(this._source.clone(),this._fn);return t._index=this._index,t},n.prototype.next=function(){var t=this._source.next();if(t!==void 0)return this._fn.call(void 0,t,this._index++)},n}();var jv=function(){function n(t,e,i){this._index=0,this._start=t,this._stop=e,this._step=i,this._length=en.rangeLength(t,e,i)}return n.prototype.iter=function(){return this},n.prototype.clone=function(){var t=new n(this._start,this._stop,this._step);return t._index=this._index,t},n.prototype.next=function(){if(!(this._index>=this._length))return this._start+this._step*this._index++},n}(),en;(function(n){function t(e,i,r){return r===0?1/0:e>i&&r>0||e<i&&r<0?0:Math.ceil((i-e)/r)}n.rangeLength=t})(en||(en={}));function nn(n,t,e){var i=0,r=ge(n),o=r.next();if(o===void 0&&e===void 0)throw new TypeError("Reduce of empty iterable with no initial value.");if(o===void 0)return e;var s=r.next();if(s===void 0&&e===void 0)return o;if(s===void 0)return t(e,o,i++);var a;e===void 0?a=t(o,s,i++):a=t(t(e,o,i++),s,i++);for(var l;(l=r.next())!==void 0;)a=t(a,l,i++);return a}function Ot(n){return new xl(n,1)}var xl=function(){function n(t,e){this._value=t,this._count=e}return n.prototype.iter=function(){return this},n.prototype.clone=function(){return new n(this._value,this._count)},n.prototype.next=function(){if(!(this._count<=0))return this._count--,this._value},n}();function Pt(n){var t;return typeof n.retro=="function"?t=n.retro():t=new Il(n),t}var Il=function(){function n(t){this._source=t,this._index=t.length-1}return n.prototype.iter=function(){return this},n.prototype.clone=function(){var t=new n(this._source);return t._index=this._index,t},n.prototype.next=function(){if(!(this._index<0||this._index>=this._source.length))return this._source[this._index--]},n}();var Vv=function(){function n(t,e){this._source=t,this._step=e}return n.prototype.iter=function(){return this},n.prototype.clone=function(){return new n(this._source.clone(),this._step)},n.prototype.next=function(){for(var t=this._source.next(),e=this._step-1;e>0;--e)this._source.next();return t},n}(),ti;(function(n){function t(s,a,l){l===void 0&&(l=0);for(var h=new Array(a.length),y=0,I=l,_=a.length;y<_;++y,++I){if(I=s.indexOf(a[y],I),I===-1)return null;h[y]=I}return h}n.findIndices=t;function e(s,a,l){l===void 0&&(l=0);var h=t(s,a,l);if(!h)return null;for(var y=0,I=0,_=h.length;I<_;++I){var m=h[I]-l;y+=m*m}return{score:y,indices:h}}n.matchSumOfSquares=e;function i(s,a,l){l===void 0&&(l=0);var h=t(s,a,l);if(!h)return null;for(var y=0,I=l-1,_=0,m=h.length;_<m;++_){var c=h[_];y+=c-I-1,I=c}return{score:y,indices:h}}n.matchSumOfDeltas=i;function r(s,a,l){for(var h=[],y=0,I=0,_=a.length;y<_;){for(var m=a[y],c=a[y];++y<_&&a[y]===c+1;)c++;I<m&&h.push(s.slice(I,m)),m<c+1&&h.push(l(s.slice(m,c+1))),I=c+1}return I<s.length&&h.push(s.slice(I)),h}n.highlight=r;function o(s,a){return s<a?-1:s>a?1:0}n.cmp=o})(ti||(ti={}));var Uv=function(){function n(t,e){this._source=t,this._count=e}return n.prototype.iter=function(){return this},n.prototype.clone=function(){return new n(this._source.clone(),this._count)},n.prototype.next=function(){if(!(this._count<=0)){var t=this._source.next();if(t!==void 0)return this._count--,t}},n}();var Gv=function(){function n(t){this._source=t}return n.prototype.iter=function(){return this},n.prototype.clone=function(){return new n(this._source.map(function(t){return t.clone()}))},n.prototype.next=function(){for(var t=new Array(this._source.length),e=0,i=this._source.length;e<i;++e){var r=this._source[e].next();if(r===void 0)return;t[e]=r}return t},n}();var ii=function(){function n(t){this._root=new G.LeafNode,this.cmp=t}return Object.defineProperty(n.prototype,"isEmpty",{get:function(){return this._root.size===0},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"size",{get:function(){return this._root.size},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"first",{get:function(){var t=G.firstLeaf(this._root);return t.size>0?t.items[0]:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"last",{get:function(){var t=G.lastLeaf(this._root);return t.size>0?t.items[t.size-1]:void 0},enumerable:!0,configurable:!0}),n.prototype.iter=function(){return G.iterItems(this._root)},n.prototype.retro=function(){return G.retroItems(this._root)},n.prototype.slice=function(t,e){return G.sliceItems(this._root,t,e)},n.prototype.retroSlice=function(t,e){return G.retroSliceItems(this._root,t,e)},n.prototype.at=function(t){return G.itemAt(this._root,t)},n.prototype.has=function(t,e){return G.hasItem(this._root,t,e)},n.prototype.indexOf=function(t,e){return G.indexOf(this._root,t,e)},n.prototype.get=function(t,e){return G.getItem(this._root,t,e)},n.prototype.assign=function(t){this.clear(),this.update(t)},n.prototype.insert=function(t){var e=G.insertItem(this._root,t,this.cmp);return this._root=G.maybeSplitRoot(this._root),e},n.prototype.update=function(t){var e=this;F(t,function(i){e.insert(i)})},n.prototype.delete=function(t,e){var i=G.deleteItem(this._root,t,e);return this._root=G.maybeExtractRoot(this._root),i},n.prototype.remove=function(t){var e=G.removeItem(this._root,t);return this._root=G.maybeExtractRoot(this._root),e},n.prototype.clear=function(){G.clear(this._root),this._root=new G.LeafNode},n}();(function(n){function t(e,i){var r=new n(i);return r.assign(e),r}n.from=t})(ii||(ii={}));var G;(function(n){var t=function(){function g(){this.items=[],this.sizes=[],this.children=[]}return Object.defineProperty(g.prototype,"type",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"size",{get:function(){return this.sizes[this.sizes.length-1]},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"width",{get:function(){return this.children.length},enumerable:!0,configurable:!0}),g}();n.BranchNode=t;var e=function(){function g(){this.next=null,this.prev=null,this.items=[]}return Object.defineProperty(g.prototype,"type",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"size",{get:function(){return this.items.length},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"width",{get:function(){return this.items.length},enumerable:!0,configurable:!0}),g}();n.LeafNode=e;function i(g){for(;g.type===0;)g=g.children[0];return g}n.firstLeaf=i;function r(g){for(;g.type===0;)g=g.children[g.children.length-1];return g}n.lastLeaf=r;function o(g){var L=i(g);return new E(L,0,-1)}n.iterItems=o;function s(g){var L=r(g);return new S(L,L.size-1,-1)}n.retroItems=s;function a(g,L,B){L===void 0?L=0:L<0?L=Math.max(0,L+g.size):L=Math.min(L,g.size),B===void 0?B=g.size:B<0?B=Math.max(0,B+g.size):B=Math.min(B,g.size);var O=Math.max(0,B-L);if(O===0)return ce();for(;g.type===0;){var H=v(g.sizes,L);H>0&&(L-=g.sizes[H-1]),g=g.children[H]}return new E(g,L,O)}n.sliceItems=a;function l(g,L,B){L===void 0?L=g.size-1:L<0?L=Math.max(-1,L+g.size):L=Math.min(L,g.size-1),B===void 0?B=-1:B<0?B=Math.max(-1,B+g.size):B=Math.min(B,g.size-1);var O=Math.max(0,L-B);if(O===0)return ce();for(;g.type===0;){var H=v(g.sizes,L);H>0&&(L-=g.sizes[H-1]),g=g.children[H]}return new S(g,L,O)}n.retroSliceItems=l;function h(g,L){if(L<0&&(L+=g.size),!(L<0||L>=g.size)){for(;g.type===0;){var B=v(g.sizes,L);B>0&&(L-=g.sizes[B-1]),g=g.children[B]}return g.items[L]}}n.itemAt=h;function y(g,L,B){for(;g.type===0;){var O=M(g.items,L,B);g=g.children[O]}var H=d(g.items,L,B);return H>=0}n.hasItem=y;function I(g,L,B){for(var O=0;g.type===0;){var H=M(g.items,L,B);H>0&&(O+=g.sizes[H-1]),g=g.children[H]}var K=d(g.items,L,B);return K>=0?O+K:-O+K}n.indexOf=I;function _(g,L,B){for(;g.type===0;){var O=M(g.items,L,B);g=g.children[O]}var H=d(g.items,L,B);return H>=0?g.items[H]:void 0}n.getItem=_;function m(g,L,B){if(g.type===1){var O=d(g.items,L,B),H;return O>=0?(H=g.items[O],g.items[O]=L):(H=void 0,R.insert(g.items,-O-1,L)),H}var K=M(g.items,L,B),X=g.children[K],me=X.size,J=m(X,L,B),Q=X.size;if(g.items[K]=X.items[0],me===Q)return J;if(X.width>T){var ae=b(X);R.insert(g.children,K+1,ae),R.insert(g.items,K+1,ae.items[0])}return u(g,K),J}n.insertItem=m;function c(g,L,B){if(g.type===1){var O=d(g.items,L,B);return O<0?void 0:R.removeAt(g.items,O)}var H=M(g.items,L,B),K=g.children[H],X=K.size,me=c(K,L,B),J=K.size;return X===J||(g.items[H]=K.items[0],K.width<A&&(H=k(g,H)),u(g,H)),me}n.deleteItem=c;function p(g,L){if(L<0&&(L+=g.size),!(L<0||L>=g.size)){if(g.type===1)return R.removeAt(g.items,L);var B=v(g.sizes,L);B>0&&(L-=g.sizes[B]);var O=g.children[B],H=p(O,L);return g.items[B]=O.items[0],O.width<A&&(B=k(g,B)),u(g,B),H}}n.removeItem=p;function f(g){g.type===0?(F(g.children,f),g.children.length=0,g.sizes.length=0,g.items.length=0):(g.items.length=0,g.next=null,g.prev=null)}n.clear=f;function w(g){if(g.width<=T)return g;var L=new t,B=b(g);return L.sizes[0]=g.size,L.sizes[1]=g.size+B.size,L.children[0]=g,L.children[1]=B,L.items[0]=g.items[0],L.items[1]=B.items[0],L}n.maybeSplitRoot=w;function x(g){if(g.type===1||g.children.length>1)return g;var L=g.children.pop();return f(g),L}n.maybeExtractRoot=x;var T=32,A=T>>1,E=function(){function g(L,B,O){this._node=L,this._index=B,this._count=O}return g.prototype.iter=function(){return this},g.prototype.clone=function(){return new g(this._node,this._index,this._count)},g.prototype.next=function(){if(!(this._node===null||this._count===0))return this._index>=this._node.size?(this._node=this._node.next,this._index=0,this.next()):(this._count>0&&this._count--,this._node.items[this._index++])},g}(),S=function(){function g(L,B,O){this._node=L,this._index=B,this._count=O}return g.prototype.iter=function(){return this},g.prototype.clone=function(){return new g(this._node,this._index,this._count)},g.prototype.next=function(){if(!(this._node===null||this._count===0))return this._index>=this._node.size&&(this._index=this._node.size-1),this._index<0?(this._node=this._node.prev,this._index=this._node?this._node.size-1:-1,this.next()):(this._count>0&&this._count--,this._node.items[this._index--])},g}();function v(g,L){for(var B=g.length,O=0;O<B;++O)if(g[O]>L)return O;return B-1}function M(g,L,B){for(var O=g.length,H=1;H<O;++H)if(B(g[H],L)>0)return H-1;return O-1}function d(g,L,B){for(var O=g.length,H=0;H<O;++H){var K=B(g[H],L);if(K===0)return H;if(K>0)return-H-1}return-O-1}function u(g,L){for(var B=g.sizes,O=g.children,H=L>0?B[L-1]:0,K=O.length;L<K;++L)H=B[L]=H+O[L].size;B.length=O.length}function b(g){if(g.type===1){for(var L=new e,B=g.items,O=L.items,H=A,K=B.length;H<K;++H)O.push(B[H]);return B.length=A,g.next&&(g.next.prev=L),L.next=g.next,L.prev=g,g.next=L,L}for(var X=new t,me=g.children,J=X.children,H=A,K=me.length;H<K;++H)J.push(me[H]);me.length=A;for(var Q=g.items,ae=X.items,H=A,K=Q.length;H<K;++H)ae.push(Q[H]);return Q.length=A,u(g,A),u(X,0),X}function k(g,L){var B,O,H,K,X,me,J=g.children[L],Q=L===0?g.children[L+1]:g.children[L-1],ae=L===0,Me=J.type===1,Ee=Q.width>A;if(Me&&Ee&&ae){var q=J,N=Q;return q.items.push(N.items.shift()),g.items[L+1]=N.items[0],L}if(Me&&Ee&&!ae){var q=J,N=Q;return q.items.unshift(N.items.pop()),g.items[L]=q.items[0],L-1}if(Me&&!Ee&&ae){var q=J,N=Q;return(B=N.items).unshift.apply(B,q.items),R.removeAt(g.children,L),R.removeAt(g.items,L+1),q.prev&&(q.prev.next=N),N.prev=q.prev,f(q),L}if(Me&&!Ee&&!ae){var q=J,N=Q;return(O=N.items).push.apply(O,q.items),R.removeAt(g.children,L),R.removeAt(g.items,L),q.next&&(q.next.prev=N),N.next=q.next,f(q),L-1}if(!Me&&Ee&&ae){var q=J,N=Q;return q.children.push(N.children.shift()),q.items.push(N.items.shift()),g.items[L+1]=N.items[0],u(q,q.width-1),u(N,0),L}if(!Me&&Ee&&!ae){var q=J,N=Q;return q.children.unshift(N.children.pop()),q.items.unshift(N.items.pop()),g.items[L]=q.items[0],u(q,0),u(N,N.width-1),L-1}if(!Me&&!Ee&&ae){var q=J,N=Q;return(H=N.children).unshift.apply(H,q.children),(K=N.items).unshift.apply(K,q.items),R.removeAt(g.children,L),R.removeAt(g.items,L+1),u(N,0),q.children.length=0,f(q),L}if(!Me&&!Ee&&!ae){var q=J,N=Q;return(X=N.children).push.apply(X,q.children),(me=N.items).push.apply(me,q.items),R.removeAt(g.children,L),R.removeAt(g.items,L),u(N,0),q.children.length=0,f(q),L-1}throw"unreachable"}})(G||(G={}));var Ye=function(){function n(){this._first=null,this._last=null,this._size=0}return Object.defineProperty(n.prototype,"isEmpty",{get:function(){return this._size===0},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"length",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"first",{get:function(){return this._first?this._first.value:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"last",{get:function(){return this._last?this._last.value:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"firstNode",{get:function(){return this._first},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"lastNode",{get:function(){return this._last},enumerable:!0,configurable:!0}),n.prototype.iter=function(){return new n.ForwardValueIterator(this._first)},n.prototype.retro=function(){return new n.RetroValueIterator(this._last)},n.prototype.nodes=function(){return new n.ForwardNodeIterator(this._first)},n.prototype.retroNodes=function(){return new n.RetroNodeIterator(this._last)},n.prototype.assign=function(t){var e=this;this.clear(),F(t,function(i){e.addLast(i)})},n.prototype.push=function(t){this.addLast(t)},n.prototype.pop=function(){return this.removeLast()},n.prototype.shift=function(t){this.addFirst(t)},n.prototype.unshift=function(){return this.removeFirst()},n.prototype.addFirst=function(t){var e=new ke.LinkedListNode(this,t);return this._first?(e.next=this._first,this._first.prev=e,this._first=e):(this._first=e,this._last=e),this._size++,e},n.prototype.addLast=function(t){var e=new ke.LinkedListNode(this,t);return this._last?(e.prev=this._last,this._last.next=e,this._last=e):(this._first=e,this._last=e),this._size++,e},n.prototype.insertBefore=function(t,e){if(!e||e===this._first)return this.addFirst(t);if(!(e instanceof ke.LinkedListNode)||e.list!==this)throw new Error("Reference node is not owned by the list.");var i=new ke.LinkedListNode(this,t),r=e,o=r.prev;return i.next=r,i.prev=o,r.prev=i,o.next=i,this._size++,i},n.prototype.insertAfter=function(t,e){if(!e||e===this._last)return this.addLast(t);if(!(e instanceof ke.LinkedListNode)||e.list!==this)throw new Error("Reference node is not owned by the list.");var i=new ke.LinkedListNode(this,t),r=e,o=r.next;return i.next=o,i.prev=r,r.next=i,o.prev=i,this._size++,i},n.prototype.removeFirst=function(){var t=this._first;if(!!t)return t===this._last?(this._first=null,this._last=null):(this._first=t.next,this._first.prev=null),t.list=null,t.next=null,t.prev=null,this._size--,t.value},n.prototype.removeLast=function(){var t=this._last;if(!!t)return t===this._first?(this._first=null,this._last=null):(this._last=t.prev,this._last.next=null),t.list=null,t.next=null,t.prev=null,this._size--,t.value},n.prototype.removeNode=function(t){if(!(t instanceof ke.LinkedListNode)||t.list!==this)throw new Error("Node is not owned by the list.");var e=t;e===this._first&&e===this._last?(this._first=null,this._last=null):e===this._first?(this._first=e.next,this._first.prev=null):e===this._last?(this._last=e.prev,this._last.next=null):(e.next.prev=e.prev,e.prev.next=e.next),e.list=null,e.next=null,e.prev=null,this._size--},n.prototype.clear=function(){for(var t=this._first;t;){var e=t.next;t.list=null,t.prev=null,t.next=null,t=e}this._first=null,this._last=null,this._size=0},n}();(function(n){function t(s){var a=new n;return a.assign(s),a}n.from=t;var e=function(){function s(a){this._node=a}return s.prototype.iter=function(){return this},s.prototype.clone=function(){return new s(this._node)},s.prototype.next=function(){if(!!this._node){var a=this._node;return this._node=a.next,a.value}},s}();n.ForwardValueIterator=e;var i=function(){function s(a){this._node=a}return s.prototype.iter=function(){return this},s.prototype.clone=function(){return new s(this._node)},s.prototype.next=function(){if(!!this._node){var a=this._node;return this._node=a.prev,a.value}},s}();n.RetroValueIterator=i;var r=function(){function s(a){this._node=a}return s.prototype.iter=function(){return this},s.prototype.clone=function(){return new s(this._node)},s.prototype.next=function(){if(!!this._node){var a=this._node;return this._node=a.next,a}},s}();n.ForwardNodeIterator=r;var o=function(){function s(a){this._node=a}return s.prototype.iter=function(){return this},s.prototype.clone=function(){return new s(this._node)},s.prototype.next=function(){if(!!this._node){var a=this._node;return this._node=a.prev,a}},s}();n.RetroNodeIterator=o})(Ye||(Ye={}));var ke;(function(n){var t=function(){function e(i,r){this.list=null,this.next=null,this.prev=null,this.list=i,this.value=r}return e}();n.LinkedListNode=t})(ke||(ke={}));var rn=function(n,t){return rn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])},rn(n,t)};function Tl(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");rn(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var he=function(){function n(t){this.type=t}return Object.defineProperty(n.prototype,"isConflatable",{get:function(){return!1},enumerable:!0,configurable:!0}),n.prototype.conflate=function(t){return!1},n}(),qe=function(n){Tl(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"isConflatable",{get:function(){return!0},enumerable:!0,configurable:!0}),t.prototype.conflate=function(e){return!0},t}(he),P;(function(n){function t(d,u){var b=y.get(d);if(!b||b.length===0){x(d,u);return}var k=zt(Pt(b),function(g){return g?w(g,d,u):!0});k&&x(d,u)}n.sendMessage=t;function e(d,u){if(!u.isConflatable){T(d,u);return}var b=Rt(h,function(k){return k.handler!==d||!k.msg||k.msg.type!==u.type||!k.msg.isConflatable?!1:k.msg.conflate(u)});b||T(d,u)}n.postMessage=e;function i(d,u){var b=y.get(d);b&&b.indexOf(u)!==-1||(b?b.push(u):y.set(d,[u]))}n.installMessageHook=i;function r(d,u){var b=y.get(d);if(!!b){var k=b.indexOf(u);k!==-1&&(b[k]=null,E(b))}}n.removeMessageHook=r;function o(d){var u=y.get(d);u&&u.length>0&&(R.fill(u,null),E(u)),F(h,function(b){b.handler===d&&(b.handler=null,b.msg=null)})}n.clearData=o;function s(){c||m===0||(f(m),c=!0,A(),c=!1)}n.flush=s;function a(){return _}n.getExceptionHandler=a;function l(d){var u=_;return _=d,u}n.setExceptionHandler=l;var h=new Ye,y=new WeakMap,I=new Set,_=function(d){console.error(d)},m=0,c=!1,p=function(){var d=typeof requestAnimationFrame=="function";return d?requestAnimationFrame:setImmediate}(),f=function(){var d=typeof cancelAnimationFrame=="function";return d?cancelAnimationFrame:clearImmediate}();function w(d,u,b){var k=!0;try{typeof d=="function"?k=d(u,b):k=d.messageHook(u,b)}catch(g){_(g)}return k}function x(d,u){try{d.processMessage(u)}catch(b){_(b)}}function T(d,u){h.addLast({handler:d,msg:u}),m===0&&(m=p(A))}function A(){if(m=0,!h.isEmpty){var d={handler:null,msg:null};for(h.addLast(d);;){var u=h.removeFirst();if(u===d)return;u.handler&&u.msg&&t(u.handler,u.msg)}}}function E(d){I.size===0&&p(S),I.add(d)}function S(){I.forEach(v),I.clear()}function v(d){R.removeAllWhere(d,M)}function M(d){return d===null}})(P||(P={}));var ri;(function(n){function t(e){var i=document.body,r=function(o){o.preventDefault(),o.stopPropagation(),o.clipboardData.setData("text",e),i.removeEventListener("copy",r,!0)};i.addEventListener("copy",r,!0),document.execCommand("copy")}n.copyText=t})(ri||(ri={}));var U;(function(n){function t(o){var s=window.getComputedStyle(o),a=parseFloat(s.borderTopWidth)||0,l=parseFloat(s.borderLeftWidth)||0,h=parseFloat(s.borderRightWidth)||0,y=parseFloat(s.borderBottomWidth)||0,I=parseFloat(s.paddingTop)||0,_=parseFloat(s.paddingLeft)||0,m=parseFloat(s.paddingRight)||0,c=parseFloat(s.paddingBottom)||0,p=l+_+m+h,f=a+I+c+y;return{borderTop:a,borderLeft:l,borderRight:h,borderBottom:y,paddingTop:I,paddingLeft:_,paddingRight:m,paddingBottom:c,horizontalSum:p,verticalSum:f}}n.boxSizing=t;function e(o){var s=window.getComputedStyle(o),a=parseFloat(s.minWidth)||0,l=parseFloat(s.minHeight)||0,h=parseFloat(s.maxWidth)||1/0,y=parseFloat(s.maxHeight)||1/0;return h=Math.max(a,h),y=Math.max(l,y),{minWidth:a,minHeight:l,maxWidth:h,maxHeight:y}}n.sizeLimits=e;function i(o,s,a){var l=o.getBoundingClientRect();return s>=l.left&&s<l.right&&a>=l.top&&a<l.bottom}n.hitTest=i;function r(o,s){var a=o.getBoundingClientRect(),l=s.getBoundingClientRect();if(!(l.top<=a.top&&l.bottom>=a.bottom)){if(l.top<a.top&&l.height<=a.height){o.scrollTop-=a.top-l.top;return}if(l.bottom>a.bottom&&l.height>=a.height){o.scrollTop-=a.top-l.top;return}if(l.top<a.top&&l.height>a.height){o.scrollTop-=a.bottom-l.bottom;return}if(l.bottom>a.bottom&&l.height<a.height){o.scrollTop-=a.bottom-l.bottom;return}}}n.scrollIntoViewIfNeeded=r})(U||(U={}));var j;(function(n){n.IS_MAC=!!navigator.platform.match(/Mac/i),n.IS_WIN=!!navigator.platform.match(/Win/i),n.IS_IE=/Trident/.test(navigator.userAgent),n.IS_EDGE=/Edge/.test(navigator.userAgent);function t(e){return n.IS_MAC?e.metaKey:e.ctrlKey}n.accelKey=t})(j||(j={}));var xe;(function(n){function t(r){if(r in be.specificityCache)return be.specificityCache[r];var o=be.calculateSingle(r);return be.specificityCache[r]=o}n.calculateSpecificity=t;function e(r){if(r in be.validityCache)return be.validityCache[r];var o=!0;try{be.testElem.querySelector(r)}catch{o=!1}return be.validityCache[r]=o}n.isValid=e;function i(r,o){return be.protoMatchFunc.call(r,o)}n.matches=i})(xe||(xe={}));var be;(function(n){n.specificityCache=Object.create(null),n.validityCache=Object.create(null),n.testElem=document.createElement("div"),n.protoMatchFunc=function(){var y=Element.prototype;return y.matches||y.matchesSelector||y.mozMatchesSelector||y.msMatchesSelector||y.oMatchesSelector||y.webkitMatchesSelector||function(I){var _=this,m=_.ownerDocument?_.ownerDocument.querySelectorAll(I):[];return Array.prototype.indexOf.call(m,_)!==-1}}();function t(y){y=y.split(",",1)[0];var I=0,_=0,m=0;function c(p){var f=y.match(p);return f===null?!1:(y=y.slice(f[0].length),!0)}for(y=y.replace(h," $1 ");y.length>0;){if(c(e)){I++;continue}if(c(i)){_++;continue}if(c(r)){_++;continue}if(c(s)){m++;continue}if(c(a)){_++;continue}if(c(o)){m++;continue}if(!c(l))return 0}return I=Math.min(I,255),_=Math.min(_,255),m=Math.min(m,255),I<<16|_<<8|m}n.calculateSingle=t;var e=/^#[^\s\+>~#\.\[:]+/,i=/^\.[^\s\+>~#\.\[:]+/,r=/^\[[^\]]+\]/,o=/^[^\s\+>~#\.\[:]+/,s=/^(::[^\s\+>~#\.\[:]+|:first-line|:first-letter|:before|:after)/,a=/^:[^\s\+>~#\.\[:]+/,l=/^[\s\+>~\*]+/,h=/:not\(([^\)]+)\)/g})(be||(be={}));var ie=function(){function n(t){this._pid=Ne.nextPID(),this.name=t.name,this._create=t.create,this._coerce=t.coerce||null,this._compare=t.compare||null,this._changed=t.changed||null}return n.prototype.get=function(t){var e,i=Ne.ensureMap(t);return this._pid in i?e=i[this._pid]:e=i[this._pid]=this._createValue(t),e},n.prototype.set=function(t,e){var i,r=Ne.ensureMap(t);this._pid in r?i=r[this._pid]:i=r[this._pid]=this._createValue(t);var o=this._coerceValue(t,e);this._maybeNotify(t,i,r[this._pid]=o)},n.prototype.coerce=function(t){var e,i=Ne.ensureMap(t);this._pid in i?e=i[this._pid]:e=i[this._pid]=this._createValue(t);var r=this._coerceValue(t,e);this._maybeNotify(t,e,i[this._pid]=r)},n.prototype._createValue=function(t){var e=this._create;return e(t)},n.prototype._coerceValue=function(t,e){var i=this._coerce;return i?i(t,e):e},n.prototype._compareValue=function(t,e){var i=this._compare;return i?i(t,e):t===e},n.prototype._maybeNotify=function(t,e,i){var r=this._changed;r&&!this._compareValue(e,i)&&r(t,e,i)},n}();(function(n){function t(e){Ne.ownerData.delete(e)}n.clearData=t})(ie||(ie={}));var Ne;(function(n){n.ownerData=new WeakMap,n.nextPID=function(){var e=0;return function(){var i=Math.random(),r=(""+i).slice(2);return"pid-"+r+"-"+e++}}();function t(e){var i=n.ownerData.get(e);return i||(i=Object.create(null),n.ownerData.set(e,i),i)}n.ensureMap=t})(Ne||(Ne={}));var W=function(){function n(t){this._blockedCount=0,this.sender=t}return n.prototype.block=function(t){this._blockedCount++;try{t()}finally{this._blockedCount--}},n.prototype.connect=function(t,e){return se.connect(this,t,e)},n.prototype.disconnect=function(t,e){return se.disconnect(this,t,e)},n.prototype.emit=function(t){this._blockedCount||se.emit(this,t)},n}();(function(n){function t(h,y){var I=se.blockedProperty;I.set(h,I.get(h)+1);try{y()}finally{I.set(h,I.get(h)-1)}}n.blockAll=t;function e(h,y){se.disconnectBetween(h,y)}n.disconnectBetween=e;function i(h){se.disconnectSender(h)}n.disconnectSender=i;function r(h){se.disconnectReceiver(h)}n.disconnectReceiver=r;function o(h){se.disconnectAll(h)}n.disconnectAll=o;function s(h){se.disconnectAll(h)}n.clearData=s;function a(){return se.exceptionHandler}n.getExceptionHandler=a;function l(h){var y=se.exceptionHandler;return se.exceptionHandler=h,y}n.setExceptionHandler=l})(W||(W={}));var se;(function(n){n.exceptionHandler=function(x){console.error(x)};function t(x,T,A){A=A||void 0;var E=l.get(x.sender);if(E||(E=[],l.set(x.sender,E)),_(E,x,T,A))return!1;var S=A||T,v=h.get(S);v||(v=[],h.set(S,v));var M={signal:x,slot:T,thisArg:A};return E.push(M),v.push(M),!0}n.connect=t;function e(x,T,A){A=A||void 0;var E=l.get(x.sender);if(!E||E.length===0)return!1;var S=_(E,x,T,A);if(!S)return!1;var v=A||T,M=h.get(v);return S.signal=null,c(E),c(M),!0}n.disconnect=e;function i(x,T){var A=l.get(x);if(!(!A||A.length===0)){var E=h.get(T);!E||E.length===0||(F(E,function(S){!S.signal||S.signal.sender===x&&(S.signal=null)}),c(A),c(E))}}n.disconnectBetween=i;function r(x){var T=l.get(x);!T||T.length===0||(F(T,function(A){if(!!A.signal){var E=A.thisArg||A.slot;A.signal=null,c(h.get(E))}}),c(T))}n.disconnectSender=r;function o(x){var T=h.get(x);!T||T.length===0||(F(T,function(A){if(!!A.signal){var E=A.signal.sender;A.signal=null,c(l.get(E))}}),c(T))}n.disconnectReceiver=o;function s(x){r(x),o(x)}n.disconnectAll=s;function a(x,T){if(!(n.blockedProperty.get(x.sender)>0)){var A=l.get(x.sender);if(!(!A||A.length===0))for(var E=0,S=A.length;E<S;++E){var v=A[E];v.signal===x&&m(v,T)}}}n.emit=a;var l=new WeakMap,h=new WeakMap,y=new Set,I=function(){var x=typeof requestAnimationFrame=="function";return x?requestAnimationFrame:setImmediate}();function _(x,T,A,E){return ft(x,function(S){return S.signal===T&&S.slot===A&&S.thisArg===E})}function m(x,T){var A=x.signal,E=x.slot,S=x.thisArg;try{E.call(S,A.sender,T)}catch(v){n.exceptionHandler(v)}}function c(x){y.size===0&&I(p),y.add(x)}function p(){y.forEach(f),y.clear()}function f(x){R.removeAllWhere(x,w)}function w(x){return x.signal===null}n.blockedProperty=new ie({name:"blocked",create:function(){return 0}})})(se||(se={}));var Ke=class{constructor(t){this._label="";this._caption="";this._mnemonic=-1;this._iconClass="";this._iconLabel="";this._className="";this._closable=!1;this._changed=new W(this);this._isDisposed=!1;this.owner=t.owner,t.label!==void 0&&(this._label=t.label),t.mnemonic!==void 0&&(this._mnemonic=t.mnemonic),t.icon!==void 0?typeof t.icon=="string"?(this._icon=null,this._iconClass=t.icon):this._icon=t.icon:this._icon=null,t.iconClass!==void 0&&(this._iconClass=t.iconClass),t.iconLabel!==void 0&&(this._iconLabel=t.iconLabel),t.iconRenderer!==void 0&&(this._icon=t.iconRenderer),t.caption!==void 0&&(this._caption=t.caption),t.className!==void 0&&(this._className=t.className),t.closable!==void 0&&(this._closable=t.closable),this._dataset=t.dataset||{}}get changed(){return this._changed}get label(){return this._label}set label(t){this._label!==t&&(this._label=t,this._changed.emit(void 0))}get mnemonic(){return this._mnemonic}set mnemonic(t){this._mnemonic!==t&&(this._mnemonic=t,this._changed.emit(void 0))}get icon(){return this._icon===null?this.iconClass:this._icon}set icon(t){if(typeof t=="string")this._icon=null,this.iconClass=t;else{if(this._icon===t)return;this._icon=t,this._changed.emit(void 0)}}get iconClass(){return this._iconClass}set iconClass(t){this._iconClass!==t&&(this._iconClass=t,this._changed.emit(void 0))}get iconLabel(){return this._iconLabel}set iconLabel(t){this._iconLabel!==t&&(this._iconLabel=t,this._changed.emit(void 0))}get iconRenderer(){return this._icon||void 0}set iconRenderer(t){this.icon=t}get caption(){return this._caption}set caption(t){this._caption!==t&&(this._caption=t,this._changed.emit(void 0))}get className(){return this._className}set className(t){this._className!==t&&(this._className=t,this._changed.emit(void 0))}get closable(){return this._closable}set closable(t){this._closable!==t&&(this._closable=t,this._changed.emit(void 0))}get dataset(){return this._dataset}set dataset(t){this._dataset!==t&&(this._dataset=t,this._changed.emit(void 0))}get isDisposed(){return this._isDisposed}dispose(){this.isDisposed||(this._isDisposed=!0,W.clearData(this))}};var z=class{constructor(t={}){this._flags=0;this._layout=null;this._parent=null;this._disposed=new W(this);this._hiddenMode=z.HiddenMode.Display;this.node=on.createNode(t),this.addClass("lm-Widget"),this.addClass("p-Widget")}dispose(){this.isDisposed||(this.setFlag(z.Flag.IsDisposed),this._disposed.emit(void 0),this.parent?this.parent=null:this.isAttached&&z.detach(this),this._layout&&(this._layout.dispose(),this._layout=null),this.title.dispose(),W.clearData(this),P.clearData(this),ie.clearData(this))}get disposed(){return this._disposed}get isDisposed(){return this.testFlag(z.Flag.IsDisposed)}get isAttached(){return this.testFlag(z.Flag.IsAttached)}get isHidden(){return this.testFlag(z.Flag.IsHidden)}get isVisible(){return this.testFlag(z.Flag.IsVisible)}get title(){return on.titleProperty.get(this)}get id(){return this.node.id}set id(t){this.node.id=t}get dataset(){return this.node.dataset}get hiddenMode(){return this._hiddenMode}set hiddenMode(t){this._hiddenMode!==t&&(this.isHidden&&this._toggleHidden(!1),t==z.HiddenMode.Scale?this.node.style.willChange="transform":this.node.style.willChange="auto",this._hiddenMode=t,this.isHidden&&this._toggleHidden(!0))}get parent(){return this._parent}set parent(t){if(this._parent!==t){if(t&&this.contains(t))throw new Error("Invalid parent widget.");if(this._parent&&!this._parent.isDisposed){let e=new z.ChildMessage("child-removed",this);P.sendMessage(this._parent,e)}if(this._parent=t,this._parent&&!this._parent.isDisposed){let e=new z.ChildMessage("child-added",this);P.sendMessage(this._parent,e)}this.isDisposed||P.sendMessage(this,z.Msg.ParentChanged)}}get layout(){return this._layout}set layout(t){if(this._layout!==t){if(this.testFlag(z.Flag.DisallowLayout))throw new Error("Cannot set widget layout.");if(this._layout)throw new Error("Cannot change widget layout.");if(t.parent)throw new Error("Cannot change layout parent.");this._layout=t,t.parent=this}}children(){return this._layout?this._layout.iter():ce()}contains(t){for(let e=t;e;e=e._parent)if(e===this)return!0;return!1}hasClass(t){return this.node.classList.contains(t)}addClass(t){this.node.classList.add(t)}removeClass(t){this.node.classList.remove(t)}toggleClass(t,e){return e===!0?(this.node.classList.add(t),!0):e===!1?(this.node.classList.remove(t),!1):this.node.classList.toggle(t)}update(){P.postMessage(this,z.Msg.UpdateRequest)}fit(){P.postMessage(this,z.Msg.FitRequest)}activate(){P.postMessage(this,z.Msg.ActivateRequest)}close(){P.sendMessage(this,z.Msg.CloseRequest)}show(){if(!!this.testFlag(z.Flag.IsHidden)&&(this.isAttached&&(!this.parent||this.parent.isVisible)&&P.sendMessage(this,z.Msg.BeforeShow),this.clearFlag(z.Flag.IsHidden),this.node.removeAttribute("aria-hidden"),this._toggleHidden(!1),this.isAttached&&(!this.parent||this.parent.isVisible)&&P.sendMessage(this,z.Msg.AfterShow),this.parent)){let t=new z.ChildMessage("child-shown",this);P.sendMessage(this.parent,t)}}hide(){if(!this.testFlag(z.Flag.IsHidden)&&(this.isAttached&&(!this.parent||this.parent.isVisible)&&P.sendMessage(this,z.Msg.BeforeHide),this.setFlag(z.Flag.IsHidden),this.node.setAttribute("aria-hidden","true"),this._toggleHidden(!0),this.isAttached&&(!this.parent||this.parent.isVisible)&&P.sendMessage(this,z.Msg.AfterHide),this.parent)){let t=new z.ChildMessage("child-hidden",this);P.sendMessage(this.parent,t)}}setHidden(t){t?this.hide():this.show()}testFlag(t){return(this._flags&t)!==0}setFlag(t){this._flags|=t}clearFlag(t){this._flags&=~t}processMessage(t){switch(t.type){case"resize":this.notifyLayout(t),this.onResize(t);break;case"update-request":this.notifyLayout(t),this.onUpdateRequest(t);break;case"fit-request":this.notifyLayout(t),this.onFitRequest(t);break;case"before-show":this.notifyLayout(t),this.onBeforeShow(t);break;case"after-show":this.setFlag(z.Flag.IsVisible),this.notifyLayout(t),this.onAfterShow(t);break;case"before-hide":this.notifyLayout(t),this.onBeforeHide(t);break;case"after-hide":this.clearFlag(z.Flag.IsVisible),this.notifyLayout(t),this.onAfterHide(t);break;case"before-attach":this.notifyLayout(t),this.onBeforeAttach(t);break;case"after-attach":!this.isHidden&&(!this.parent||this.parent.isVisible)&&this.setFlag(z.Flag.IsVisible),this.setFlag(z.Flag.IsAttached),this.notifyLayout(t),this.onAfterAttach(t);break;case"before-detach":this.notifyLayout(t),this.onBeforeDetach(t);break;case"after-detach":this.clearFlag(z.Flag.IsVisible),this.clearFlag(z.Flag.IsAttached),this.notifyLayout(t),this.onAfterDetach(t);break;case"activate-request":this.notifyLayout(t),this.onActivateRequest(t);break;case"close-request":this.notifyLayout(t),this.onCloseRequest(t);break;case"child-added":this.notifyLayout(t),this.onChildAdded(t);break;case"child-removed":this.notifyLayout(t),this.onChildRemoved(t);break;default:this.notifyLayout(t);break}}notifyLayout(t){this._layout&&this._layout.processParentMessage(t)}onCloseRequest(t){this.parent?this.parent=null:this.isAttached&&z.detach(this)}onResize(t){}onUpdateRequest(t){}onFitRequest(t){}onActivateRequest(t){}onBeforeShow(t){}onAfterShow(t){}onBeforeHide(t){}onAfterHide(t){}onBeforeAttach(t){}onAfterAttach(t){}onBeforeDetach(t){}onAfterDetach(t){}onChildAdded(t){}onChildRemoved(t){}_toggleHidden(t){if(t)switch(this._hiddenMode){case z.HiddenMode.Display:this.addClass("lm-mod-hidden"),this.addClass("p-mod-hidden");break;case z.HiddenMode.Scale:this.node.style.transform="scale(0)";break;case z.HiddenMode.ContentVisibility:this.node.style.contentVisibility="hidden",this.node.style.zIndex="-1";break}else switch(this._hiddenMode){case z.HiddenMode.Display:this.removeClass("lm-mod-hidden"),this.removeClass("p-mod-hidden");break;case z.HiddenMode.Scale:this.node.style.transform="";break;case z.HiddenMode.ContentVisibility:this.node.style.contentVisibility="",this.node.style.zIndex="";break}}};(a=>{let n;(I=>(I[I.Display=0]="Display",I[I.Scale=1]="Scale",I[I.ContentVisibility=2]="ContentVisibility"))(n=a.HiddenMode||={});let t;(m=>(m[m.IsDisposed=1]="IsDisposed",m[m.IsAttached=2]="IsAttached",m[m.IsHidden=4]="IsHidden",m[m.IsVisible=8]="IsVisible",m[m.DisallowLayout=16]="DisallowLayout"))(t=a.Flag||={});let e;(E=>(E.BeforeShow=new he("before-show"),E.AfterShow=new he("after-show"),E.BeforeHide=new he("before-hide"),E.AfterHide=new he("after-hide"),E.BeforeAttach=new he("before-attach"),E.AfterAttach=new he("after-attach"),E.BeforeDetach=new he("before-detach"),E.AfterDetach=new he("after-detach"),E.ParentChanged=new he("parent-changed"),E.UpdateRequest=new qe("update-request"),E.FitRequest=new qe("fit-request"),E.ActivateRequest=new qe("activate-request"),E.CloseRequest=new qe("close-request")))(e=a.Msg||={});class i extends he{constructor(y,I){super(y);this.child=I}}a.ChildMessage=i;class r extends he{constructor(y,I){super("resize");this.width=y,this.height=I}}a.ResizeMessage=r,(h=>h.UnknownSize=new h(-1,-1))(r=a.ResizeMessage||={});function o(l,h,y=null){if(l.parent)throw new Error("Cannot attach a child widget.");if(l.isAttached||l.node.isConnected)throw new Error("Widget is already attached.");if(!h.isConnected)throw new Error("Host is not attached.");P.sendMessage(l,a.Msg.BeforeAttach),h.insertBefore(l.node,y),P.sendMessage(l,a.Msg.AfterAttach)}a.attach=o;function s(l){if(l.parent)throw new Error("Cannot detach a child widget.");if(!l.isAttached||!l.node.isConnected)throw new Error("Widget is not attached.");P.sendMessage(l,a.Msg.BeforeDetach),l.node.parentNode.removeChild(l.node),P.sendMessage(l,a.Msg.AfterDetach)}a.detach=s})(z||={});var on;(e=>{e.titleProperty=new ie({name:"title",create:i=>new Ke({owner:i})});function t(i){return i.node||document.createElement(i.tag||"div")}e.createNode=t})(on||={});var Ie=class{constructor(t={}){this._disposed=!1;this._parent=null;this._fitPolicy=t.fitPolicy||"set-min-size"}dispose(){this._parent=null,this._disposed=!0,W.clearData(this),ie.clearData(this)}get isDisposed(){return this._disposed}get parent(){return this._parent}set parent(t){if(this._parent!==t){if(this._parent)throw new Error("Cannot change parent widget.");if(t.layout!==this)throw new Error("Invalid parent widget.");this._parent=t,this.init()}}get fitPolicy(){return this._fitPolicy}set fitPolicy(t){if(this._fitPolicy!==t&&(this._fitPolicy=t,this._parent)){let e=this._parent.node.style;e.minWidth="",e.minHeight="",e.maxWidth="",e.maxHeight="",this._parent.fit()}}processParentMessage(t){switch(t.type){case"resize":this.onResize(t);break;case"update-request":this.onUpdateRequest(t);break;case"fit-request":this.onFitRequest(t);break;case"before-show":this.onBeforeShow(t);break;case"after-show":this.onAfterShow(t);break;case"before-hide":this.onBeforeHide(t);break;case"after-hide":this.onAfterHide(t);break;case"before-attach":this.onBeforeAttach(t);break;case"after-attach":this.onAfterAttach(t);break;case"before-detach":this.onBeforeDetach(t);break;case"after-detach":this.onAfterDetach(t);break;case"child-removed":this.onChildRemoved(t);break;case"child-shown":this.onChildShown(t);break;case"child-hidden":this.onChildHidden(t);break}}init(){F(this,t=>{t.parent=this.parent})}onResize(t){F(this,e=>{P.sendMessage(e,z.ResizeMessage.UnknownSize)})}onUpdateRequest(t){F(this,e=>{P.sendMessage(e,z.ResizeMessage.UnknownSize)})}onBeforeAttach(t){F(this,e=>{P.sendMessage(e,t)})}onAfterAttach(t){F(this,e=>{P.sendMessage(e,t)})}onBeforeDetach(t){F(this,e=>{P.sendMessage(e,t)})}onAfterDetach(t){F(this,e=>{P.sendMessage(e,t)})}onBeforeShow(t){F(this,e=>{e.isHidden||P.sendMessage(e,t)})}onAfterShow(t){F(this,e=>{e.isHidden||P.sendMessage(e,t)})}onBeforeHide(t){F(this,e=>{e.isHidden||P.sendMessage(e,t)})}onAfterHide(t){F(this,e=>{e.isHidden||P.sendMessage(e,t)})}onChildRemoved(t){this.removeWidget(t.child)}onFitRequest(t){}onChildShown(t){}onChildHidden(t){}};(r=>{function n(o){return gt.horizontalAlignmentProperty.get(o)}r.getHorizontalAlignment=n;function t(o,s){gt.horizontalAlignmentProperty.set(o,s)}r.setHorizontalAlignment=t;function e(o){return gt.verticalAlignmentProperty.get(o)}r.getVerticalAlignment=e;function i(o,s){gt.verticalAlignmentProperty.set(o,s)}r.setVerticalAlignment=i})(Ie||={});var Xe=class{constructor(t){this._top=NaN;this._left=NaN;this._width=NaN;this._height=NaN;this._minWidth=0;this._minHeight=0;this._maxWidth=1/0;this._maxHeight=1/0;this._disposed=!1;this.widget=t,this.widget.node.style.position="absolute"}dispose(){if(this._disposed)return;this._disposed=!0;let t=this.widget.node.style;t.position="",t.top="",t.left="",t.width="",t.height=""}get minWidth(){return this._minWidth}get minHeight(){return this._minHeight}get maxWidth(){return this._maxWidth}get maxHeight(){return this._maxHeight}get isDisposed(){return this._disposed}get isHidden(){return this.widget.isHidden}get isVisible(){return this.widget.isVisible}get isAttached(){return this.widget.isAttached}fit(){let t=U.sizeLimits(this.widget.node);this._minWidth=t.minWidth,this._minHeight=t.minHeight,this._maxWidth=t.maxWidth,this._maxHeight=t.maxHeight}update(t,e,i,r){let o=Math.max(this._minWidth,Math.min(i,this._maxWidth)),s=Math.max(this._minHeight,Math.min(r,this._maxHeight));if(o<i)switch(Ie.getHorizontalAlignment(this.widget)){case"left":break;case"center":t+=(i-o)/2;break;case"right":t+=i-o;break;default:throw"unreachable"}if(s<r)switch(Ie.getVerticalAlignment(this.widget)){case"top":break;case"center":e+=(r-s)/2;break;case"bottom":e+=r-s;break;default:throw"unreachable"}let a=!1,l=this.widget.node.style;if(this._top!==e&&(this._top=e,l.top=`${e}px`),this._left!==t&&(this._left=t,l.left=`${t}px`),this._width!==o&&(a=!0,this._width=o,l.width=`${o}px`),this._height!==s&&(a=!0,this._height=s,l.height=`${s}px`),a){let h=new z.ResizeMessage(o,s);P.sendMessage(this.widget,h)}}},gt;(i=>{i.horizontalAlignmentProperty=new ie({name:"horizontalAlignment",create:()=>"center",changed:e}),i.verticalAlignmentProperty=new ie({name:"verticalAlignment",create:()=>"top",changed:e});function e(r){r.parent&&r.parent.layout&&r.parent.update()}})(gt||={});var Je=class extends Ie{constructor(){super(...arguments);this._widgets=[]}dispose(){for(;this._widgets.length>0;)this._widgets.pop().dispose();super.dispose()}get widgets(){return this._widgets}iter(){return ge(this._widgets)}addWidget(e){this.insertWidget(this._widgets.length,e)}insertWidget(e,i){i.parent=this.parent;let r=this._widgets.indexOf(i),o=Math.max(0,Math.min(e,this._widgets.length));if(r===-1){R.insert(this._widgets,o,i),this.parent&&this.attachWidget(o,i);return}o===this._widgets.length&&o--,r!==o&&(R.move(this._widgets,r,o),this.parent&&this.moveWidget(r,o,i))}removeWidget(e){this.removeWidgetAt(this._widgets.indexOf(e))}removeWidgetAt(e){let i=R.removeAt(this._widgets,e);i&&this.parent&&this.detachWidget(e,i)}init(){super.init(),F(this,(e,i)=>{this.attachWidget(i,e)})}attachWidget(e,i){let r=this.parent.node.children[e];this.parent.isAttached&&P.sendMessage(i,z.Msg.BeforeAttach),this.parent.node.insertBefore(i.node,r),this.parent.isAttached&&P.sendMessage(i,z.Msg.AfterAttach)}moveWidget(e,i,r){this.parent.isAttached&&P.sendMessage(r,z.Msg.BeforeDetach),this.parent.node.removeChild(r.node),this.parent.isAttached&&P.sendMessage(r,z.Msg.AfterDetach);let o=this.parent.node.children[i];this.parent.isAttached&&P.sendMessage(r,z.Msg.BeforeAttach),this.parent.node.insertBefore(r.node,o),this.parent.isAttached&&P.sendMessage(r,z.Msg.AfterAttach)}detachWidget(e,i){this.parent.isAttached&&P.sendMessage(i,z.Msg.BeforeDetach),this.parent.node.removeChild(i.node),this.parent.isAttached&&P.sendMessage(i,z.Msg.AfterDetach)}};var Ze=class extends z{constructor(t={}){super(),this.addClass("lm-Panel"),this.addClass("p-Panel"),this.layout=oi.createLayout(t)}get widgets(){return this.layout.widgets}addWidget(t){this.layout.addWidget(t)}insertWidget(t,e){this.layout.insertWidget(t,e)}},oi;(t=>{function n(e){return e.layout||new Je}t.createLayout=n})(oi||={});var an=function(n,t){return an=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])},an(n,t)};function si(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");an(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var Le=function(){function n(t){this._fn=t}return Object.defineProperty(n.prototype,"isDisposed",{get:function(){return!this._fn},enumerable:!0,configurable:!0}),n.prototype.dispose=function(){if(!!this._fn){var t=this._fn;this._fn=null,t()}},n}(),Hy=function(n){si(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e._disposed=new W(e),e}return Object.defineProperty(t.prototype,"disposed",{get:function(){return this._disposed},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this.isDisposed||(n.prototype.dispose.call(this),this._disposed.emit(void 0),W.clearData(this))},t}(Le),sn=function(){function n(){this._isDisposed=!1,this._items=new Set}return Object.defineProperty(n.prototype,"isDisposed",{get:function(){return this._isDisposed},enumerable:!0,configurable:!0}),n.prototype.dispose=function(){this._isDisposed||(this._isDisposed=!0,this._items.forEach(function(t){t.dispose()}),this._items.clear())},n.prototype.contains=function(t){return this._items.has(t)},n.prototype.add=function(t){this._items.add(t)},n.prototype.remove=function(t){this._items.delete(t)},n.prototype.clear=function(){this._items.clear()},n}();(function(n){function t(e){var i=new n;return F(e,function(r){i.add(r)}),i}n.from=t})(sn||(sn={}));var ai=function(n){si(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e._disposed=new W(e),e}return Object.defineProperty(t.prototype,"disposed",{get:function(){return this._disposed},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this.isDisposed||(n.prototype.dispose.call(this),this._disposed.emit(void 0),W.clearData(this))},t}(sn);(function(n){function t(e){var i=new n;return F(e,function(r){i.add(r)}),i}n.from=t})(ai||(ai={}));var Ce=function(){function n(t){var e=this;this._onScrollFrame=function(){if(!!e._scrollTarget){var i=e._scrollTarget,r=i.element,o=i.edge,s=i.distance,a=ee.SCROLL_EDGE_SIZE-s,l=Math.pow(a/ee.SCROLL_EDGE_SIZE,2),h=Math.max(1,Math.round(l*ee.SCROLL_EDGE_SIZE));switch(o){case"top":r.scrollTop-=h;break;case"left":r.scrollLeft-=h;break;case"right":r.scrollLeft+=h;break;case"bottom":r.scrollTop+=h;break}requestAnimationFrame(e._onScrollFrame)}},this._disposed=!1,this._dropAction="none",this._override=null,this._currentTarget=null,this._currentElement=null,this._promise=null,this._scrollTarget=null,this._resolve=null,this.document=t.document||document,this.mimeData=t.mimeData,this.dragImage=t.dragImage||null,this.proposedAction=t.proposedAction||"copy",this.supportedActions=t.supportedActions||"all",this.source=t.source||null}return n.prototype.dispose=function(){if(!this._disposed){if(this._disposed=!0,this._currentTarget){var t=ee.createMouseEvent("pointerup",-1,-1);ee.dispatchDragLeave(this,this._currentTarget,null,t)}this._finalize("none")}},Object.defineProperty(n.prototype,"isDisposed",{get:function(){return this._disposed},enumerable:!0,configurable:!0}),n.prototype.start=function(t,e){var i=this;if(this._disposed)return Promise.resolve("none");if(this._promise)return this._promise;this._addListeners(),this._attachDragImage(t,e),this._promise=new Promise(function(o,s){i._resolve=o});var r=ee.createMouseEvent("pointermove",t,e);return document.dispatchEvent(r),this._promise},n.prototype.handleEvent=function(t){switch(t.type){case"mousemove":this._evtMouseMove(t);break;case"mouseup":this._evtMouseUp(t);break;case"pointermove":this._evtMouseMove(t);break;case"pointerup":this._evtMouseUp(t);break;case"keydown":this._evtKeyDown(t);break;default:t.preventDefault(),t.stopPropagation();break}},n.prototype.moveDragImage=function(t,e){if(!!this.dragImage){var i=this.dragImage.style;i.top=e+"px",i.left=t+"px"}},n.prototype._evtMouseMove=function(t){t.preventDefault(),t.stopPropagation(),this._updateCurrentTarget(t),this._updateDragScroll(t),this.moveDragImage(t.clientX,t.clientY)},n.prototype._evtMouseUp=function(t){if(t.preventDefault(),t.stopPropagation(),t.button===0){if(this._updateCurrentTarget(t),!this._currentTarget){this._finalize("none");return}if(this._dropAction==="none"){ee.dispatchDragLeave(this,this._currentTarget,null,t),this._finalize("none");return}var e=ee.dispatchDrop(this,this._currentTarget,t);this._finalize(e)}},n.prototype._evtKeyDown=function(t){t.preventDefault(),t.stopPropagation(),t.keyCode===27&&this.dispose()},n.prototype._addListeners=function(){document.addEventListener("mousedown",this,!0),document.addEventListener("mousemove",this,!0),document.addEventListener("mouseup",this,!0),document.addEventListener("mouseenter",this,!0),document.addEventListener("mouseleave",this,!0),document.addEventListener("mouseover",this,!0),document.addEventListener("mouseout",this,!0),document.addEventListener("pointerdown",this,!0),document.addEventListener("pointermove",this,!0),document.addEventListener("pointerup",this,!0),document.addEventListener("pointerenter",this,!0),document.addEventListener("pointerleave",this,!0),document.addEventListener("pointerover",this,!0),document.addEventListener("pointerout",this,!0),document.addEventListener("keydown",this,!0),document.addEventListener("keyup",this,!0),document.addEventListener("keypress",this,!0),document.addEventListener("contextmenu",this,!0)},n.prototype._removeListeners=function(){document.removeEventListener("mousedown",this,!0),document.removeEventListener("mousemove",this,!0),document.removeEventListener("mouseup",this,!0),document.removeEventListener("mouseenter",this,!0),document.removeEventListener("mouseleave",this,!0),document.removeEventListener("mouseover",this,!0),document.removeEventListener("mouseout",this,!0),document.removeEventListener("pointerdown",this,!0),document.removeEventListener("pointermove",this,!0),document.removeEventListener("pointerup",this,!0),document.removeEventListener("pointerenter",this,!0),document.removeEventListener("pointerleave",this,!0),document.removeEventListener("pointerover",this,!0),document.removeEventListener("pointerout",this,!0),document.removeEventListener("keydown",this,!0),document.removeEventListener("keyup",this,!0),document.removeEventListener("keypress",this,!0),document.removeEventListener("contextmenu",this,!0)},n.prototype._updateDragScroll=function(t){var e=ee.findScrollTarget(t);!this._scrollTarget&&!e||(this._scrollTarget||setTimeout(this._onScrollFrame,500),this._scrollTarget=e)},n.prototype._updateCurrentTarget=function(t){var e=this._currentTarget,i=this._currentTarget,r=this._currentElement,o=this.document.elementFromPoint(t.clientX,t.clientY);this._currentElement=o,o!==r&&o!==i&&ee.dispatchDragExit(this,i,o,t),o!==r&&o!==i&&(i=ee.dispatchDragEnter(this,o,i,t)),i!==e&&(this._currentTarget=i,ee.dispatchDragLeave(this,e,i,t));var s=ee.dispatchDragOver(this,i,t);this._setDropAction(s)},n.prototype._attachDragImage=function(t,e){if(!!this.dragImage){this.dragImage.classList.add("lm-mod-drag-image"),this.dragImage.classList.add("p-mod-drag-image");var i=this.dragImage.style;i.pointerEvents="none",i.position="fixed",i.top=e+"px",i.left=t+"px";var r=this.document instanceof Document?this.document.body:this.document.firstElementChild;r.appendChild(this.dragImage)}},n.prototype._detachDragImage=function(){if(!!this.dragImage){var t=this.dragImage.parentNode;!t||t.removeChild(this.dragImage)}},n.prototype._setDropAction=function(t){if(t=ee.validateAction(t,this.supportedActions),!(this._override&&this._dropAction===t))switch(t){case"none":this._dropAction=t,this._override=n.overrideCursor("no-drop",this.document);break;case"copy":this._dropAction=t,this._override=n.overrideCursor("copy",this.document);break;case"link":this._dropAction=t,this._override=n.overrideCursor("alias",this.document);break;case"move":this._dropAction=t,this._override=n.overrideCursor("move",this.document);break}},n.prototype._finalize=function(t){var e=this._resolve;this._removeListeners(),this._detachDragImage(),this._override&&(this._override.dispose(),this._override=null),this.mimeData.clear(),this._disposed=!0,this._dropAction="none",this._currentTarget=null,this._currentElement=null,this._scrollTarget=null,this._promise=null,this._resolve=null,e&&e(t)},n}();(function(n){function t(i,r){r===void 0&&(r=document);var o=++e,s=r instanceof Document?r.body:r.firstElementChild;return s.style.cursor=i,s.classList.add("lm-mod-override-cursor"),s.classList.add("p-mod-override-cursor"),new Le(function(){o===e&&(s.style.cursor="",s.classList.remove("lm-mod-override-cursor"),s.classList.remove("p-mod-override-cursor"))})}n.overrideCursor=t;var e=0})(Ce||(Ce={}));var ee;(function(n){n.SCROLL_EDGE_SIZE=20;function t(_,m){return h[_]&y[m]?_:"none"}n.validateAction=t;function e(_,m,c){var p=document.createEvent("MouseEvent");return p.initMouseEvent(_,!0,!0,window,0,0,0,m,c,!1,!1,!1,!1,0,null),p}n.createMouseEvent=e;function i(_){for(var m=_.clientX,c=_.clientY,p=document.elementFromPoint(m,c);p;p=p.parentElement){var f=p.hasAttribute("data-lm-dragscroll");if(f=f||p.hasAttribute("data-p-dragscroll"),!!f){var w=0,x=0;p===document.body&&(w=window.pageXOffset,x=window.pageYOffset);var T=p.getBoundingClientRect(),A=T.top+x,E=T.left+w,S=E+T.width,v=A+T.height;if(!(m<E||m>=S||c<A||c>=v)){var M=m-E+1,d=c-A+1,u=S-m,b=v-c,k=Math.min(M,d,u,b);if(!(k>n.SCROLL_EDGE_SIZE)){var g=void 0;switch(k){case b:g="bottom";break;case d:g="top";break;case u:g="right";break;case M:g="left";break;default:throw"unreachable"}var L=p.scrollWidth-p.clientWidth,B=p.scrollHeight-p.clientHeight,O=void 0;switch(g){case"top":O=B>0&&p.scrollTop>0;break;case"left":O=L>0&&p.scrollLeft>0;break;case"right":O=L>0&&p.scrollLeft<L;break;case"bottom":O=B>0&&p.scrollTop<B;break;default:throw"unreachable"}if(!!O)return{element:p,edge:g,distance:k}}}}}return null}n.findScrollTarget=i;function r(_,m,c,p){if(!m)return null;var f=I("lm-dragenter",_,p,c),w=!m.dispatchEvent(f);if(w||(f=I("p-dragenter",_,p,c),w=!m.dispatchEvent(f),w))return m;var x=_.document instanceof Document?_.document.body:_.document.firstElementChild;return m===x?c:(f=I("lm-dragenter",_,p,c),x.dispatchEvent(f),f=I("p-dragenter",_,p,c),x.dispatchEvent(f),x)}n.dispatchDragEnter=r;function o(_,m,c,p){if(!!m){var f=I("lm-dragexit",_,p,c);m.dispatchEvent(f),f=I("p-dragexit",_,p,c),m.dispatchEvent(f)}}n.dispatchDragExit=o;function s(_,m,c,p){if(!!m){var f=I("lm-dragleave",_,p,c);m.dispatchEvent(f),f=I("p-dragleave",_,p,c),m.dispatchEvent(f)}}n.dispatchDragLeave=s;function a(_,m,c){if(!m)return"none";var p=I("lm-dragover",_,c,null),f=!m.dispatchEvent(p);return f||(p=I("p-dragover",_,c,null),f=!m.dispatchEvent(p),f)?p.dropAction:"none"}n.dispatchDragOver=a;function l(_,m,c){if(!m)return"none";var p=I("lm-drop",_,c,null),f=!m.dispatchEvent(p);return f||(p=I("p-drop",_,c,null),f=!m.dispatchEvent(p),f)?p.dropAction:"none"}n.dispatchDrop=l;var h={none:0,copy:1,link:2,move:4},y={none:h.none,copy:h.copy,link:h.link,move:h.move,"copy-link":h.copy|h.link,"copy-move":h.copy|h.move,"link-move":h.link|h.move,all:h.copy|h.link|h.move};function I(_,m,c,p){var f=document.createEvent("MouseEvent");return f.initMouseEvent(_,!0,!0,window,0,c.screenX,c.screenY,c.clientX,c.clientY,c.ctrlKey,c.altKey,c.shiftKey,c.metaKey,c.button,p),f.dropAction="none",f.mimeData=m.mimeData,f.proposedAction=m.proposedAction,f.supportedActions=m.supportedActions,f.source=m.source,f}})(ee||(ee={}));var Se=class{constructor(){this.sizeHint=0;this.minSize=0;this.maxSize=1/0;this.stretch=1;this.size=0;this.done=!1}},De;(r=>{function n(o,s){let a=o.length;if(a===0)return s;let l=0,h=0,y=0,I=0,_=0;for(let p=0;p<a;++p){let f=o[p],w=f.minSize,x=f.maxSize,T=f.sizeHint;f.done=!1,f.size=Math.max(w,Math.min(T,x)),y+=f.size,l+=w,h+=x,f.stretch>0&&(I+=f.stretch,_++)}if(s===y)return 0;if(s<=l){for(let p=0;p<a;++p){let f=o[p];f.size=f.minSize}return s-l}if(s>=h){for(let p=0;p<a;++p){let f=o[p];f.size=f.maxSize}return s-h}let m=.01,c=a;if(s<y){let p=y-s;for(;_>0&&p>m;){let f=p,w=I;for(let x=0;x<a;++x){let T=o[x];if(T.done||T.stretch===0)continue;let A=T.stretch*f/w;T.size-A<=T.minSize?(p-=T.size-T.minSize,I-=T.stretch,T.size=T.minSize,T.done=!0,c--,_--):(p-=A,T.size-=A)}}for(;c>0&&p>m;){let f=p/c;for(let w=0;w<a;++w){let x=o[w];x.done||(x.size-f<=x.minSize?(p-=x.size-x.minSize,x.size=x.minSize,x.done=!0,c--):(p-=f,x.size-=f))}}}else{let p=s-y;for(;_>0&&p>m;){let f=p,w=I;for(let x=0;x<a;++x){let T=o[x];if(T.done||T.stretch===0)continue;let A=T.stretch*f/w;T.size+A>=T.maxSize?(p-=T.maxSize-T.size,I-=T.stretch,T.size=T.maxSize,T.done=!0,c--,_--):(p-=A,T.size+=A)}}for(;c>0&&p>m;){let f=p/c;for(let w=0;w<a;++w){let x=o[w];x.done||(x.size+f>=x.maxSize?(p-=x.maxSize-x.size,x.size=x.maxSize,x.done=!0,c--):(p-=f,x.size+=f))}}}return 0}r.calc=n;function t(o,s,a){o.length===0||a===0||(a>0?e(o,s,a):i(o,s,-a))}r.adjust=t;function e(o,s,a){let l=0;for(let _=0;_<=s;++_){let m=o[_];l+=m.maxSize-m.size}let h=0;for(let _=s+1,m=o.length;_<m;++_){let c=o[_];h+=c.size-c.minSize}a=Math.min(a,l,h);let y=a;for(let _=s;_>=0&&y>0;--_){let m=o[_],c=m.maxSize-m.size;c>=y?(m.sizeHint=m.size+y,y=0):(m.sizeHint=m.size+c,y-=c)}let I=a;for(let _=s+1,m=o.length;_<m&&I>0;++_){let c=o[_],p=c.size-c.minSize;p>=I?(c.sizeHint=c.size-I,I=0):(c.sizeHint=c.size-p,I-=p)}}function i(o,s,a){let l=0;for(let _=s+1,m=o.length;_<m;++_){let c=o[_];l+=c.maxSize-c.size}let h=0;for(let _=0;_<=s;++_){let m=o[_];h+=m.size-m.minSize}a=Math.min(a,l,h);let y=a;for(let _=s+1,m=o.length;_<m&&y>0;++_){let c=o[_],p=c.maxSize-c.size;p>=y?(c.sizeHint=c.size+y,y=0):(c.sizeHint=c.size+p,y-=p)}let I=a;for(let _=s;_>=0&&I>0;--_){let m=o[_],c=m.size-m.minSize;c>=I?(m.sizeHint=m.size-I,I=0):(m.sizeHint=m.size-c,I-=c)}}})(De||={});var bt;(t=>{function n(e){return Math.max(0,Math.floor(e))}t.clampDimension=n})(bt||={});var ln=bt;var ve=class extends Je{constructor(e){super();this.widgetOffset=0;this._fixed=0;this._spacing=4;this._dirty=!1;this._hasNormedSizes=!1;this._sizers=[];this._items=[];this._handles=[];this._box=null;this._alignment="start";this._orientation="horizontal";this.renderer=e.renderer,e.orientation!==void 0&&(this._orientation=e.orientation),e.alignment!==void 0&&(this._alignment=e.alignment),e.spacing!==void 0&&(this._spacing=bt.clampDimension(e.spacing))}dispose(){F(this._items,e=>{e.dispose()}),this._box=null,this._items.length=0,this._sizers.length=0,this._handles.length=0,super.dispose()}get orientation(){return this._orientation}set orientation(e){this._orientation!==e&&(this._orientation=e,this.parent&&(this.parent.dataset.orientation=e,this.parent.fit()))}get alignment(){return this._alignment}set alignment(e){this._alignment!==e&&(this._alignment=e,this.parent&&(this.parent.dataset.alignment=e,this.parent.update()))}get spacing(){return this._spacing}set spacing(e){e=bt.clampDimension(e),this._spacing!==e&&(this._spacing=e,this.parent&&this.parent.fit())}get handles(){return this._handles}absoluteSizes(){return this._sizers.map(e=>e.size)}relativeSizes(){return Be.normalize(this._sizers.map(e=>e.size))}setRelativeSizes(e,i=!0){let r=this._sizers.length,o=e.slice(0,r);for(;o.length<r;)o.push(0);let s=Be.normalize(o);for(let a=0;a<r;++a){let l=this._sizers[a];l.sizeHint=s[a],l.size=s[a]}this._hasNormedSizes=!0,i&&this.parent&&this.parent.update()}moveHandle(e,i){let r=this._handles[e];if(!r||r.classList.contains("lm-mod-hidden"))return;let o;if(this._orientation==="horizontal"?o=i-r.offsetLeft:o=i-r.offsetTop,o!==0){for(let s of this._sizers)s.size>0&&(s.sizeHint=s.size);De.adjust(this._sizers,e,o),this.parent&&this.parent.update()}}init(){this.parent.dataset.orientation=this.orientation,this.parent.dataset.alignment=this.alignment,super.init()}attachWidget(e,i){let r=new Xe(i),o=Be.createHandle(this.renderer),s=Be.averageSize(this._sizers),a=Be.createSizer(s);R.insert(this._items,e,r),R.insert(this._sizers,e,a),R.insert(this._handles,e,o),this.parent.isAttached&&P.sendMessage(i,z.Msg.BeforeAttach),this.parent.node.appendChild(i.node),this.parent.node.appendChild(o),this.parent.isAttached&&P.sendMessage(i,z.Msg.AfterAttach),this.parent.fit()}moveWidget(e,i,r){R.move(this._items,e,i),R.move(this._sizers,e,i),R.move(this._handles,e,i),this.parent.fit()}detachWidget(e,i){let r=R.removeAt(this._items,e),o=R.removeAt(this._handles,e);R.removeAt(this._sizers,e),this.parent.isAttached&&P.sendMessage(i,z.Msg.BeforeDetach),this.parent.node.removeChild(i.node),this.parent.node.removeChild(o),this.parent.isAttached&&P.sendMessage(i,z.Msg.AfterDetach),r.dispose(),this.parent.fit()}onBeforeShow(e){super.onBeforeShow(e),this.parent.update()}onBeforeAttach(e){super.onBeforeAttach(e),this.parent.fit()}onChildShown(e){this.parent.fit()}onChildHidden(e){this.parent.fit()}onResize(e){this.parent.isVisible&&this._update(e.width,e.height)}onUpdateRequest(e){this.parent.isVisible&&this._update(-1,-1)}onFitRequest(e){this.parent.isAttached&&this._fit()}updateItemPosition(e,i,r,o,s,a,l){let h=this._items[e];if(h.isHidden)return;let y=this._handles[e].style;i?(r+=this.widgetOffset,h.update(r,o,l,s),r+=l,y.top=`${o}px`,y.left=`${r}px`,y.width=`${this._spacing}px`,y.height=`${s}px`):(o+=this.widgetOffset,h.update(r,o,a,l),o+=l,y.top=`${o}px`,y.left=`${r}px`,y.width=`${a}px`,y.height=`${this._spacing}px`)}_fit(){let e=0,i=-1;for(let h=0,y=this._items.length;h<y;++h)this._items[h].isHidden?(this._handles[h].classList.add("lm-mod-hidden"),this._handles[h].classList.add("p-mod-hidden")):(this._handles[h].classList.remove("lm-mod-hidden"),this._handles[h].classList.remove("p-mod-hidden"),i=h,e++);i!==-1&&(this._handles[i].classList.add("lm-mod-hidden"),this._handles[i].classList.add("p-mod-hidden")),this._fixed=this._spacing*Math.max(0,e-1)+this.widgetOffset*this._items.length;let r=this._orientation==="horizontal",o=r?this._fixed:0,s=r?0:this._fixed;for(let h=0,y=this._items.length;h<y;++h){let I=this._items[h],_=this._sizers[h];if(_.size>0&&(_.sizeHint=_.size),I.isHidden){_.minSize=0,_.maxSize=0;continue}I.fit(),_.stretch=ve.getStretch(I.widget),r?(_.minSize=I.minWidth,_.maxSize=I.maxWidth,o+=I.minWidth,s=Math.max(s,I.minHeight)):(_.minSize=I.minHeight,_.maxSize=I.maxHeight,s+=I.minHeight,o=Math.max(o,I.minWidth))}let a=this._box=U.boxSizing(this.parent.node);o+=a.horizontalSum,s+=a.verticalSum;let l=this.parent.node.style;l.minWidth=`${o}px`,l.minHeight=`${s}px`,this._dirty=!0,this.parent.parent&&P.sendMessage(this.parent.parent,z.Msg.FitRequest),this._dirty&&P.sendMessage(this.parent,z.Msg.UpdateRequest)}_update(e,i){this._dirty=!1;let r=0;for(let _=0,m=this._items.length;_<m;++_)r+=+!this._items[_].isHidden;if(r===0&&this.widgetOffset===0)return;e<0&&(e=this.parent.node.offsetWidth),i<0&&(i=this.parent.node.offsetHeight),this._box||(this._box=U.boxSizing(this.parent.node));let o=this._box.paddingTop,s=this._box.paddingLeft,a=e-this._box.horizontalSum,l=i-this._box.verticalSum,h=0,y=0,I=this._orientation==="horizontal";if(r>0){let _;if(I?_=Math.max(0,a-this._fixed):_=Math.max(0,l-this._fixed),this._hasNormedSizes){for(let c of this._sizers)c.sizeHint*=_;this._hasNormedSizes=!1}let m=De.calc(this._sizers,_);if(m>0)switch(this._alignment){case"start":break;case"center":h=0,y=m/2;break;case"end":h=0,y=m;break;case"justify":h=m/r,y=0;break;default:throw"unreachable"}}for(let _=0,m=this._items.length;_<m;++_){let p=this._items[_].isHidden?0:this._sizers[_].size+h;this.updateItemPosition(_,I,I?s+y:s,I?o:o+y,l,a,p);let f=this.widgetOffset+(this._handles[_].classList.contains("lm-mod-hidden")?0:this._spacing);I?s+=p+f:o+=p+f}}};(e=>{function n(i){return Be.stretchProperty.get(i)}e.getStretch=n;function t(i,r){Be.stretchProperty.set(i,r)}e.setStretch=t})(ve||={});var Be;(s=>{s.stretchProperty=new ie({name:"stretch",create:()=>0,coerce:(a,l)=>Math.max(0,Math.floor(l)),changed:o});function t(a){let l=new Se;return l.sizeHint=Math.floor(a),l}s.createSizer=t;function e(a){let l=a.createHandle();return l.style.position="absolute",l}s.createHandle=e;function i(a){return a.reduce((l,h)=>l+h.size,0)/a.length||0}s.averageSize=i;function r(a){let l=a.length;if(l===0)return[];let h=a.reduce((y,I)=>y+Math.abs(I),0);return h===0?a.map(y=>1/l):a.map(y=>y/h)}s.normalize=r;function o(a){a.parent&&a.parent.layout instanceof ve&&a.parent.fit()}})(Be||={});var ze=class extends Ze{constructor(e={}){super({layout:li.createLayout(e)});this._handleMoved=new W(this);this._pressData=null;this.addClass("lm-SplitPanel"),this.addClass("p-SplitPanel")}dispose(){this._releaseMouse(),super.dispose()}get orientation(){return this.layout.orientation}set orientation(e){this.layout.orientation=e}get alignment(){return this.layout.alignment}set alignment(e){this.layout.alignment=e}get spacing(){return this.layout.spacing}set spacing(e){this.layout.spacing=e}get renderer(){return this.layout.renderer}get handleMoved(){return this._handleMoved}get handles(){return this.layout.handles}relativeSizes(){return this.layout.relativeSizes()}setRelativeSizes(e,i=!0){this.layout.setRelativeSizes(e,i)}handleEvent(e){switch(e.type){case"mousedown":this._evtMouseDown(e);break;case"mousemove":this._evtMouseMove(e);break;case"mouseup":this._evtMouseUp(e);break;case"pointerdown":this._evtMouseDown(e);break;case"pointermove":this._evtMouseMove(e);break;case"pointerup":this._evtMouseUp(e);break;case"keydown":this._evtKeyDown(e);break;case"contextmenu":e.preventDefault(),e.stopPropagation();break}}onBeforeAttach(e){this.node.addEventListener("mousedown",this),this.node.addEventListener("pointerdown",this)}onAfterDetach(e){this.node.removeEventListener("mousedown",this),this.node.removeEventListener("pointerdown",this),this._releaseMouse()}onChildAdded(e){e.child.addClass("lm-SplitPanel-child"),e.child.addClass("p-SplitPanel-child"),this._releaseMouse()}onChildRemoved(e){e.child.removeClass("lm-SplitPanel-child"),e.child.removeClass("p-SplitPanel-child"),this._releaseMouse()}_evtKeyDown(e){this._pressData&&(e.preventDefault(),e.stopPropagation()),e.keyCode===27&&this._releaseMouse()}_evtMouseDown(e){if(e.button!==0)return;let i=this.layout,r=R.findFirstIndex(i.handles,y=>y.contains(e.target));if(r===-1)return;e.preventDefault(),e.stopPropagation(),document.addEventListener("mouseup",this,!0),document.addEventListener("mousemove",this,!0),document.addEventListener("pointerup",this,!0),document.addEventListener("pointermove",this,!0),document.addEventListener("keydown",this,!0),document.addEventListener("contextmenu",this,!0);let o,s=i.handles[r],a=s.getBoundingClientRect();i.orientation==="horizontal"?o=e.clientX-a.left:o=e.clientY-a.top;let l=window.getComputedStyle(s),h=Ce.overrideCursor(l.cursor);this._pressData={index:r,delta:o,override:h}}_evtMouseMove(e){e.preventDefault(),e.stopPropagation();let i,r=this.layout,o=this.node.getBoundingClientRect();r.orientation==="horizontal"?i=e.clientX-o.left-this._pressData.delta:i=e.clientY-o.top-this._pressData.delta,r.moveHandle(this._pressData.index,i)}_evtMouseUp(e){e.button===0&&(e.preventDefault(),e.stopPropagation(),this._releaseMouse())}_releaseMouse(){!this._pressData||(this._pressData.override.dispose(),this._pressData=null,this._handleMoved.emit(),document.removeEventListener("mouseup",this,!0),document.removeEventListener("mousemove",this,!0),document.removeEventListener("keydown",this,!0),document.removeEventListener("pointerup",this,!0),document.removeEventListener("pointermove",this,!0),document.removeEventListener("contextmenu",this,!0))}};(r=>{class n{createHandle(){let s=document.createElement("div");return s.className="lm-SplitPanel-handle",s.classList.add("p-SplitPanel-handle"),s}}r.Renderer=n,r.defaultRenderer=new n;function e(o){return ve.getStretch(o)}r.getStretch=e;function i(o,s){ve.setStretch(o,s)}r.setStretch=i})(ze||={});var li;(t=>{function n(e){return e.layout||new ve({renderer:e.renderer||ze.defaultRenderer,orientation:e.orientation,alignment:e.alignment,spacing:e.spacing})}t.createLayout=n})(li||={});var ui=$e(vt());var dn=function(n,t){return dn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])},dn(n,t)};function wl(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");dn(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var Ft=function(){function n(t){this.type="text",this.content=t}return n}(),Wt=function(){function n(t,e,i,r){this.type="element",this.tag=t,this.attrs=e,this.children=i,this.renderer=r}return n}(),d_=function(n){wl(t,n);function t(e,i,r){return n.call(this,e,i,[],r||void 0)||this}return t}(Wt);function Z(n){for(var t={},e,i=[],r=1,o=arguments.length;r<o;++r){var s=arguments[r];typeof s=="string"?i.push(new Ft(s)):s instanceof Ft||s instanceof Wt?i.push(s):s instanceof Array?a(i,s):(r===1||r===2)&&s&&typeof s=="object"&&("render"in s?e=s:t=s)}return new Wt(n,t,i,e);function a(l,h){for(var y=0,I=h;y<I.length;y++){var _=I[y];typeof _=="string"?l.push(new Ft(_)):(_ instanceof Ft||_ instanceof Wt)&&l.push(_)}}}(function(n){n.a=n.bind(void 0,"a"),n.abbr=n.bind(void 0,"abbr"),n.address=n.bind(void 0,"address"),n.area=n.bind(void 0,"area"),n.article=n.bind(void 0,"article"),n.aside=n.bind(void 0,"aside"),n.audio=n.bind(void 0,"audio"),n.b=n.bind(void 0,"b"),n.bdi=n.bind(void 0,"bdi"),n.bdo=n.bind(void 0,"bdo"),n.blockquote=n.bind(void 0,"blockquote"),n.br=n.bind(void 0,"br"),n.button=n.bind(void 0,"button"),n.canvas=n.bind(void 0,"canvas"),n.caption=n.bind(void 0,"caption"),n.cite=n.bind(void 0,"cite"),n.code=n.bind(void 0,"code"),n.col=n.bind(void 0,"col"),n.colgroup=n.bind(void 0,"colgroup"),n.data=n.bind(void 0,"data"),n.datalist=n.bind(void 0,"datalist"),n.dd=n.bind(void 0,"dd"),n.del=n.bind(void 0,"del"),n.dfn=n.bind(void 0,"dfn"),n.div=n.bind(void 0,"div"),n.dl=n.bind(void 0,"dl"),n.dt=n.bind(void 0,"dt"),n.em=n.bind(void 0,"em"),n.embed=n.bind(void 0,"embed"),n.fieldset=n.bind(void 0,"fieldset"),n.figcaption=n.bind(void 0,"figcaption"),n.figure=n.bind(void 0,"figure"),n.footer=n.bind(void 0,"footer"),n.form=n.bind(void 0,"form"),n.h1=n.bind(void 0,"h1"),n.h2=n.bind(void 0,"h2"),n.h3=n.bind(void 0,"h3"),n.h4=n.bind(void 0,"h4"),n.h5=n.bind(void 0,"h5"),n.h6=n.bind(void 0,"h6"),n.header=n.bind(void 0,"header"),n.hr=n.bind(void 0,"hr"),n.i=n.bind(void 0,"i"),n.iframe=n.bind(void 0,"iframe"),n.img=n.bind(void 0,"img"),n.input=n.bind(void 0,"input"),n.ins=n.bind(void 0,"ins"),n.kbd=n.bind(void 0,"kbd"),n.label=n.bind(void 0,"label"),n.legend=n.bind(void 0,"legend"),n.li=n.bind(void 0,"li"),n.main=n.bind(void 0,"main"),n.map=n.bind(void 0,"map"),n.mark=n.bind(void 0,"mark"),n.meter=n.bind(void 0,"meter"),n.nav=n.bind(void 0,"nav"),n.noscript=n.bind(void 0,"noscript"),n.object=n.bind(void 0,"object"),n.ol=n.bind(void 0,"ol"),n.optgroup=n.bind(void 0,"optgroup"),n.option=n.bind(void 0,"option"),n.output=n.bind(void 0,"output"),n.p=n.bind(void 0,"p"),n.param=n.bind(void 0,"param"),n.pre=n.bind(void 0,"pre"),n.progress=n.bind(void 0,"progress"),n.q=n.bind(void 0,"q"),n.rp=n.bind(void 0,"rp"),n.rt=n.bind(void 0,"rt"),n.ruby=n.bind(void 0,"ruby"),n.s=n.bind(void 0,"s"),n.samp=n.bind(void 0,"samp"),n.section=n.bind(void 0,"section"),n.select=n.bind(void 0,"select"),n.small=n.bind(void 0,"small"),n.source=n.bind(void 0,"source"),n.span=n.bind(void 0,"span"),n.strong=n.bind(void 0,"strong"),n.sub=n.bind(void 0,"sub"),n.summary=n.bind(void 0,"summary"),n.sup=n.bind(void 0,"sup"),n.table=n.bind(void 0,"table"),n.tbody=n.bind(void 0,"tbody"),n.td=n.bind(void 0,"td"),n.textarea=n.bind(void 0,"textarea"),n.tfoot=n.bind(void 0,"tfoot"),n.th=n.bind(void 0,"th"),n.thead=n.bind(void 0,"thead"),n.time=n.bind(void 0,"time"),n.title=n.bind(void 0,"title"),n.tr=n.bind(void 0,"tr"),n.track=n.bind(void 0,"track"),n.u=n.bind(void 0,"u"),n.ul=n.bind(void 0,"ul"),n.var_=n.bind(void 0,"var"),n.video=n.bind(void 0,"video"),n.wbr=n.bind(void 0,"wbr")})(Z||(Z={}));var Re;(function(n){function t(i){return je.createDOMNode(i)}n.realize=t;function e(i,r){var o=je.hostMap.get(r)||[],s=je.asContentArray(i);je.hostMap.set(r,s),je.updateContent(r,o,s)}n.render=e})(Re||(Re={}));var je;(function(n){n.hostMap=new WeakMap;function t(m){return m?m instanceof Array?m:[m]:[]}n.asContentArray=t;function e(m){var c=arguments[1]||null,p=arguments[2]||null;if(c)c.insertBefore(e(m),p);else{if(m.type==="text")return document.createTextNode(m.content);if(c=document.createElement(m.tag),s(c,m.attrs),m.renderer)return m.renderer.render(c,{attrs:m.attrs,children:m.children}),c;for(var f=0,w=m.children.length;f<w;++f)e(m.children[f],c)}return c}n.createDOMNode=e;function i(m,c,p){if(c!==p){for(var f=_(m,c),w=c.slice(),x=m.firstChild,T=p.length,A=0;A<T;++A){if(A>=w.length){e(p[A],m);continue}var E=w[A],S=p[A];if(E===S){x=x.nextSibling;continue}if(E.type==="text"&&S.type==="text"){x.textContent!==S.content&&(x.textContent=S.content),x=x.nextSibling;continue}if(E.type==="text"||S.type==="text"){R.insert(w,A,S),e(S,m,x);continue}if(!E.renderer!=!S.renderer){R.insert(w,A,S),e(S,m,x);continue}var v=S.attrs.key;if(v&&v in f){var M=f[v];M.vNode!==E&&(R.move(w,w.indexOf(M.vNode,A+1),A),m.insertBefore(M.element,x),E=M.vNode,x=M.element)}if(E===S){x=x.nextSibling;continue}var d=E.attrs.key;if(d&&d!==v){R.insert(w,A,S),e(S,m,x);continue}if(E.tag!==S.tag){R.insert(w,A,S),e(S,m,x);continue}a(x,E.attrs,S.attrs),S.renderer?S.renderer.render(x,{attrs:S.attrs,children:S.children}):i(x,E.children,S.children),x=x.nextSibling}r(m,w,T,!0)}}n.updateContent=i;function r(m,c,p,f){for(var w=c.length-1;w>=p;--w){var x=c[w],T=f?m.lastChild:m.childNodes[w];x.type==="text"||(x.renderer&&x.renderer.unrender?x.renderer.unrender(T,{attrs:x.attrs,children:x.children}):r(T,x.children,0,!1)),f&&m.removeChild(T)}}var o={key:!0,className:!0,htmlFor:!0,dataset:!0,style:!0};function s(m,c){for(var p in c)p in o||(p.substr(0,2)==="on"?m[p]=c[p]:m.setAttribute(p,c[p]));c.className!==void 0&&m.setAttribute("class",c.className),c.htmlFor!==void 0&&m.setAttribute("for",c.htmlFor),c.dataset&&l(m,c.dataset),c.style&&y(m,c.style)}function a(m,c,p){if(c!==p){var f;for(f in c)f in o||f in p||(f.substr(0,2)==="on"?m[f]=null:m.removeAttribute(f));for(f in p)f in o||c[f]===p[f]||(f.substr(0,2)==="on"?m[f]=p[f]:m.setAttribute(f,p[f]));c.className!==p.className&&(p.className!==void 0?m.setAttribute("class",p.className):m.removeAttribute("class")),c.htmlFor!==p.htmlFor&&(p.htmlFor!==void 0?m.setAttribute("for",p.htmlFor):m.removeAttribute("for")),c.dataset!==p.dataset&&h(m,c.dataset||{},p.dataset||{}),c.style!==p.style&&I(m,c.style||{},p.style||{})}}function l(m,c){for(var p in c)m.setAttribute("data-"+p,c[p])}function h(m,c,p){for(var f in c)f in p||m.removeAttribute("data-"+f);for(var w in p)c[w]!==p[w]&&m.setAttribute("data-"+w,p[w])}function y(m,c){var p=m.style,f;for(f in c)p[f]=c[f]}function I(m,c,p){var f=m.style,w;for(w in c)w in p||(f[w]="");for(w in p)c[w]!==p[w]&&(f[w]=p[w])}function _(m,c){for(var p=m.firstChild,f=Object.create(null),w=0,x=c;w<x.length;w++){var T=x[w];T.type==="element"&&T.attrs.key&&(f[T.attrs.key]={vNode:T,element:p}),p=p.nextSibling}return f}})(je||(je={}));var le=class extends z{constructor(e={}){super({node:ye.createNode()});this._currentIndex=-1;this._titles=[];this._titlesEditable=!1;this._previousTitle=null;this._dragData=null;this._addButtonEnabled=!1;this._tabMoved=new W(this);this._currentChanged=new W(this);this._addRequested=new W(this);this._tabCloseRequested=new W(this);this._tabDetachRequested=new W(this);this._tabActivateRequested=new W(this);this.addClass("lm-TabBar"),this.addClass("p-TabBar"),this.contentNode.setAttribute("role","tablist"),this.setFlag(z.Flag.DisallowLayout),this._document=e.document||document,this.tabsMovable=e.tabsMovable||!1,this.titlesEditable=e.titlesEditable||!1,this.allowDeselect=e.allowDeselect||!1,this.addButtonEnabled=e.addButtonEnabled||!1,this.insertBehavior=e.insertBehavior||"select-tab-if-needed",this.name=e.name||"",this.orientation=e.orientation||"horizontal",this.removeBehavior=e.removeBehavior||"select-tab-after",this.renderer=e.renderer||le.defaultRenderer}dispose(){this._releaseMouse(),this._titles.length=0,this._previousTitle=null,super.dispose()}get currentChanged(){return this._currentChanged}get tabMoved(){return this._tabMoved}get tabActivateRequested(){return this._tabActivateRequested}get addRequested(){return this._addRequested}get tabCloseRequested(){return this._tabCloseRequested}get tabDetachRequested(){return this._tabDetachRequested}get document(){return this._document}get titlesEditable(){return this._titlesEditable}set titlesEditable(e){this._titlesEditable=e}get currentTitle(){return this._titles[this._currentIndex]||null}set currentTitle(e){this.currentIndex=e?this._titles.indexOf(e):-1}get currentIndex(){return this._currentIndex}set currentIndex(e){if((e<0||e>=this._titles.length)&&(e=-1),this._currentIndex===e)return;let i=this._currentIndex,r=this._titles[i]||null,o=e,s=this._titles[o]||null;this._currentIndex=o,this._previousTitle=r,this.update(),this._currentChanged.emit({previousIndex:i,previousTitle:r,currentIndex:o,currentTitle:s})}get name(){return this._name}set name(e){this._name=e,e?this.contentNode.setAttribute("aria-label",e):this.contentNode.removeAttribute("aria-label")}get orientation(){return this._orientation}set orientation(e){this._orientation!==e&&(this._releaseMouse(),this._orientation=e,this.dataset.orientation=e,this.contentNode.setAttribute("aria-orientation",e))}get addButtonEnabled(){return this._addButtonEnabled}set addButtonEnabled(e){this._addButtonEnabled!==e&&(this._addButtonEnabled=e,e?this.addButtonNode.classList.remove("lm-mod-hidden"):this.addButtonNode.classList.add("lm-mod-hidden"))}get titles(){return this._titles}get contentNode(){return this.node.getElementsByClassName("lm-TabBar-content")[0]}get addButtonNode(){return this.node.getElementsByClassName("lm-TabBar-addButton")[0]}addTab(e){return this.insertTab(this._titles.length,e)}insertTab(e,i){this._releaseMouse();let r=ye.asTitle(i),o=this._titles.indexOf(r),s=Math.max(0,Math.min(e,this._titles.length));return o===-1?(R.insert(this._titles,s,r),r.changed.connect(this._onTitleChanged,this),this.update(),this._adjustCurrentForInsert(s,r),r):(s===this._titles.length&&s--,o===s||(R.move(this._titles,o,s),this.update(),this._adjustCurrentForMove(o,s)),r)}removeTab(e){this.removeTabAt(this._titles.indexOf(e))}removeTabAt(e){this._releaseMouse();let i=R.removeAt(this._titles,e);!i||(i.changed.disconnect(this._onTitleChanged,this),i===this._previousTitle&&(this._previousTitle=null),this.update(),this._adjustCurrentForRemove(e,i))}clearTabs(){if(this._titles.length===0)return;this._releaseMouse();for(let r of this._titles)r.changed.disconnect(this._onTitleChanged,this);let e=this.currentIndex,i=this.currentTitle;this._currentIndex=-1,this._previousTitle=null,this._titles.length=0,this.update(),e!==-1&&this._currentChanged.emit({previousIndex:e,previousTitle:i,currentIndex:-1,currentTitle:null})}releaseMouse(){this._releaseMouse()}handleEvent(e){switch(e.type){case"mousedown":this._evtMouseDown(e);break;case"mousemove":this._evtMouseMove(e);break;case"mouseup":this._evtMouseUp(e);break;case"pointerdown":this._evtMouseDown(e);break;case"pointermove":this._evtMouseMove(e);break;case"pointerup":this._evtMouseUp(e);break;case"dblclick":this._evtDblClick(e);break;case"keydown":this._evtKeyDown(e);break;case"contextmenu":e.preventDefault(),e.stopPropagation();break}}onBeforeAttach(e){this.node.addEventListener("mousedown",this),this.node.addEventListener("pointerdown",this),this.node.addEventListener("dblclick",this)}onAfterDetach(e){this.node.removeEventListener("mousedown",this),this.node.removeEventListener("pointerdown",this),this.node.removeEventListener("dblclick",this),this._releaseMouse()}onUpdateRequest(e){let i=this._titles,r=this.renderer,o=this.currentTitle,s=new Array(i.length);for(let a=0,l=i.length;a<l;++a){let h=i[a],y=h===o,I=y?l:l-a-1;s[a]=r.renderTab({title:h,current:y,zIndex:I})}Re.render(s,this.contentNode)}_evtDblClick(e){if(!this.titlesEditable)return;let i=this.contentNode.children,r=R.findFirstIndex(i,a=>U.hitTest(a,e.clientX,e.clientY));if(r===-1)return;let o=this.titles[r],s=i[r].querySelector(".lm-TabBar-tabLabel");if(s&&s.contains(e.target)){let a=o.label||"",l=s.innerHTML;s.innerHTML="";let h=document.createElement("input");h.classList.add("lm-TabBar-tabInput"),h.value=a,s.appendChild(h);let y=()=>{h.removeEventListener("blur",y),s.innerHTML=l};h.addEventListener("dblclick",I=>I.stopPropagation()),h.addEventListener("blur",y),h.addEventListener("keydown",I=>{I.key==="Enter"?(h.value!==""&&(o.label=o.caption=h.value),y()):I.key==="Escape"&&y()}),h.select(),h.focus(),s.children.length>0&&s.children[0].focus()}}_evtKeyDown(e){e.preventDefault(),e.stopPropagation(),e.keyCode===27&&this._releaseMouse()}_evtMouseDown(e){if(e.button!==0&&e.button!==1||this._dragData)return;let i=this.addButtonEnabled&&this.addButtonNode.contains(e.target),r=this.contentNode.children,o=R.findFirstIndex(r,a=>U.hitTest(a,e.clientX,e.clientY));if(o===-1&&!i||(e.preventDefault(),e.stopPropagation(),this._dragData={tab:r[o],index:o,pressX:e.clientX,pressY:e.clientY,tabPos:-1,tabSize:-1,tabPressPos:-1,targetIndex:-1,tabLayout:null,contentRect:null,override:null,dragActive:!1,dragAborted:!1,detachRequested:!1},this.document.addEventListener("mouseup",this,!0),this.document.addEventListener("pointerup",this,!0),e.button===1||i))return;let s=r[o].querySelector(this.renderer.closeIconSelector);s&&s.contains(e.target)||(this.tabsMovable&&(this.document.addEventListener("mousemove",this,!0),this.document.addEventListener("pointermove",this,!0),this.document.addEventListener("keydown",this,!0),this.document.addEventListener("contextmenu",this,!0)),this.allowDeselect&&this.currentIndex===o?this.currentIndex=-1:this.currentIndex=o,this.currentIndex!==-1&&this._tabActivateRequested.emit({index:this.currentIndex,title:this.currentTitle}))}_evtMouseMove(e){let i=this._dragData;if(!i)return;e.preventDefault(),e.stopPropagation();let r=this.contentNode.children;if(!(!i.dragActive&&!ye.dragExceeded(i,e))){if(!i.dragActive){let o=i.tab.getBoundingClientRect();this._orientation==="horizontal"?(i.tabPos=i.tab.offsetLeft,i.tabSize=o.width,i.tabPressPos=i.pressX-o.left):(i.tabPos=i.tab.offsetTop,i.tabSize=o.height,i.tabPressPos=i.pressY-o.top),i.tabLayout=ye.snapTabLayout(r,this._orientation),i.contentRect=this.contentNode.getBoundingClientRect(),i.override=Ce.overrideCursor("default"),i.tab.classList.add("lm-mod-dragging"),this.addClass("lm-mod-dragging"),i.tab.classList.add("p-mod-dragging"),this.addClass("p-mod-dragging"),i.dragActive=!0}if(!i.detachRequested&&ye.detachExceeded(i,e)){i.detachRequested=!0;let o=i.index,s=e.clientX,a=e.clientY,l=r[o],h=this._titles[o];if(this._tabDetachRequested.emit({index:o,title:h,tab:l,clientX:s,clientY:a}),i.dragAborted)return}ye.layoutTabs(r,i,e,this._orientation)}}_evtMouseUp(e){if(e.button!==0&&e.button!==1)return;let i=this._dragData;if(!i)return;if(e.preventDefault(),e.stopPropagation(),this.document.removeEventListener("mousemove",this,!0),this.document.removeEventListener("mouseup",this,!0),this.document.removeEventListener("pointermove",this,!0),this.document.removeEventListener("pointerup",this,!0),this.document.removeEventListener("keydown",this,!0),this.document.removeEventListener("contextmenu",this,!0),!i.dragActive){if(this._dragData=null,this.addButtonEnabled&&this.addButtonNode.contains(e.target)){this._addRequested.emit(void 0);return}let s=this.contentNode.children,a=R.findFirstIndex(s,y=>U.hitTest(y,e.clientX,e.clientY));if(a!==i.index)return;let l=this._titles[a];if(!l.closable)return;if(e.button===1){this._tabCloseRequested.emit({index:a,title:l});return}let h=s[a].querySelector(this.renderer.closeIconSelector);if(h&&h.contains(e.target)){this._tabCloseRequested.emit({index:a,title:l});return}return}if(e.button!==0)return;ye.finalizeTabPosition(i,this._orientation),i.tab.classList.remove("lm-mod-dragging"),i.tab.classList.remove("p-mod-dragging");let r=ye.parseTransitionDuration(i.tab);setTimeout(()=>{if(i.dragAborted)return;this._dragData=null,ye.resetTabPositions(this.contentNode.children,this._orientation),i.override.dispose(),this.removeClass("lm-mod-dragging"),this.removeClass("p-mod-dragging");let o=i.index,s=i.targetIndex;s===-1||o===s||(R.move(this._titles,o,s),this._adjustCurrentForMove(o,s),this._tabMoved.emit({fromIndex:o,toIndex:s,title:this._titles[s]}),P.sendMessage(this,z.Msg.UpdateRequest))},r)}_releaseMouse(){let e=this._dragData;!e||(this._dragData=null,this.document.removeEventListener("mousemove",this,!0),this.document.removeEventListener("mouseup",this,!0),this.document.removeEventListener("pointermove",this,!0),this.document.removeEventListener("pointerup",this,!0),this.document.removeEventListener("keydown",this,!0),this.document.removeEventListener("contextmenu",this,!0),e.dragAborted=!0,e.dragActive&&(ye.resetTabPositions(this.contentNode.children,this._orientation),e.override.dispose(),e.tab.classList.remove("lm-mod-dragging"),this.removeClass("lm-mod-dragging"),e.tab.classList.remove("p-mod-dragging"),this.removeClass("p-mod-dragging")))}_adjustCurrentForInsert(e,i){let r=this.currentTitle,o=this._currentIndex,s=this.insertBehavior;if(s==="select-tab"||s==="select-tab-if-needed"&&o===-1){this._currentIndex=e,this._previousTitle=r,this._currentChanged.emit({previousIndex:o,previousTitle:r,currentIndex:e,currentTitle:i});return}o>=e&&this._currentIndex++}_adjustCurrentForMove(e,i){this._currentIndex===e?this._currentIndex=i:this._currentIndex<e&&this._currentIndex>=i?this._currentIndex++:this._currentIndex>e&&this._currentIndex<=i&&this._currentIndex--}_adjustCurrentForRemove(e,i){let r=this._currentIndex,o=this.removeBehavior;if(r!==e){r>e&&this._currentIndex--;return}if(this._titles.length===0){this._currentIndex=-1,this._currentChanged.emit({previousIndex:e,previousTitle:i,currentIndex:-1,currentTitle:null});return}if(o==="select-tab-after"){this._currentIndex=Math.min(e,this._titles.length-1),this._currentChanged.emit({previousIndex:e,previousTitle:i,currentIndex:this._currentIndex,currentTitle:this.currentTitle});return}if(o==="select-tab-before"){this._currentIndex=Math.max(0,e-1),this._currentChanged.emit({previousIndex:e,previousTitle:i,currentIndex:this._currentIndex,currentTitle:this.currentTitle});return}if(o==="select-previous-tab"){this._previousTitle?(this._currentIndex=this._titles.indexOf(this._previousTitle),this._previousTitle=null):this._currentIndex=Math.min(e,this._titles.length-1),this._currentChanged.emit({previousIndex:e,previousTitle:i,currentIndex:this._currentIndex,currentTitle:this.currentTitle});return}this._currentIndex=-1,this._currentChanged.emit({previousIndex:e,previousTitle:i,currentIndex:-1,currentTitle:null})}_onTitleChanged(e){this.update()}};(i=>{let r=class{constructor(){this.closeIconSelector=".lm-TabBar-tabCloseIcon";this._tabID=0;this._tabKeys=new WeakMap;this._uuid=++r._nInstance}renderTab(s){let a=s.title.caption,l=this.createTabKey(s),h=l,y=this.createTabStyle(s),I=this.createTabClass(s),_=this.createTabDataset(s),m=this.createTabARIA(s);return s.title.closable?Z.li({id:h,key:l,className:I,title:a,style:y,dataset:_,...m},this.renderIcon(s),this.renderLabel(s),this.renderCloseIcon(s)):Z.li({id:h,key:l,className:I,title:a,style:y,dataset:_,...m},this.renderIcon(s),this.renderLabel(s))}renderIcon(s){let{title:a}=s,l=this.createIconClass(s);return typeof a.icon=="string"?Z.div({className:l},a.iconLabel):Z.div({className:l},a.icon,a.iconLabel)}renderLabel(s){return Z.div({className:"lm-TabBar-tabLabel p-TabBar-tabLabel"},s.title.label)}renderCloseIcon(s){return Z.div({className:"lm-TabBar-tabCloseIcon p-TabBar-tabCloseIcon"})}createTabKey(s){let a=this._tabKeys.get(s.title);return a===void 0&&(a=`tab-key-${this._uuid}-${this._tabID++}`,this._tabKeys.set(s.title,a)),a}createTabStyle(s){return{zIndex:`${s.zIndex}`}}createTabClass(s){let a="lm-TabBar-tab";return a+=" p-TabBar-tab",s.title.className&&(a+=` ${s.title.className}`),s.title.closable&&(a+=" lm-mod-closable",a+=" p-mod-closable"),s.current&&(a+=" lm-mod-current",a+=" p-mod-current"),a}createTabDataset(s){return s.title.dataset}createTabARIA(s){return{role:"tab","aria-selected":s.current.toString()}}createIconClass(s){let a="lm-TabBar-tabIcon";a+=" p-TabBar-tabIcon";let l=s.title.iconClass;return l?`${a} ${l}`:a}},n=r;n._nInstance=0,i.Renderer=n,i.defaultRenderer=new n,i.addButtonSelector=".lm-TabBar-addButton"})(le||={});var ye;(I=>{I.DRAG_THRESHOLD=5,I.DETACH_THRESHOLD=20;function e(){let _=document.createElement("div"),m=document.createElement("ul");m.setAttribute("role","tablist"),m.className="lm-TabBar-content",m.classList.add("p-TabBar-content"),_.appendChild(m);let c=document.createElement("div");return c.className="lm-TabBar-addButton lm-mod-hidden",_.appendChild(c),_}I.createNode=e;function i(_){return _ instanceof Ke?_:new Ke(_)}I.asTitle=i;function r(_){let m=window.getComputedStyle(_);return 1e3*(parseFloat(m.transitionDuration)||0)}I.parseTransitionDuration=r;function o(_,m){let c=new Array(_.length);for(let p=0,f=_.length;p<f;++p){let w=_[p],x=window.getComputedStyle(w);m==="horizontal"?c[p]={pos:w.offsetLeft,size:w.offsetWidth,margin:parseFloat(x.marginLeft)||0}:c[p]={pos:w.offsetTop,size:w.offsetHeight,margin:parseFloat(x.marginTop)||0}}return c}I.snapTabLayout=o;function s(_,m){let c=Math.abs(m.clientX-_.pressX),p=Math.abs(m.clientY-_.pressY);return c>=5||p>=5}I.dragExceeded=s;function a(_,m){let c=_.contentRect;return m.clientX<c.left-20||m.clientX>=c.right+20||m.clientY<c.top-20||m.clientY>=c.bottom+20}I.detachExceeded=a;function l(_,m,c,p){let f,w,x,T;p==="horizontal"?(f=m.pressX,w=c.clientX-m.contentRect.left,x=c.clientX,T=m.contentRect.width):(f=m.pressY,w=c.clientY-m.contentRect.top,x=c.clientY,T=m.contentRect.height);let A=m.index,E=w-m.tabPressPos,S=E+m.tabSize;for(let v=0,M=_.length;v<M;++v){let d,u=m.tabLayout[v],b=u.pos+(u.size>>1);if(v<m.index&&E<b)d=`${m.tabSize+m.tabLayout[v+1].margin}px`,A=Math.min(A,v);else if(v>m.index&&S>b)d=`${-m.tabSize-u.margin}px`,A=Math.max(A,v);else if(v===m.index){let k=x-f,g=T-(m.tabPos+m.tabSize);d=`${Math.max(-m.tabPos,Math.min(k,g))}px`}else d="";p==="horizontal"?_[v].style.left=d:_[v].style.top=d}m.targetIndex=A}I.layoutTabs=l;function h(_,m){let c;m==="horizontal"?c=_.contentRect.width:c=_.contentRect.height;let p;if(_.targetIndex===_.index)p=0;else if(_.targetIndex>_.index){let x=_.tabLayout[_.targetIndex];p=x.pos+x.size-_.tabSize-_.tabPos}else p=_.tabLayout[_.targetIndex].pos-_.tabPos;let f=c-(_.tabPos+_.tabSize),w=Math.max(-_.tabPos,Math.min(p,f));m==="horizontal"?_.tab.style.left=`${w}px`:_.tab.style.top=`${w}px`}I.finalizeTabPosition=h;function y(_,m){F(_,c=>{m==="horizontal"?c.style.left="":c.style.top=""})}I.resetTabPositions=y})(ye||={});var qt=class extends Ie{constructor(e){super();this._spacing=4;this._dirty=!1;this._root=null;this._box=null;this._items=new Map;this.renderer=e.renderer,e.spacing!==void 0&&(this._spacing=ln.clampDimension(e.spacing)),this._document=e.document||document,this._hiddenMode=e.hiddenMode!==void 0?e.hiddenMode:z.HiddenMode.Display}dispose(){let e=this.iter();this._items.forEach(i=>{i.dispose()}),this._box=null,this._root=null,this._items.clear(),F(e,i=>{i.dispose()}),super.dispose()}get hiddenMode(){return this._hiddenMode}set hiddenMode(e){this._hiddenMode!==e&&(this._hiddenMode=e,F(this.tabBars(),i=>{i.titles.length>1&&i.titles.forEach(r=>{r.owner.hiddenMode=this._hiddenMode})}))}get spacing(){return this._spacing}set spacing(e){e=ln.clampDimension(e),this._spacing!==e&&(this._spacing=e,this.parent&&this.parent.fit())}get isEmpty(){return this._root===null}iter(){return this._root?this._root.iterAllWidgets():ce()}widgets(){return this._root?this._root.iterUserWidgets():ce()}selectedWidgets(){return this._root?this._root.iterSelectedWidgets():ce()}tabBars(){return this._root?this._root.iterTabBars():ce()}handles(){return this._root?this._root.iterHandles():ce()}moveHandle(e,i,r){let o=e.classList.contains("lm-mod-hidden");if(o=o||e.classList.contains("p-mod-hidden"),!this._root||o)return;let s=this._root.findSplitNode(e);if(!s)return;let a;s.node.orientation==="horizontal"?a=i-e.offsetLeft:a=r-e.offsetTop,a!==0&&(s.node.holdSizes(),De.adjust(s.node.sizers,s.index,a),this.parent&&this.parent.update())}saveLayout(){return this._root?(this._root.holdAllSizes(),{main:this._root.createConfig()}):{main:null}}restoreLayout(e){let i=new Set,r;e.main?r=Y.normalizeAreaConfig(e.main,i):r=null;let o=this.widgets(),s=this.tabBars(),a=this.handles();this._root=null,F(o,l=>{i.has(l)||(l.parent=null)}),F(s,l=>{l.dispose()}),F(a,l=>{l.parentNode&&l.parentNode.removeChild(l)}),i.forEach(l=>{l.parent=this.parent}),r?this._root=Y.realizeAreaConfig(r,{createTabBar:l=>this._createTabBar(),createHandle:()=>this._createHandle()},this._document):this._root=null,this.parent&&(i.forEach(l=>{this.attachWidget(l)}),this.parent.fit())}addWidget(e,i={}){let r=i.ref||null,o=i.mode||"tab-after",s=null;if(this._root&&r&&(s=this._root.findTabNode(r)),r&&!s)throw new Error("Reference widget is not in the layout.");switch(e.parent=this.parent,o){case"tab-after":this._insertTab(e,r,s,!0);break;case"tab-before":this._insertTab(e,r,s,!1);break;case"split-top":this._insertSplit(e,r,s,"vertical",!1);break;case"split-left":this._insertSplit(e,r,s,"horizontal",!1);break;case"split-right":this._insertSplit(e,r,s,"horizontal",!0);break;case"split-bottom":this._insertSplit(e,r,s,"vertical",!0);break}!this.parent||(this.attachWidget(e),this.parent.fit())}removeWidget(e){this._removeWidget(e),this.parent&&(this.detachWidget(e),this.parent.fit())}hitTestTabAreas(e,i){if(!this._root||!this.parent||!this.parent.isVisible)return null;this._box||(this._box=U.boxSizing(this.parent.node));let r=this.parent.node.getBoundingClientRect(),o=e-r.left-this._box.borderLeft,s=i-r.top-this._box.borderTop,a=this._root.hitTestTabNodes(o,s);if(!a)return null;let{tabBar:l,top:h,left:y,width:I,height:_}=a,m=this._box.borderLeft+this._box.borderRight,c=this._box.borderTop+this._box.borderBottom,p=r.width-m-(y+I),f=r.height-c-(h+_);return{tabBar:l,x:o,y:s,top:h,left:y,right:p,bottom:f,width:I,height:_}}init(){super.init(),F(this,e=>{this.attachWidget(e)}),F(this.handles(),e=>{this.parent.node.appendChild(e)}),this.parent.fit()}attachWidget(e){this.parent.node!==e.node.parentNode&&(this._items.set(e,new Xe(e)),this.parent.isAttached&&P.sendMessage(e,z.Msg.BeforeAttach),this.parent.node.appendChild(e.node),this.parent.isAttached&&P.sendMessage(e,z.Msg.AfterAttach))}detachWidget(e){if(this.parent.node!==e.node.parentNode)return;this.parent.isAttached&&P.sendMessage(e,z.Msg.BeforeDetach),this.parent.node.removeChild(e.node),this.parent.isAttached&&P.sendMessage(e,z.Msg.AfterDetach);let i=this._items.get(e);i&&(this._items.delete(e),i.dispose())}onBeforeShow(e){super.onBeforeShow(e),this.parent.update()}onBeforeAttach(e){super.onBeforeAttach(e),this.parent.fit()}onChildShown(e){this.parent.fit()}onChildHidden(e){this.parent.fit()}onResize(e){this.parent.isVisible&&this._update(e.width,e.height)}onUpdateRequest(e){this.parent.isVisible&&this._update(-1,-1)}onFitRequest(e){this.parent.isAttached&&this._fit()}_removeWidget(e){if(!this._root)return;let i=this._root.findTabNode(e);if(!i)return;if(Y.removeAria(e),i.tabBar.titles.length>1){if(i.tabBar.removeTab(e.title),this._hiddenMode===z.HiddenMode.Scale&&i.tabBar.titles.length==1){let m=i.tabBar.titles[0].owner;m.hiddenMode=z.HiddenMode.Display}return}if(i.tabBar.dispose(),this._root===i){this._root=null;return}this._root.holdAllSizes();let r=i.parent;i.parent=null;let o=R.removeFirstOf(r.children,i),s=R.removeAt(r.handles,o);if(R.removeAt(r.sizers,o),s.parentNode&&s.parentNode.removeChild(s),r.children.length>1){r.syncHandles();return}let a=r.parent;r.parent=null;let l=r.children[0],h=r.handles[0];if(r.children.length=0,r.handles.length=0,r.sizers.length=0,h.parentNode&&h.parentNode.removeChild(h),this._root===r){l.parent=null,this._root=l;return}let y=a,I=y.children.indexOf(r);if(l instanceof Y.TabLayoutNode){l.parent=y,y.children[I]=l;return}let _=R.removeAt(y.handles,I);R.removeAt(y.children,I),R.removeAt(y.sizers,I),_.parentNode&&_.parentNode.removeChild(_);for(let m=0,c=l.children.length;m<c;++m){let p=l.children[m],f=l.handles[m],w=l.sizers[m];R.insert(y.children,I+m,p),R.insert(y.handles,I+m,f),R.insert(y.sizers,I+m,w),p.parent=y}l.children.length=0,l.handles.length=0,l.sizers.length=0,l.parent=null,y.syncHandles()}_insertTab(e,i,r,o){if(e===i)return;if(!this._root){let a=new Y.TabLayoutNode(this._createTabBar());a.tabBar.addTab(e.title),this._root=a,Y.addAria(e,a.tabBar);return}r||(r=this._root.findFirstTabNode()),r.tabBar.titles.indexOf(e.title)===-1&&(this._removeWidget(e),e.hide());let s;if(i?s=r.tabBar.titles.indexOf(i.title):s=r.tabBar.currentIndex,this._hiddenMode===z.HiddenMode.Scale)if(r.tabBar.titles.length===0)e.hiddenMode=z.HiddenMode.Display;else if(r.tabBar.titles.length==1){let a=r.tabBar.titles[0].owner;a.hiddenMode=z.HiddenMode.Scale}else e.hiddenMode=z.HiddenMode.Scale;else e.hiddenMode=this._hiddenMode;r.tabBar.insertTab(s+(o?1:0),e.title),Y.addAria(e,r.tabBar)}_insertSplit(e,i,r,o,s){if(e===i&&r&&r.tabBar.titles.length===1)return;this._removeWidget(e);let a=new Y.TabLayoutNode(this._createTabBar());if(a.tabBar.addTab(e.title),Y.addAria(e,a.tabBar),!this._root){this._root=a;return}if(!r||!r.parent){let _=this._splitRoot(o),m=s?_.children.length:0;_.normalizeSizes();let c=Y.createSizer(r?1:Y.GOLDEN_RATIO);R.insert(_.children,m,a),R.insert(_.sizers,m,c),R.insert(_.handles,m,this._createHandle()),a.parent=_,_.normalizeSizes(),_.syncHandles();return}let l=r.parent;if(l.orientation===o){let _=l.children.indexOf(r);l.normalizeSizes();let m=l.sizers[_].sizeHint/=2,c=_+(s?1:0);R.insert(l.children,c,a),R.insert(l.sizers,c,Y.createSizer(m)),R.insert(l.handles,c,this._createHandle()),a.parent=l,l.syncHandles();return}let h=R.removeFirstOf(l.children,r),y=new Y.SplitLayoutNode(o);y.normalized=!0,y.children.push(r),y.sizers.push(Y.createSizer(.5)),y.handles.push(this._createHandle()),r.parent=y;let I=s?1:0;R.insert(y.children,I,a),R.insert(y.sizers,I,Y.createSizer(.5)),R.insert(y.handles,I,this._createHandle()),a.parent=y,y.syncHandles(),R.insert(l.children,h,y),y.parent=l}_splitRoot(e){let i=this._root;if(i instanceof Y.SplitLayoutNode&&i.orientation===e)return i;let r=this._root=new Y.SplitLayoutNode(e);return i&&(r.children.push(i),r.sizers.push(Y.createSizer(0)),r.handles.push(this._createHandle()),i.parent=r),r}_fit(){let e=0,i=0;if(this._root){let s=this._root.fit(this._spacing,this._items);e=s.minWidth,i=s.minHeight}let r=this._box=U.boxSizing(this.parent.node);e+=r.horizontalSum,i+=r.verticalSum;let o=this.parent.node.style;o.minWidth=`${e}px`,o.minHeight=`${i}px`,this._dirty=!0,this.parent.parent&&P.sendMessage(this.parent.parent,z.Msg.FitRequest),this._dirty&&P.sendMessage(this.parent,z.Msg.UpdateRequest)}_update(e,i){if(this._dirty=!1,!this._root)return;e<0&&(e=this.parent.node.offsetWidth),i<0&&(i=this.parent.node.offsetHeight),this._box||(this._box=U.boxSizing(this.parent.node));let r=this._box.paddingTop,o=this._box.paddingLeft,s=e-this._box.horizontalSum,a=i-this._box.verticalSum;this._root.update(r,o,s,a,this._spacing,this._items)}_createTabBar(){let e=this.renderer.createTabBar(this._document);return e.orientation="horizontal",this.parent&&(e.parent=this.parent,this.attachWidget(e)),e}_createHandle(){let e=this.renderer.createHandle(),i=e.style;return i.position="absolute",i.top="0",i.left="0",i.width="0",i.height="0",this.parent&&this.parent.node.appendChild(e),e}},Y;(_=>{_.GOLDEN_RATIO=.618;function t(m){let c=new Se;return c.sizeHint=m,c.size=m,c}_.createSizer=t;function e(m,c){let p;return m.type==="tab-area"?p=l(m,c):p=h(m,c),p}_.normalizeAreaConfig=e;function i(m,c,p){let f;return m.type==="tab-area"?f=y(m,c,p):f=I(m,c,p),f}_.realizeAreaConfig=i;class r{constructor(c){this.parent=null;this._top=0;this._left=0;this._width=0;this._height=0;let p=new Se,f=new Se;p.stretch=0,f.stretch=1,this.tabBar=c,this.sizers=[p,f]}get top(){return this._top}get left(){return this._left}get width(){return this._width}get height(){return this._height}iterAllWidgets(){return tn(Ot(this.tabBar),this.iterUserWidgets())}iterUserWidgets(){return We(this.tabBar.titles,c=>c.owner)}iterSelectedWidgets(){let c=this.tabBar.currentTitle;return c?Ot(c.owner):ce()}iterTabBars(){return Ot(this.tabBar)}iterHandles(){return ce()}findTabNode(c){return this.tabBar.titles.indexOf(c.title)!==-1?this:null}findSplitNode(c){return null}findFirstTabNode(){return this}hitTestTabNodes(c,p){return c<this._left||c>=this._left+this._width||p<this._top||p>=this._top+this._height?null:this}createConfig(){let c=this.tabBar.titles.map(f=>f.owner),p=this.tabBar.currentIndex;return{type:"tab-area",widgets:c,currentIndex:p}}holdAllSizes(){}fit(c,p){let f=0,w=0,x=1/0,T=1/0,A=p.get(this.tabBar),E=this.tabBar.currentTitle,S=E?p.get(E.owner):void 0,[v,M]=this.sizers;return A&&A.fit(),S&&S.fit(),A&&!A.isHidden?(f=Math.max(f,A.minWidth),w+=A.minHeight,v.minSize=A.minHeight,v.maxSize=A.maxHeight):(v.minSize=0,v.maxSize=0),S&&!S.isHidden?(f=Math.max(f,S.minWidth),w+=S.minHeight,M.minSize=S.minHeight,M.maxSize=1/0):(M.minSize=0,M.maxSize=1/0),{minWidth:f,minHeight:w,maxWidth:x,maxHeight:T}}update(c,p,f,w,x,T){this._top=p,this._left=c,this._width=f,this._height=w;let A=T.get(this.tabBar),E=this.tabBar.currentTitle,S=E?T.get(E.owner):void 0;if(De.calc(this.sizers,w),A&&!A.isHidden){let v=this.sizers[0].size;A.update(c,p,f,v),p+=v}if(S&&!S.isHidden){let v=this.sizers[1].size;S.update(c,p,f,v)}}}_.TabLayoutNode=r;class o{constructor(c){this.parent=null;this.normalized=!1;this.children=[];this.sizers=[];this.handles=[];this.orientation=c}iterAllWidgets(){let c=We(this.children,p=>p.iterAllWidgets());return new Fe(c)}iterUserWidgets(){let c=We(this.children,p=>p.iterUserWidgets());return new Fe(c)}iterSelectedWidgets(){let c=We(this.children,p=>p.iterSelectedWidgets());return new Fe(c)}iterTabBars(){let c=We(this.children,p=>p.iterTabBars());return new Fe(c)}iterHandles(){let c=We(this.children,p=>p.iterHandles());return tn(this.handles,new Fe(c))}findTabNode(c){for(let p=0,f=this.children.length;p<f;++p){let w=this.children[p].findTabNode(c);if(w)return w}return null}findSplitNode(c){let p=this.handles.indexOf(c);if(p!==-1)return{index:p,node:this};for(let f=0,w=this.children.length;f<w;++f){let x=this.children[f].findSplitNode(c);if(x)return x}return null}findFirstTabNode(){return this.children.length===0?null:this.children[0].findFirstTabNode()}hitTestTabNodes(c,p){for(let f=0,w=this.children.length;f<w;++f){let x=this.children[f].hitTestTabNodes(c,p);if(x)return x}return null}createConfig(){let c=this.orientation,p=this.createNormalizedSizes(),f=this.children.map(w=>w.createConfig());return{type:"split-area",orientation:c,children:f,sizes:p}}syncHandles(){F(this.handles,(c,p)=>{c.setAttribute("data-orientation",this.orientation),p===this.handles.length-1?(c.classList.add("lm-mod-hidden"),c.classList.add("p-mod-hidden")):(c.classList.remove("lm-mod-hidden"),c.classList.remove("p-mod-hidden"))})}holdSizes(){F(this.sizers,c=>{c.sizeHint=c.size})}holdAllSizes(){F(this.children,c=>c.holdAllSizes()),this.holdSizes()}normalizeSizes(){let c=this.sizers.length;if(c===0)return;this.holdSizes();let p=nn(this.sizers,(f,w)=>f+w.sizeHint,0);p===0?F(this.sizers,f=>{f.size=f.sizeHint=1/c}):F(this.sizers,f=>{f.size=f.sizeHint/=p}),this.normalized=!0}createNormalizedSizes(){let c=this.sizers.length;if(c===0)return[];let p=this.sizers.map(w=>w.size),f=nn(p,(w,x)=>w+x,0);return f===0?F(p,(w,x)=>{p[x]=1/c}):F(p,(w,x)=>{p[x]=w/f}),p}fit(c,p){let f=this.orientation==="horizontal",w=Math.max(0,this.children.length-1)*c,x=f?w:0,T=f?0:w,A=1/0,E=1/0;for(let S=0,v=this.children.length;S<v;++S){let M=this.children[S].fit(c,p);f?(T=Math.max(T,M.minHeight),x+=M.minWidth,this.sizers[S].minSize=M.minWidth):(x=Math.max(x,M.minWidth),T+=M.minHeight,this.sizers[S].minSize=M.minHeight)}return{minWidth:x,minHeight:T,maxWidth:A,maxHeight:E}}update(c,p,f,w,x,T){let A=this.orientation==="horizontal",E=Math.max(0,this.children.length-1)*x,S=Math.max(0,(A?f:w)-E);this.normalized&&(F(this.sizers,v=>{v.sizeHint*=S}),this.normalized=!1),De.calc(this.sizers,S);for(let v=0,M=this.children.length;v<M;++v){let d=this.children[v],u=this.sizers[v].size,b=this.handles[v].style;A?(d.update(c,p,u,w,x,T),c+=u,b.top=`${p}px`,b.left=`${c}px`,b.width=`${x}px`,b.height=`${w}px`,c+=x):(d.update(c,p,f,u,x,T),p+=u,b.top=`${p}px`,b.left=`${c}px`,b.width=`${f}px`,b.height=`${x}px`,p+=x)}}}_.SplitLayoutNode=o;function s(m,c){m.node.setAttribute("role","tabpanel");let p=c.renderer;if(p instanceof le.Renderer){let f=p.createTabKey({title:m.title,current:!1,zIndex:0});m.node.setAttribute("aria-labelledby",f)}}_.addAria=s;function a(m){m.node.removeAttribute("role"),m.node.removeAttribute("aria-labelledby")}_.removeAria=a;function l(m,c){if(m.widgets.length===0)return null;let p=[];if(F(m.widgets,w=>{c.has(w)||(c.add(w),p.push(w))}),p.length===0)return null;let f=m.currentIndex;return f!==-1&&(f<0||f>=p.length)&&(f=0),{type:"tab-area",widgets:p,currentIndex:f}}function h(m,c){let p=m.orientation,f=[],w=[];for(let x=0,T=m.children.length;x<T;++x){let A=e(m.children[x],c);!A||(A.type==="tab-area"||A.orientation!==p?(f.push(A),w.push(Math.abs(m.sizes[x]||0))):(f.push(...A.children),w.push(...A.sizes)))}return f.length===0?null:f.length===1?f[0]:{type:"split-area",orientation:p,children:f,sizes:w}}function y(m,c,p){let f=c.createTabBar(p);return F(m.widgets,w=>{w.hide(),f.addTab(w.title),_.addAria(w,f)}),f.currentIndex=m.currentIndex,new r(f)}function I(m,c,p){let f=new o(m.orientation);return F(m.children,(w,x)=>{let T=i(w,c,p),A=t(m.sizes[x]),E=c.createHandle();f.children.push(T),f.handles.push(E),f.sizers.push(A),T.parent=f}),f.syncHandles(),f.normalizeSizes(),f}})(Y||={});var Te=class extends z{constructor(e={}){super();this._drag=null;this._tabsMovable=!0;this._tabsConstrained=!1;this._addButtonEnabled=!1;this._pressData=null;this._layoutModified=new W(this);this._addRequested=new W(this);this.addClass("lm-DockPanel"),this.addClass("p-DockPanel"),this._document=e.document||document,this._mode=e.mode||"multiple-document",this._renderer=e.renderer||Te.defaultRenderer,this._edges=e.edges||$.DEFAULT_EDGES,e.tabsMovable!==void 0&&(this._tabsMovable=e.tabsMovable),e.tabsConstrained!==void 0&&(this._tabsConstrained=e.tabsConstrained),e.addButtonEnabled!==void 0&&(this._addButtonEnabled=e.addButtonEnabled),this.dataset.mode=this._mode;let i={createTabBar:()=>this._createTabBar(),createHandle:()=>this._createHandle()};this.layout=new qt({document:this._document,renderer:i,spacing:e.spacing,hiddenMode:e.hiddenMode}),this.overlay=e.overlay||new Te.Overlay,this.node.appendChild(this.overlay.node)}dispose(){this._releaseMouse(),this.overlay.hide(0),this._drag&&this._drag.dispose(),super.dispose()}get hiddenMode(){return this.layout.hiddenMode}set hiddenMode(e){this.layout.hiddenMode=e}get layoutModified(){return this._layoutModified}get addRequested(){return this._addRequested}get renderer(){return this.layout.renderer}get spacing(){return this.layout.spacing}set spacing(e){this.layout.spacing=e}get mode(){return this._mode}set mode(e){if(this._mode===e)return;this._mode=e,this.dataset.mode=e;let i=this.layout;switch(e){case"multiple-document":F(i.tabBars(),r=>{r.show()});break;case"single-document":i.restoreLayout($.createSingleDocumentConfig(this));break;default:throw"unreachable"}P.postMessage(this,$.LayoutModified)}get tabsMovable(){return this._tabsMovable}set tabsMovable(e){this._tabsMovable=e,F(this.tabBars(),i=>{i.tabsMovable=e})}get tabsConstrained(){return this._tabsConstrained}set tabsConstrained(e){this._tabsConstrained=e}get addButtonEnabled(){return this._addButtonEnabled}set addButtonEnabled(e){this._addButtonEnabled=e,F(this.tabBars(),i=>{i.addButtonEnabled=e})}get isEmpty(){return this.layout.isEmpty}widgets(){return this.layout.widgets()}selectedWidgets(){return this.layout.selectedWidgets()}tabBars(){return this.layout.tabBars()}handles(){return this.layout.handles()}selectWidget(e){let i=ft(this.tabBars(),r=>r.titles.indexOf(e.title)!==-1);if(!i)throw new Error("Widget is not contained in the dock panel.");i.currentTitle=e.title}activateWidget(e){this.selectWidget(e),e.activate()}saveLayout(){return this.layout.saveLayout()}restoreLayout(e){this._mode="multiple-document",this.layout.restoreLayout(e),(j.IS_EDGE||j.IS_IE)&&P.flush(),P.postMessage(this,$.LayoutModified)}addWidget(e,i={}){this._mode==="single-document"?this.layout.addWidget(e):this.layout.addWidget(e,i),P.postMessage(this,$.LayoutModified)}processMessage(e){e.type==="layout-modified"?this._layoutModified.emit(void 0):super.processMessage(e)}handleEvent(e){switch(e.type){case"lm-dragenter":this._evtDragEnter(e);break;case"lm-dragleave":this._evtDragLeave(e);break;case"lm-dragover":this._evtDragOver(e);break;case"lm-drop":this._evtDrop(e);break;case"mousedown":this._evtMouseDown(e);break;case"mousemove":this._evtMouseMove(e);break;case"mouseup":this._evtMouseUp(e);break;case"pointerdown":this._evtMouseDown(e);break;case"pointermove":this._evtMouseMove(e);break;case"pointerup":this._evtMouseUp(e);break;case"keydown":this._evtKeyDown(e);break;case"contextmenu":e.preventDefault(),e.stopPropagation();break}}onBeforeAttach(e){this.node.addEventListener("lm-dragenter",this),this.node.addEventListener("lm-dragleave",this),this.node.addEventListener("lm-dragover",this),this.node.addEventListener("lm-drop",this),this.node.addEventListener("mousedown",this),this.node.addEventListener("pointerdown",this)}onAfterDetach(e){this.node.removeEventListener("lm-dragenter",this),this.node.removeEventListener("lm-dragleave",this),this.node.removeEventListener("lm-dragover",this),this.node.removeEventListener("lm-drop",this),this.node.removeEventListener("mousedown",this),this.node.removeEventListener("pointerdown",this),this._releaseMouse()}onChildAdded(e){$.isGeneratedTabBarProperty.get(e.child)||(e.child.addClass("lm-DockPanel-widget"),e.child.addClass("p-DockPanel-widget"))}onChildRemoved(e){$.isGeneratedTabBarProperty.get(e.child)||(e.child.removeClass("lm-DockPanel-widget"),e.child.removeClass("p-DockPanel-widget"),P.postMessage(this,$.LayoutModified))}_evtDragEnter(e){e.mimeData.hasData("application/vnd.lumino.widget-factory")&&(e.preventDefault(),e.stopPropagation())}_evtDragLeave(e){e.preventDefault(),!(this._tabsConstrained&&e.source!==this)&&(e.stopPropagation(),this.overlay.hide(1))}_evtDragOver(e){e.preventDefault(),this._tabsConstrained&&e.source!==this||this._showOverlay(e.clientX,e.clientY)==="invalid"?e.dropAction="none":(e.stopPropagation(),e.dropAction=e.proposedAction)}_evtDrop(e){if(e.preventDefault(),this.overlay.hide(0),e.proposedAction==="none"){e.dropAction="none";return}let{clientX:i,clientY:r}=e,{zone:o,target:s}=$.findDropTarget(this,i,r,this._edges);if(this._tabsConstrained&&e.source!==this||o==="invalid"){e.dropAction="none";return}let l=e.mimeData.getData("application/vnd.lumino.widget-factory");if(typeof l!="function"){e.dropAction="none";return}let h=l();if(!(h instanceof z)){e.dropAction="none";return}if(h.contains(this)){e.dropAction="none";return}let y=s?$.getDropRef(s.tabBar):null;switch(o){case"root-all":this.addWidget(h);break;case"root-top":this.addWidget(h,{mode:"split-top"});break;case"root-left":this.addWidget(h,{mode:"split-left"});break;case"root-right":this.addWidget(h,{mode:"split-right"});break;case"root-bottom":this.addWidget(h,{mode:"split-bottom"});break;case"widget-all":this.addWidget(h,{mode:"tab-after",ref:y});break;case"widget-top":this.addWidget(h,{mode:"split-top",ref:y});break;case"widget-left":this.addWidget(h,{mode:"split-left",ref:y});break;case"widget-right":this.addWidget(h,{mode:"split-right",ref:y});break;case"widget-bottom":this.addWidget(h,{mode:"split-bottom",ref:y});break;case"widget-tab":this.addWidget(h,{mode:"tab-after",ref:y});break;default:throw"unreachable"}e.dropAction=e.proposedAction,e.stopPropagation(),this.activateWidget(h)}_evtKeyDown(e){e.preventDefault(),e.stopPropagation(),e.keyCode===27&&(this._releaseMouse(),P.postMessage(this,$.LayoutModified))}_evtMouseDown(e){if(e.button!==0)return;let i=this.layout,r=e.target,o=ft(i.handles(),I=>I.contains(r));if(!o)return;e.preventDefault(),e.stopPropagation(),this._document.addEventListener("keydown",this,!0),this._document.addEventListener("mouseup",this,!0),this._document.addEventListener("mousemove",this,!0),this._document.addEventListener("pointerup",this,!0),this._document.addEventListener("pointermove",this,!0),this._document.addEventListener("contextmenu",this,!0);let s=o.getBoundingClientRect(),a=e.clientX-s.left,l=e.clientY-s.top,h=window.getComputedStyle(o),y=Ce.overrideCursor(h.cursor,this._document);this._pressData={handle:o,deltaX:a,deltaY:l,override:y}}_evtMouseMove(e){if(!this._pressData)return;e.preventDefault(),e.stopPropagation();let i=this.node.getBoundingClientRect(),r=e.clientX-i.left-this._pressData.deltaX,o=e.clientY-i.top-this._pressData.deltaY;this.layout.moveHandle(this._pressData.handle,r,o)}_evtMouseUp(e){e.button===0&&(e.preventDefault(),e.stopPropagation(),this._releaseMouse(),P.postMessage(this,$.LayoutModified))}_releaseMouse(){!this._pressData||(this._pressData.override.dispose(),this._pressData=null,this._document.removeEventListener("keydown",this,!0),this._document.removeEventListener("mouseup",this,!0),this._document.removeEventListener("mousemove",this,!0),this._document.removeEventListener("pointerup",this,!0),this._document.removeEventListener("pointermove",this,!0),this._document.removeEventListener("contextmenu",this,!0))}_showOverlay(e,i){let{zone:r,target:o}=$.findDropTarget(this,e,i,this._edges);if(r==="invalid")return this.overlay.hide(100),r;let s,a,l,h,y=U.boxSizing(this.node),I=this.node.getBoundingClientRect();switch(r){case"root-all":s=y.paddingTop,a=y.paddingLeft,l=y.paddingRight,h=y.paddingBottom;break;case"root-top":s=y.paddingTop,a=y.paddingLeft,l=y.paddingRight,h=I.height*$.GOLDEN_RATIO;break;case"root-left":s=y.paddingTop,a=y.paddingLeft,l=I.width*$.GOLDEN_RATIO,h=y.paddingBottom;break;case"root-right":s=y.paddingTop,a=I.width*$.GOLDEN_RATIO,l=y.paddingRight,h=y.paddingBottom;break;case"root-bottom":s=I.height*$.GOLDEN_RATIO,a=y.paddingLeft,l=y.paddingRight,h=y.paddingBottom;break;case"widget-all":s=o.top,a=o.left,l=o.right,h=o.bottom;break;case"widget-top":s=o.top,a=o.left,l=o.right,h=o.bottom+o.height/2;break;case"widget-left":s=o.top,a=o.left,l=o.right+o.width/2,h=o.bottom;break;case"widget-right":s=o.top,a=o.left+o.width/2,l=o.right,h=o.bottom;break;case"widget-bottom":s=o.top+o.height/2,a=o.left,l=o.right,h=o.bottom;break;case"widget-tab":let _=o.tabBar.node.getBoundingClientRect().height;s=o.top,a=o.left,l=o.right,h=o.bottom+o.height-_;break;default:throw"unreachable"}return this.overlay.show({top:s,left:a,right:l,bottom:h}),r}_createTabBar(){let e=this._renderer.createTabBar(this._document);return $.isGeneratedTabBarProperty.set(e,!0),this._mode==="single-document"&&e.hide(),e.tabsMovable=this._tabsMovable,e.allowDeselect=!1,e.addButtonEnabled=this._addButtonEnabled,e.removeBehavior="select-previous-tab",e.insertBehavior="select-tab-if-needed",e.tabMoved.connect(this._onTabMoved,this),e.currentChanged.connect(this._onCurrentChanged,this),e.tabCloseRequested.connect(this._onTabCloseRequested,this),e.tabDetachRequested.connect(this._onTabDetachRequested,this),e.tabActivateRequested.connect(this._onTabActivateRequested,this),e.addRequested.connect(this._onTabAddRequested,this),e}_createHandle(){return this._renderer.createHandle()}_onTabMoved(){P.postMessage(this,$.LayoutModified)}_onCurrentChanged(e,i){let{previousTitle:r,currentTitle:o}=i;r&&r.owner.hide(),o&&o.owner.show(),(j.IS_EDGE||j.IS_IE)&&P.flush(),P.postMessage(this,$.LayoutModified)}_onTabAddRequested(e){this._addRequested.emit(e)}_onTabActivateRequested(e,i){i.title.owner.activate()}_onTabCloseRequested(e,i){i.title.owner.close()}_onTabDetachRequested(e,i){if(this._drag)return;e.releaseMouse();let{title:r,tab:o,clientX:s,clientY:a}=i,l=new ui.MimeData,h=()=>r.owner;l.setData("application/vnd.lumino.widget-factory",h);let y=o.cloneNode(!0);this._drag=new Ce({document:this._document,mimeData:l,dragImage:y,proposedAction:"move",supportedActions:"move",source:this}),o.classList.add("lm-mod-hidden"),o.classList.add("p-mod-hidden");let I=()=>{this._drag=null,o.classList.remove("lm-mod-hidden"),o.classList.remove("p-mod-hidden")};this._drag.start(s,a).then(I)}};(i=>{class n{constructor(){this._timer=-1;this._hidden=!0;this.node=document.createElement("div"),this.node.classList.add("lm-DockPanel-overlay"),this.node.classList.add("lm-mod-hidden"),this.node.classList.add("p-DockPanel-overlay"),this.node.classList.add("p-mod-hidden"),this.node.style.position="absolute"}show(o){let s=this.node.style;s.top=`${o.top}px`,s.left=`${o.left}px`,s.right=`${o.right}px`,s.bottom=`${o.bottom}px`,clearTimeout(this._timer),this._timer=-1,this._hidden&&(this._hidden=!1,this.node.classList.remove("lm-mod-hidden"),this.node.classList.remove("p-mod-hidden"))}hide(o){if(!this._hidden){if(o<=0){clearTimeout(this._timer),this._timer=-1,this._hidden=!0,this.node.classList.add("lm-mod-hidden"),this.node.classList.add("p-mod-hidden");return}this._timer===-1&&(this._timer=window.setTimeout(()=>{this._timer=-1,this._hidden=!0,this.node.classList.add("lm-mod-hidden"),this.node.classList.add("p-mod-hidden")},o))}}}i.Overlay=n;class t{createTabBar(o){let s=new le({document:o});return s.addClass("lm-DockPanel-tabBar"),s.addClass("p-DockPanel-tabBar"),s}createHandle(){let o=document.createElement("div");return o.className="lm-DockPanel-handle",o.classList.add("p-DockPanel-handle"),o}}i.Renderer=t,i.defaultRenderer=new t})(Te||={});var $;(a=>{a.GOLDEN_RATIO=.618,a.DEFAULT_EDGES={top:12,right:40,bottom:40,left:40},a.LayoutModified=new qe("layout-modified"),a.isGeneratedTabBarProperty=new ie({name:"isGeneratedTabBar",create:()=>!1});function r(l){if(l.isEmpty)return{main:null};let h=ni(l.widgets()),y=l.selectedWidgets().next(),I=y?h.indexOf(y):-1;return{main:{type:"tab-area",widgets:h,currentIndex:I}}}a.createSingleDocumentConfig=r;function o(l,h,y,I){if(!U.hitTest(l.node,h,y))return{zone:"invalid",target:null};let _=l.layout;if(_.isEmpty)return{zone:"root-all",target:null};if(l.mode==="multiple-document"){let v=l.node.getBoundingClientRect(),M=h-v.left+1,d=y-v.top+1,u=v.right-h,b=v.bottom-y;switch(Math.min(d,u,b,M)){case d:if(d<I.top)return{zone:"root-top",target:null};break;case u:if(u<I.right)return{zone:"root-right",target:null};break;case b:if(b<I.bottom)return{zone:"root-bottom",target:null};break;case M:if(M<I.left)return{zone:"root-left",target:null};break;default:throw"unreachable"}}let m=_.hitTestTabAreas(h,y);if(!m)return{zone:"invalid",target:null};if(l.mode==="single-document")return{zone:"widget-all",target:m};let c=m.x-m.left+1,p=m.y-m.top+1,f=m.left+m.width-m.x,w=m.top+m.height-m.y,x=m.tabBar.node.getBoundingClientRect().height;if(p<x)return{zone:"widget-tab",target:m};let T=Math.round(m.width/3),A=Math.round(m.height/3);if(c>T&&f>T&&p>A&&w>A)return{zone:"widget-all",target:m};c/=T,p/=A,f/=T,w/=A;let E=Math.min(c,p,f,w),S;switch(E){case c:S="widget-left";break;case p:S="widget-top";break;case f:S="widget-right";break;case w:S="widget-bottom";break;default:throw"unreachable"}return{zone:S,target:m}}a.findDropTarget=o;function s(l){return l.titles.length===0?null:l.currentTitle?l.currentTitle.owner:l.titles[l.titles.length-1].owner}a.getDropRef=s})($||={});var Ml;(t=>{function n(e){let i=document.body,r=o=>{o.preventDefault(),o.stopPropagation(),o.clipboardData.setData("text",e),i.removeEventListener("copy",r,!0)};i.addEventListener("copy",r,!0),document.execCommand("copy")}t.copyText=n})(Ml||={});var un;(r=>{function n(o){let s=window.getComputedStyle(o),a=parseFloat(s.borderTopWidth)||0,l=parseFloat(s.borderLeftWidth)||0,h=parseFloat(s.borderRightWidth)||0,y=parseFloat(s.borderBottomWidth)||0,I=parseFloat(s.paddingTop)||0,_=parseFloat(s.paddingLeft)||0,m=parseFloat(s.paddingRight)||0,c=parseFloat(s.paddingBottom)||0,p=l+_+m+h,f=a+I+c+y;return{borderTop:a,borderLeft:l,borderRight:h,borderBottom:y,paddingTop:I,paddingLeft:_,paddingRight:m,paddingBottom:c,horizontalSum:p,verticalSum:f}}r.boxSizing=n;function t(o){let s=window.getComputedStyle(o),a=parseFloat(s.minWidth)||0,l=parseFloat(s.minHeight)||0,h=parseFloat(s.maxWidth)||1/0,y=parseFloat(s.maxHeight)||1/0;return h=Math.max(a,h),y=Math.max(l,y),{minWidth:a,minHeight:l,maxWidth:h,maxHeight:y}}r.sizeLimits=t;function e(o,s,a){let l=o.getBoundingClientRect();return s>=l.left&&s<l.right&&a>=l.top&&a<l.bottom}r.hitTest=e;function i(o,s){let a=o.getBoundingClientRect(),l=s.getBoundingClientRect();if(!(l.top<=a.top&&l.bottom>=a.bottom)){if(l.top<a.top&&l.height<=a.height){o.scrollTop-=a.top-l.top;return}if(l.bottom>a.bottom&&l.height>=a.height){o.scrollTop-=a.top-l.top;return}if(l.top<a.top&&l.height>a.height){o.scrollTop-=a.bottom-l.bottom;return}if(l.bottom>a.bottom&&l.height<a.height){o.scrollTop-=a.bottom-l.bottom;return}}}r.scrollIntoViewIfNeeded=i})(un||={});var El;(o=>{o.IS_MAC=!!navigator.platform.match(/Mac/i),o.IS_WIN=!!navigator.platform.match(/Win/i),o.IS_IE=/Trident/.test(navigator.userAgent),o.IS_EDGE=/Edge/.test(navigator.userAgent);function r(s){return o.IS_MAC?s.metaKey:s.ctrlKey}o.accelKey=r})(El||={});var kl;(i=>{function n(r){if(r in we.specificityCache)return we.specificityCache[r];let o=we.calculateSingle(r);return we.specificityCache[r]=o}i.calculateSpecificity=n;function t(r){if(r in we.validityCache)return we.validityCache[r];let o=!0;try{we.testElem.querySelector(r)}catch{o=!1}return we.validityCache[r]=o}i.isValid=t;function e(r,o){return we.protoMatchFunc.call(r,o)}i.matches=e})(kl||={});var we;(m=>{m.specificityCache=Object.create(null),m.validityCache=Object.create(null),m.testElem=document.createElement("div"),m.protoMatchFunc=(()=>{let c=Element.prototype;return c.matches||c.matchesSelector||c.mozMatchesSelector||c.msMatchesSelector||c.oMatchesSelector||c.webkitMatchesSelector||function(p){let f=this,w=f.ownerDocument?f.ownerDocument.querySelectorAll(p):[];return Array.prototype.indexOf.call(w,f)!==-1}})();function r(c){c=c.split(",",1)[0];let p=0,f=0,w=0;function x(T){let A=c.match(T);return A===null?!1:(c=c.slice(A[0].length),!0)}for(c=c.replace(_," $1 ");c.length>0;){if(x(o)){p++;continue}if(x(s)){f++;continue}if(x(a)){f++;continue}if(x(h)){w++;continue}if(x(y)){f++;continue}if(x(l)){w++;continue}if(!x(I))return 0}return p=Math.min(p,255),f=Math.min(f,255),w=Math.min(w,255),p<<16|f<<8|w}m.calculateSingle=r;let o=/^#[^\s\+>~#\.\[:]+/,s=/^\.[^\s\+>~#\.\[:]+/,a=/^\[[^\]]+\]/,l=/^[^\s\+>~#\.\[:]+/,h=/^(::[^\s\+>~#\.\[:]+|:first-line|:first-letter|:before|:after)/,y=/^:[^\s\+>~#\.\[:]+/,I=/^[\s\+>~\*]+/,_=/:not\(([^\)]+)\)/g})(we||={});var et=class{constructor(t){this.type="text";this.content=t}},yt=class{constructor(t,e,i,r){this.type="element";this.tag=t,this.attrs=e,this.children=i,this.renderer=r}};function te(n){let t={},e,i=[];for(let o=1,s=arguments.length;o<s;++o){let a=arguments[o];typeof a=="string"?i.push(new et(a)):a instanceof et||a instanceof yt?i.push(a):a instanceof Array?r(i,a):(o===1||o===2)&&a&&typeof a=="object"&&("render"in a?e=a:t=a)}return new yt(n,t,i,e);function r(o,s){for(let a of s)typeof a=="string"?o.push(new et(a)):(a instanceof et||a instanceof yt)&&o.push(a)}}(C=>(C.a=C.bind(void 0,"a"),C.abbr=C.bind(void 0,"abbr"),C.address=C.bind(void 0,"address"),C.area=C.bind(void 0,"area"),C.article=C.bind(void 0,"article"),C.aside=C.bind(void 0,"aside"),C.audio=C.bind(void 0,"audio"),C.b=C.bind(void 0,"b"),C.bdi=C.bind(void 0,"bdi"),C.bdo=C.bind(void 0,"bdo"),C.blockquote=C.bind(void 0,"blockquote"),C.br=C.bind(void 0,"br"),C.button=C.bind(void 0,"button"),C.canvas=C.bind(void 0,"canvas"),C.caption=C.bind(void 0,"caption"),C.cite=C.bind(void 0,"cite"),C.code=C.bind(void 0,"code"),C.col=C.bind(void 0,"col"),C.colgroup=C.bind(void 0,"colgroup"),C.data=C.bind(void 0,"data"),C.datalist=C.bind(void 0,"datalist"),C.dd=C.bind(void 0,"dd"),C.del=C.bind(void 0,"del"),C.dfn=C.bind(void 0,"dfn"),C.div=C.bind(void 0,"div"),C.dl=C.bind(void 0,"dl"),C.dt=C.bind(void 0,"dt"),C.em=C.bind(void 0,"em"),C.embed=C.bind(void 0,"embed"),C.fieldset=C.bind(void 0,"fieldset"),C.figcaption=C.bind(void 0,"figcaption"),C.figure=C.bind(void 0,"figure"),C.footer=C.bind(void 0,"footer"),C.form=C.bind(void 0,"form"),C.h1=C.bind(void 0,"h1"),C.h2=C.bind(void 0,"h2"),C.h3=C.bind(void 0,"h3"),C.h4=C.bind(void 0,"h4"),C.h5=C.bind(void 0,"h5"),C.h6=C.bind(void 0,"h6"),C.header=C.bind(void 0,"header"),C.hr=C.bind(void 0,"hr"),C.i=C.bind(void 0,"i"),C.iframe=C.bind(void 0,"iframe"),C.img=C.bind(void 0,"img"),C.input=C.bind(void 0,"input"),C.ins=C.bind(void 0,"ins"),C.kbd=C.bind(void 0,"kbd"),C.label=C.bind(void 0,"label"),C.legend=C.bind(void 0,"legend"),C.li=C.bind(void 0,"li"),C.main=C.bind(void 0,"main"),C.map=C.bind(void 0,"map"),C.mark=C.bind(void 0,"mark"),C.meter=C.bind(void 0,"meter"),C.nav=C.bind(void 0,"nav"),C.noscript=C.bind(void 0,"noscript"),C.object=C.bind(void 0,"object"),C.ol=C.bind(void 0,"ol"),C.optgroup=C.bind(void 0,"optgroup"),C.option=C.bind(void 0,"option"),C.output=C.bind(void 0,"output"),C.p=C.bind(void 0,"p"),C.param=C.bind(void 0,"param"),C.pre=C.bind(void 0,"pre"),C.progress=C.bind(void 0,"progress"),C.q=C.bind(void 0,"q"),C.rp=C.bind(void 0,"rp"),C.rt=C.bind(void 0,"rt"),C.ruby=C.bind(void 0,"ruby"),C.s=C.bind(void 0,"s"),C.samp=C.bind(void 0,"samp"),C.section=C.bind(void 0,"section"),C.select=C.bind(void 0,"select"),C.small=C.bind(void 0,"small"),C.source=C.bind(void 0,"source"),C.span=C.bind(void 0,"span"),C.strong=C.bind(void 0,"strong"),C.sub=C.bind(void 0,"sub"),C.summary=C.bind(void 0,"summary"),C.sup=C.bind(void 0,"sup"),C.table=C.bind(void 0,"table"),C.tbody=C.bind(void 0,"tbody"),C.td=C.bind(void 0,"td"),C.textarea=C.bind(void 0,"textarea"),C.tfoot=C.bind(void 0,"tfoot"),C.th=C.bind(void 0,"th"),C.thead=C.bind(void 0,"thead"),C.time=C.bind(void 0,"time"),C.title=C.bind(void 0,"title"),C.tr=C.bind(void 0,"tr"),C.track=C.bind(void 0,"track"),C.u=C.bind(void 0,"u"),C.ul=C.bind(void 0,"ul"),C.var_=C.bind(void 0,"var"),C.video=C.bind(void 0,"video"),C.wbr=C.bind(void 0,"wbr")))(te||={});var Ll;(e=>{function n(i){return Qe.createDOMNode(i)}e.realize=n;function t(i,r){let o=Qe.hostMap.get(r)||[],s=Qe.asContentArray(i);Qe.hostMap.set(r,s),Qe.updateContent(r,o,s)}e.render=t})(Ll||={});var Qe;(m=>{m.hostMap=new WeakMap;function t(c){return c?c instanceof Array?c:[c]:[]}m.asContentArray=t;function e(c){let p=arguments[1]||null,f=arguments[2]||null;if(p)p.insertBefore(e(c),f);else{if(c.type==="text")return document.createTextNode(c.content);if(p=document.createElement(c.tag),s(p,c.attrs),c.renderer)return c.renderer.render(p,{attrs:c.attrs,children:c.children}),p;for(let w=0,x=c.children.length;w<x;++w)e(c.children[w],p)}return p}m.createDOMNode=e;function i(c,p,f){if(p===f)return;let w=_(c,p),x=p.slice(),T=c.firstChild,A=f.length;for(let E=0;E<A;++E){if(E>=x.length){e(f[E],c);continue}let S=x[E],v=f[E];if(S===v){T=T.nextSibling;continue}if(S.type==="text"&&v.type==="text"){T.textContent!==v.content&&(T.textContent=v.content),T=T.nextSibling;continue}if(S.type==="text"||v.type==="text"){R.insert(x,E,v),e(v,c,T);continue}if(!S.renderer!=!v.renderer){R.insert(x,E,v),e(v,c,T);continue}let M=v.attrs.key;if(M&&M in w){let u=w[M];u.vNode!==S&&(R.move(x,x.indexOf(u.vNode,E+1),E),c.insertBefore(u.element,T),S=u.vNode,T=u.element)}if(S===v){T=T.nextSibling;continue}let d=S.attrs.key;if(d&&d!==M){R.insert(x,E,v),e(v,c,T);continue}if(S.tag!==v.tag){R.insert(x,E,v),e(v,c,T);continue}a(T,S.attrs,v.attrs),v.renderer?v.renderer.render(T,{attrs:v.attrs,children:v.children}):i(T,S.children,v.children),T=T.nextSibling}r(c,x,A,!0)}m.updateContent=i;function r(c,p,f,w){for(let x=p.length-1;x>=f;--x){let T=p[x],A=w?c.lastChild:c.childNodes[x];T.type==="text"||(T.renderer&&T.renderer.unrender?T.renderer.unrender(A,{attrs:T.attrs,children:T.children}):r(A,T.children,0,!1)),w&&c.removeChild(A)}}let o={key:!0,className:!0,htmlFor:!0,dataset:!0,style:!0};function s(c,p){for(let f in p)f in o||(f.substr(0,2)==="on"?c[f]=p[f]:c.setAttribute(f,p[f]));p.className!==void 0&&c.setAttribute("class",p.className),p.htmlFor!==void 0&&c.setAttribute("for",p.htmlFor),p.dataset&&l(c,p.dataset),p.style&&y(c,p.style)}function a(c,p,f){if(p===f)return;let w;for(w in p)w in o||w in f||(w.substr(0,2)==="on"?c[w]=null:c.removeAttribute(w));for(w in f)w in o||p[w]===f[w]||(w.substr(0,2)==="on"?c[w]=f[w]:c.setAttribute(w,f[w]));p.className!==f.className&&(f.className!==void 0?c.setAttribute("class",f.className):c.removeAttribute("class")),p.htmlFor!==f.htmlFor&&(f.htmlFor!==void 0?c.setAttribute("for",f.htmlFor):c.removeAttribute("for")),p.dataset!==f.dataset&&h(c,p.dataset||{},f.dataset||{}),p.style!==f.style&&I(c,p.style||{},f.style||{})}function l(c,p){for(let f in p)c.setAttribute(`data-${f}`,p[f])}function h(c,p,f){for(let w in p)w in f||c.removeAttribute(`data-${w}`);for(let w in f)p[w]!==f[w]&&c.setAttribute(`data-${w}`,f[w])}function y(c,p){let f=c.style,w;for(w in p)f[w]=p[w]}function I(c,p,f){let w=c.style,x;for(x in p)x in f||(w[x]="");for(x in f)p[x]!==f[x]&&(w[x]=f[x])}function _(c,p){let f=c.firstChild,w=Object.create(null);for(let x of p)x.type==="element"&&x.attrs.key&&(w[x.attrs.key]={vNode:x,element:f}),f=f.nextSibling;return w}})(Qe||={});var Kt={Config:"config",Label:"label"},Cl="untitled",Nt=class extends le.Renderer{constructor(t){super(),this.maximized=t}renderLabel(t){return te.span({className:"p-TabBar-tabLabel",id:Kt.Label},t.title.label||Cl)}renderOther(t,e){return te.span({},e.label||"untitled")}renderInert(){return te.div()}renderTab(t){let e=t.title.caption,i=this.createTabKey(t),r=this.createTabStyle(t),o=this.createTabClass(t),s=this.createTabDataset(t),a=[];return t.onClick&&a.push(te.div({onclick:t.onClick,class:"bookmarks-button"},te.div({class:"bookmarks"}))),te.li({key:i,className:o,title:e,style:r,dataset:s},this.renderDragHandle(),...a,this.renderLabel(t),this.renderCloseIcon())}renderDragHandle(){return te.div({className:"drag-handle"})}renderCloseIcon(){return te.div({className:"lm-TabBar-tabCloseIcon p-TabBar-tabCloseIcon"})}};var ne=$e(vt());function Oe(){return hn.keyboardLayout}var cn=function(){function n(t,e,i){i===void 0&&(i=[]),this.name=t,this._codes=e,this._keys=n.extractKeys(e),this._modifierKeys=n.convertToKeySet(i)}return n.prototype.keys=function(){return Object.keys(this._keys)},n.prototype.isValidKey=function(t){return t in this._keys},n.prototype.isModifierKey=function(t){return t in this._modifierKeys},n.prototype.keyForKeydownEvent=function(t){return this._codes[t.keyCode]||""},n}();(function(n){function t(i){var r=Object.create(null);for(var o in i)r[i[o]]=!0;return r}n.extractKeys=t;function e(i){for(var r=Object(null),o=0,s=i.length;o<s;++o)r[i[o]]=!0;return r}n.convertToKeySet=e})(cn||(cn={}));var Al=new cn("en-us",{8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",27:"Escape",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",91:"Meta",93:"ContextMenu",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Meta"},["Shift","Ctrl","Alt","Meta"]),hn;(function(n){n.keyboardLayout=Al})(hn||(hn={}));var pe=class{constructor(){this._timerID=0;this._replaying=!1;this._keystrokes=[];this._keydownEvents=[];this._keyBindings=[];this._exactKeyMatch=null;this._commands=Object.create(null);this._commandChanged=new W(this);this._commandExecuted=new W(this);this._keyBindingChanged=new W(this)}get commandChanged(){return this._commandChanged}get commandExecuted(){return this._commandExecuted}get keyBindingChanged(){return this._keyBindingChanged}get keyBindings(){return this._keyBindings}listCommands(){return Object.keys(this._commands)}hasCommand(t){return t in this._commands}addCommand(t,e){if(t in this._commands)throw new Error(`Command '${t}' already registered.`);return this._commands[t]=Ve.createCommand(e),this._commandChanged.emit({id:t,type:"added"}),new Le(()=>{delete this._commands[t],this._commandChanged.emit({id:t,type:"removed"})})}notifyCommandChanged(t){if(t!==void 0&&!(t in this._commands))throw new Error(`Command '${t}' is not registered.`);this._commandChanged.emit({id:t,type:t?"changed":"many-changed"})}describedBy(t){let e=this._commands[t];return e?e.describedBy||{args:null}:{args:null}}label(t,e=ne.JSONExt.emptyObject){let i=this._commands[t];return i?i.label.call(void 0,e):""}mnemonic(t,e=ne.JSONExt.emptyObject){let i=this._commands[t];return i?i.mnemonic.call(void 0,e):-1}icon(t,e=ne.JSONExt.emptyObject){let i=this._commands[t];return i?i.icon.call(void 0,e):""}iconClass(t,e=ne.JSONExt.emptyObject){let i=this._commands[t];return i?i.iconClass.call(void 0,e):""}iconLabel(t,e=ne.JSONExt.emptyObject){let i=this._commands[t];return i?i.iconLabel.call(void 0,e):""}caption(t,e=ne.JSONExt.emptyObject){let i=this._commands[t];return i?i.caption.call(void 0,e):""}usage(t,e=ne.JSONExt.emptyObject){let i=this._commands[t];return i?i.usage.call(void 0,e):""}className(t,e=ne.JSONExt.emptyObject){let i=this._commands[t];return i?i.className.call(void 0,e):""}dataset(t,e=ne.JSONExt.emptyObject){let i=this._commands[t];return i?i.dataset.call(void 0,e):{}}isEnabled(t,e=ne.JSONExt.emptyObject){let i=this._commands[t];return i?i.isEnabled.call(void 0,e):!1}isToggled(t,e=ne.JSONExt.emptyObject){let i=this._commands[t];return i?i.isToggled.call(void 0,e):!1}isToggleable(t,e=ne.JSONExt.emptyObject){let i=this._commands[t];return i?i.isToggleable:!1}isVisible(t,e=ne.JSONExt.emptyObject){let i=this._commands[t];return i?i.isVisible.call(void 0,e):!1}execute(t,e=ne.JSONExt.emptyObject){let i=this._commands[t];if(!i)return Promise.reject(new Error(`Command '${t}' not registered.`));let r;try{r=i.execute.call(void 0,e)}catch(s){r=Promise.reject(s)}let o=Promise.resolve(r);return this._commandExecuted.emit({id:t,args:e,result:o}),o}addKeyBinding(t){let e=Ve.createKeyBinding(t);return this._keyBindings.push(e),this._keyBindingChanged.emit({binding:e,type:"added"}),new Le(()=>{R.removeFirstOf(this._keyBindings,e),this._keyBindingChanged.emit({binding:e,type:"removed"})})}processKeydownEvent(t){if(this._replaying||pe.isModifierKeyPressed(t))return;let e=pe.keystrokeForKeydownEvent(t);if(!e){this._replayKeydownEvents(),this._clearPendingState();return}this._keystrokes.push(e);let{exact:i,partial:r}=Ve.matchKeyBinding(this._keyBindings,this._keystrokes,t);if(!i&&!r){this._replayKeydownEvents(),this._clearPendingState();return}if(t.preventDefault(),t.stopPropagation(),i&&!r){this._executeKeyBinding(i),this._clearPendingState();return}i&&(this._exactKeyMatch=i),this._keydownEvents.push(t),this._startTimer()}_startTimer(){this._clearTimer(),this._timerID=window.setTimeout(()=>{this._onPendingTimeout()},Ve.CHORD_TIMEOUT)}_clearTimer(){this._timerID!==0&&(clearTimeout(this._timerID),this._timerID=0)}_replayKeydownEvents(){this._keydownEvents.length!==0&&(this._replaying=!0,this._keydownEvents.forEach(Ve.replayKeyEvent),this._replaying=!1)}_executeKeyBinding(t){let{command:e,args:i}=t;if(!this.hasCommand(e)||!this.isEnabled(e,i)){let r=this.hasCommand(e)?"enabled":"registered",s=`Cannot execute key binding '${t.keys.join(", ")}':`,a=`command '${e}' is not ${r}.`;console.warn(`${s} ${a}`);return}this.execute(e,i)}_clearPendingState(){this._clearTimer(),this._exactKeyMatch=null,this._keystrokes.length=0,this._keydownEvents.length=0}_onPendingTimeout(){this._timerID=0,this._exactKeyMatch?this._executeKeyBinding(this._exactKeyMatch):this._replayKeydownEvents(),this._clearPendingState()}};(s=>{function n(a){let l="",h=!1,y=!1,I=!1,_=!1;for(let m of a.split(/\s+/))m==="Accel"?j.IS_MAC?y=!0:I=!0:m==="Alt"?h=!0:m==="Cmd"?y=!0:m==="Ctrl"?I=!0:m==="Shift"?_=!0:m.length>0&&(l=m);return{cmd:y,ctrl:I,alt:h,shift:_,key:l}}s.parseKeystroke=n;function t(a){let l="",h=n(a);return h.ctrl&&(l+="Ctrl "),h.alt&&(l+="Alt "),h.shift&&(l+="Shift "),h.cmd&&j.IS_MAC&&(l+="Cmd "),l+h.key}s.normalizeKeystroke=t;function e(a){let l;return j.IS_WIN?l=a.winKeys||a.keys:j.IS_MAC?l=a.macKeys||a.keys:l=a.linuxKeys||a.keys,l.map(t)}s.normalizeKeys=e;function i(a){return typeof a=="string"?l(a):a.map(l).join(", ");function l(h){let y=[],I=j.IS_MAC?" ":"+",_=n(h);return _.ctrl&&y.push("Ctrl"),_.alt&&y.push("Alt"),_.shift&&y.push("Shift"),j.IS_MAC&&_.cmd&&y.push("Cmd"),y.push(_.key),y.map(Ve.formatKey).join(I)}}s.formatKeystroke=i;function r(a){let l=Oe(),h=l.keyForKeydownEvent(a);return l.isModifierKey(h)}s.isModifierKeyPressed=r;function o(a){let l=Oe(),h=l.keyForKeydownEvent(a);if(!h||l.isModifierKey(h))return"";let y=[];return a.ctrlKey&&y.push("Ctrl"),a.altKey&&y.push("Alt"),a.shiftKey&&y.push("Shift"),a.metaKey&&j.IS_MAC&&y.push("Cmd"),y.push(h),y.join(" ")}s.keystrokeForKeydownEvent=o})(pe||={});var Ve;(A=>{A.CHORD_TIMEOUT=1e3;function t(E){let S,v;return!E.icon||typeof E.icon=="string"?(v=c(E.iconClass||E.icon,l),S=v):(v=c(E.iconClass,l),S=c(E.icon,m)),{execute:E.execute,describedBy:{args:null,...E.describedBy},label:c(E.label,l),mnemonic:c(E.mnemonic,h),icon:S,iconClass:v,iconLabel:c(E.iconLabel,l),caption:c(E.caption,l),usage:c(E.usage,l),className:c(E.className,l),dataset:c(E.dataset,_),isEnabled:E.isEnabled||y,isToggled:E.isToggled||I,isToggleable:E.isToggleable||!!E.isToggled,isVisible:E.isVisible||y}}A.createCommand=t;function e(E){return{keys:pe.normalizeKeys(E),selector:p(E),command:E.command,args:E.args||ne.JSONExt.emptyObject}}A.createKeyBinding=e;function i(E,S,v){let M=null,d=!1,u=1/0,b=0;for(let k=0,g=E.length;k<g;++k){let L=E[k],B=w(L.keys,S);if(B===f.None)continue;if(B===f.Partial){!d&&x(L.selector,v)!==-1&&(d=!0);continue}let O=x(L.selector,v);if(O===-1||O>u)continue;let H=xe.calculateSpecificity(L.selector);(!M||O<u||H>=b)&&(M=L,u=O,b=H)}return{exact:M,partial:d}}A.matchKeyBinding=i;function r(E){E.target.dispatchEvent(T(E))}A.replayKeyEvent=r;function o(E){return j.IS_MAC?s.hasOwnProperty(E)?s[E]:E:a.hasOwnProperty(E)?a[E]:E}A.formatKey=o;let s={Backspace:"\u232B",Tab:"\u21E5",Enter:"\u21A9",Shift:"\u21E7",Ctrl:"\u2303",Alt:"\u2325",Escape:"\u238B",PageUp:"\u21DE",PageDown:"\u21DF",End:"\u2198",Home:"\u2196",ArrowLeft:"\u2190",ArrowUp:"\u2191",ArrowRight:"\u2192",ArrowDown:"\u2193",Delete:"\u2326",Cmd:"\u2318"},a={Escape:"Esc",PageUp:"Page Up",PageDown:"Page Down",ArrowLeft:"Left",ArrowUp:"Up",ArrowRight:"Right",ArrowDown:"Down",Delete:"Del"},l=()=>"",h=()=>-1,y=()=>!0,I=()=>!1,_=()=>({}),m=()=>{};function c(E,S){return E===void 0?S:typeof E=="function"?E:()=>E}function p(E){if(E.selector.indexOf(",")!==-1)throw new Error(`Selector cannot contain commas: ${E.selector}`);if(!xe.isValid(E.selector))throw new Error(`Invalid selector: ${E.selector}`);return E.selector}let f;(M=>(M[M.None=0]="None",M[M.Exact=1]="Exact",M[M.Partial=2]="Partial"))(f||={});function w(E,S){if(E.length<S.length)return 0;for(let v=0,M=S.length;v<M;++v)if(E[v]!==S[v])return 0;return E.length>S.length?2:1}function x(E,S){let v=S.target,M=S.currentTarget;for(let d=0;v!==null;v=v.parentElement,++d){if(v.hasAttribute("data-lm-suppress-shortcuts")||v.hasAttribute("data-p-suppress-shortcuts"))return-1;if(xe.matches(v,E))return d;if(v===M)return-1}return-1}function T(E){let S=document.createEvent("Event"),v=E.bubbles||!0,M=E.cancelable||!0;return S.initEvent(E.type||"keydown",v,M),S.key=E.key||"",S.keyCode=E.keyCode||0,S.which=E.keyCode||0,S.ctrlKey=E.ctrlKey||!1,S.altKey=E.altKey||!1,S.shiftKey=E.shiftKey||!1,S.metaKey=E.metaKey||!1,S.view=E.view||window,S}})(Ve||={});var re=$e(vt());var mn=function(){return mn=Object.assign||function(t){for(var e,i=1,r=arguments.length;i<r;i++){e=arguments[i];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},mn.apply(this,arguments)},_t=function(){function n(){this._timerID=0,this._replaying=!1,this._keystrokes=[],this._keydownEvents=[],this._keyBindings=[],this._exactKeyMatch=null,this._commands=Object.create(null),this._commandChanged=new W(this),this._commandExecuted=new W(this),this._keyBindingChanged=new W(this)}return Object.defineProperty(n.prototype,"commandChanged",{get:function(){return this._commandChanged},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"commandExecuted",{get:function(){return this._commandExecuted},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"keyBindingChanged",{get:function(){return this._keyBindingChanged},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"keyBindings",{get:function(){return this._keyBindings},enumerable:!0,configurable:!0}),n.prototype.listCommands=function(){return Object.keys(this._commands)},n.prototype.hasCommand=function(t){return t in this._commands},n.prototype.addCommand=function(t,e){var i=this;if(t in this._commands)throw new Error("Command '"+t+"' already registered.");return this._commands[t]=Pe.createCommand(e),this._commandChanged.emit({id:t,type:"added"}),new Le(function(){delete i._commands[t],i._commandChanged.emit({id:t,type:"removed"})})},n.prototype.notifyCommandChanged=function(t){if(t!==void 0&&!(t in this._commands))throw new Error("Command '"+t+"' is not registered.");this._commandChanged.emit({id:t,type:t?"changed":"many-changed"})},n.prototype.describedBy=function(t){var e=this._commands[t];return e?e.describedBy||{args:null}:{args:null}},n.prototype.label=function(t,e){e===void 0&&(e=re.JSONExt.emptyObject);var i=this._commands[t];return i?i.label.call(void 0,e):""},n.prototype.mnemonic=function(t,e){e===void 0&&(e=re.JSONExt.emptyObject);var i=this._commands[t];return i?i.mnemonic.call(void 0,e):-1},n.prototype.icon=function(t,e){e===void 0&&(e=re.JSONExt.emptyObject);var i=this._commands[t];return i?i.icon.call(void 0,e):""},n.prototype.iconClass=function(t,e){e===void 0&&(e=re.JSONExt.emptyObject);var i=this._commands[t];return i?i.iconClass.call(void 0,e):""},n.prototype.iconLabel=function(t,e){e===void 0&&(e=re.JSONExt.emptyObject);var i=this._commands[t];return i?i.iconLabel.call(void 0,e):""},n.prototype.caption=function(t,e){e===void 0&&(e=re.JSONExt.emptyObject);var i=this._commands[t];return i?i.caption.call(void 0,e):""},n.prototype.usage=function(t,e){e===void 0&&(e=re.JSONExt.emptyObject);var i=this._commands[t];return i?i.usage.call(void 0,e):""},n.prototype.className=function(t,e){e===void 0&&(e=re.JSONExt.emptyObject);var i=this._commands[t];return i?i.className.call(void 0,e):""},n.prototype.dataset=function(t,e){e===void 0&&(e=re.JSONExt.emptyObject);var i=this._commands[t];return i?i.dataset.call(void 0,e):{}},n.prototype.isEnabled=function(t,e){e===void 0&&(e=re.JSONExt.emptyObject);var i=this._commands[t];return i?i.isEnabled.call(void 0,e):!1},n.prototype.isToggled=function(t,e){e===void 0&&(e=re.JSONExt.emptyObject);var i=this._commands[t];return i?i.isToggled.call(void 0,e):!1},n.prototype.isToggleable=function(t,e){var i=this._commands[t];return i?i.isToggleable:!1},n.prototype.isVisible=function(t,e){e===void 0&&(e=re.JSONExt.emptyObject);var i=this._commands[t];return i?i.isVisible.call(void 0,e):!1},n.prototype.execute=function(t,e){e===void 0&&(e=re.JSONExt.emptyObject);var i=this._commands[t];if(!i)return Promise.reject(new Error("Command '"+t+"' not registered."));var r;try{r=i.execute.call(void 0,e)}catch(s){r=Promise.reject(s)}var o=Promise.resolve(r);return this._commandExecuted.emit({id:t,args:e,result:o}),o},n.prototype.addKeyBinding=function(t){var e=this,i=Pe.createKeyBinding(t);return this._keyBindings.push(i),this._keyBindingChanged.emit({binding:i,type:"added"}),new Le(function(){R.removeFirstOf(e._keyBindings,i),e._keyBindingChanged.emit({binding:i,type:"removed"})})},n.prototype.processKeydownEvent=function(t){if(!(this._replaying||n.isModifierKeyPressed(t))){var e=n.keystrokeForKeydownEvent(t);if(!e){this._replayKeydownEvents(),this._clearPendingState();return}this._keystrokes.push(e);var i=Pe.matchKeyBinding(this._keyBindings,this._keystrokes,t),r=i.exact,o=i.partial;if(!r&&!o){this._replayKeydownEvents(),this._clearPendingState();return}if(t.preventDefault(),t.stopPropagation(),r&&!o){this._executeKeyBinding(r),this._clearPendingState();return}r&&(this._exactKeyMatch=r),this._keydownEvents.push(t),this._startTimer()}},n.prototype._startTimer=function(){var t=this;this._clearTimer(),this._timerID=window.setTimeout(function(){t._onPendingTimeout()},Pe.CHORD_TIMEOUT)},n.prototype._clearTimer=function(){this._timerID!==0&&(clearTimeout(this._timerID),this._timerID=0)},n.prototype._replayKeydownEvents=function(){this._keydownEvents.length!==0&&(this._replaying=!0,this._keydownEvents.forEach(Pe.replayKeyEvent),this._replaying=!1)},n.prototype._executeKeyBinding=function(t){var e=t.command,i=t.args;if(!this.hasCommand(e)||!this.isEnabled(e,i)){var r=this.hasCommand(e)?"enabled":"registered",o=t.keys.join(", "),s="Cannot execute key binding '"+o+"':",a="command '"+e+"' is not "+r+".";console.warn(s+" "+a);return}this.execute(e,i)},n.prototype._clearPendingState=function(){this._clearTimer(),this._exactKeyMatch=null,this._keystrokes.length=0,this._keydownEvents.length=0},n.prototype._onPendingTimeout=function(){this._timerID=0,this._exactKeyMatch?this._executeKeyBinding(this._exactKeyMatch):this._replayKeydownEvents(),this._clearPendingState()},n}();(function(n){function t(a){for(var l="",h=!1,y=!1,I=!1,_=!1,m=0,c=a.split(/\s+/);m<c.length;m++){var p=c[m];p==="Accel"?j.IS_MAC?y=!0:I=!0:p==="Alt"?h=!0:p==="Cmd"?y=!0:p==="Ctrl"?I=!0:p==="Shift"?_=!0:p.length>0&&(l=p)}return{cmd:y,ctrl:I,alt:h,shift:_,key:l}}n.parseKeystroke=t;function e(a){var l="",h=t(a);return h.ctrl&&(l+="Ctrl "),h.alt&&(l+="Alt "),h.shift&&(l+="Shift "),h.cmd&&j.IS_MAC&&(l+="Cmd "),l+h.key}n.normalizeKeystroke=e;function i(a){var l;return j.IS_WIN?l=a.winKeys||a.keys:j.IS_MAC?l=a.macKeys||a.keys:l=a.linuxKeys||a.keys,l.map(e)}n.normalizeKeys=i;function r(a){return typeof a=="string"?l(a):a.map(l).join(", ");function l(h){var y=[],I=j.IS_MAC?" ":"+",_=t(h);return _.ctrl&&y.push("Ctrl"),_.alt&&y.push("Alt"),_.shift&&y.push("Shift"),j.IS_MAC&&_.cmd&&y.push("Cmd"),y.push(_.key),y.map(Pe.formatKey).join(I)}}n.formatKeystroke=r;function o(a){var l=Oe(),h=l.keyForKeydownEvent(a);return l.isModifierKey(h)}n.isModifierKeyPressed=o;function s(a){var l=Oe(),h=l.keyForKeydownEvent(a);if(!h||l.isModifierKey(h))return"";var y=[];return a.ctrlKey&&y.push("Ctrl"),a.altKey&&y.push("Alt"),a.shiftKey&&y.push("Shift"),a.metaKey&&j.IS_MAC&&y.push("Cmd"),y.push(h),y.join(" ")}n.keystrokeForKeydownEvent=s})(_t||(_t={}));var Pe;(function(n){n.CHORD_TIMEOUT=1e3;function t(T){var A,E;return!T.icon||typeof T.icon=="string"?(E=c(T.iconClass||T.icon,l),A=E):(E=c(T.iconClass,l),A=c(T.icon,m)),{execute:T.execute,describedBy:mn({args:null},T.describedBy),label:c(T.label,l),mnemonic:c(T.mnemonic,h),icon:A,iconClass:E,iconLabel:c(T.iconLabel,l),caption:c(T.caption,l),usage:c(T.usage,l),className:c(T.className,l),dataset:c(T.dataset,_),isEnabled:T.isEnabled||y,isToggled:T.isToggled||I,isToggleable:T.isToggleable||!!T.isToggled,isVisible:T.isVisible||y}}n.createCommand=t;function e(T){return{keys:_t.normalizeKeys(T),selector:p(T),command:T.command,args:T.args||re.JSONExt.emptyObject}}n.createKeyBinding=e;function i(T,A,E){for(var S=null,v=!1,M=1/0,d=0,u=0,b=T.length;u<b;++u){var k=T[u],g=f(k.keys,A);if(g!==0){if(g===2){!v&&w(k.selector,E)!==-1&&(v=!0);continue}var L=w(k.selector,E);if(!(L===-1||L>M)){var B=xe.calculateSpecificity(k.selector);(!S||L<M||B>=d)&&(S=k,M=L,d=B)}}}return{exact:S,partial:v}}n.matchKeyBinding=i;function r(T){T.target.dispatchEvent(x(T))}n.replayKeyEvent=r;function o(T){return j.IS_MAC?s.hasOwnProperty(T)?s[T]:T:a.hasOwnProperty(T)?a[T]:T}n.formatKey=o;var s={Backspace:"\u232B",Tab:"\u21E5",Enter:"\u21A9",Shift:"\u21E7",Ctrl:"\u2303",Alt:"\u2325",Escape:"\u238B",PageUp:"\u21DE",PageDown:"\u21DF",End:"\u2198",Home:"\u2196",ArrowLeft:"\u2190",ArrowUp:"\u2191",ArrowRight:"\u2192",ArrowDown:"\u2193",Delete:"\u2326",Cmd:"\u2318"},a={Escape:"Esc",PageUp:"Page Up",PageDown:"Page Down",ArrowLeft:"Left",ArrowUp:"Up",ArrowRight:"Right",ArrowDown:"Down",Delete:"Del"},l=function(){return""},h=function(){return-1},y=function(){return!0},I=function(){return!1},_=function(){return{}},m=function(){};function c(T,A){return T===void 0?A:typeof T=="function"?T:function(){return T}}function p(T){if(T.selector.indexOf(",")!==-1)throw new Error("Selector cannot contain commas: "+T.selector);if(!xe.isValid(T.selector))throw new Error("Invalid selector: "+T.selector);return T.selector}function f(T,A){if(T.length<A.length)return 0;for(var E=0,S=A.length;E<S;++E)if(T[E]!==A[E])return 0;return T.length>A.length?2:1}function w(T,A){for(var E=A.target,S=A.currentTarget,v=0;E!==null;E=E.parentElement,++v){if(E.hasAttribute("data-lm-suppress-shortcuts")||E.hasAttribute("data-p-suppress-shortcuts"))return-1;if(xe.matches(E,T))return v;if(E===S)return-1}return-1}function x(T){var A=document.createEvent("Event"),E=T.bubbles||!0,S=T.cancelable||!0;return A.initEvent(T.type||"keydown",E,S),A.key=T.key||"",A.keyCode=T.keyCode||0,A.which=T.keyCode||0,A.ctrlKey=T.ctrlKey||!1,A.altKey=T.altKey||!1,A.shiftKey=T.shiftKey||!1,A.metaKey=T.metaKey||!1,A.view=T.view||window,A}})(Pe||(Pe={}));var pn=$e(vt());var ue=class extends z{constructor(e){super({node:de.createNode()});this._childIndex=-1;this._activeIndex=-1;this._openTimerID=0;this._closeTimerID=0;this._items=[];this._childMenu=null;this._parentMenu=null;this._aboutToClose=new W(this);this._menuRequested=new W(this);this.addClass("lm-Menu"),this.addClass("p-Menu"),this.setFlag(z.Flag.DisallowLayout),this.commands=e.commands,this.renderer=e.renderer||ue.defaultRenderer}dispose(){this.close(),this._items.length=0,super.dispose()}get aboutToClose(){return this._aboutToClose}get menuRequested(){return this._menuRequested}get parentMenu(){return this._parentMenu}get childMenu(){return this._childMenu}get rootMenu(){let e=this;for(;e._parentMenu;)e=e._parentMenu;return e}get leafMenu(){let e=this;for(;e._childMenu;)e=e._childMenu;return e}get contentNode(){return this.node.getElementsByClassName("lm-Menu-content")[0]}get activeItem(){return this._items[this._activeIndex]||null}set activeItem(e){this.activeIndex=e?this._items.indexOf(e):-1}get activeIndex(){return this._activeIndex}set activeIndex(e){(e<0||e>=this._items.length)&&(e=-1),e!==-1&&!de.canActivate(this._items[e])&&(e=-1),this._activeIndex!==e&&(this._activeIndex=e,this._activeIndex>=0&&this.contentNode.childNodes[this._activeIndex]&&this.contentNode.childNodes[this._activeIndex].focus(),this.update())}get items(){return this._items}activateNextItem(){let e=this._items.length,i=this._activeIndex,r=i<e-1?i+1:0,o=r===0?e-1:r-1;this.activeIndex=R.findFirstIndex(this._items,de.canActivate,r,o)}activatePreviousItem(){let e=this._items.length,i=this._activeIndex,r=i<=0?e-1:i-1,o=r===e-1?0:r+1;this.activeIndex=R.findLastIndex(this._items,de.canActivate,r,o)}triggerActiveItem(){if(!this.isAttached)return;let e=this.activeItem;if(!e)return;if(this._cancelOpenTimer(),this._cancelCloseTimer(),e.type==="submenu"){this._openChildMenu(!0);return}this.rootMenu.close();let{command:i,args:r}=e;this.commands.isEnabled(i,r)?this.commands.execute(i,r):console.log(`Command '${i}' is disabled.`)}addItem(e){return this.insertItem(this._items.length,e)}insertItem(e,i){this.isAttached&&this.close(),this.activeIndex=-1;let r=Math.max(0,Math.min(e,this._items.length)),o=de.createItem(this,i);return R.insert(this._items,r,o),this.update(),o}removeItem(e){this.removeItemAt(this._items.indexOf(e))}removeItemAt(e){this.isAttached&&this.close(),this.activeIndex=-1,R.removeAt(this._items,e)&&this.update()}clearItems(){this.isAttached&&this.close(),this.activeIndex=-1,this._items.length!==0&&(this._items.length=0,this.update())}open(e,i,r={}){if(this.isAttached)return;let o=r.forceX||!1,s=r.forceY||!1;de.openRootMenu(this,e,i,o,s),this.activate()}handleEvent(e){switch(e.type){case"keydown":this._evtKeyDown(e);break;case"mouseup":this._evtMouseUp(e);break;case"mousemove":this._evtMouseMove(e);break;case"mouseenter":this._evtMouseEnter(e);break;case"mouseleave":this._evtMouseLeave(e);break;case"mousedown":this._evtMouseDown(e);break;case"contextmenu":e.preventDefault(),e.stopPropagation();break}}onBeforeAttach(e){this.node.addEventListener("keydown",this),this.node.addEventListener("mouseup",this),this.node.addEventListener("mousemove",this),this.node.addEventListener("mouseenter",this),this.node.addEventListener("mouseleave",this),this.node.addEventListener("contextmenu",this),document.addEventListener("mousedown",this,!0)}onAfterDetach(e){this.node.removeEventListener("keydown",this),this.node.removeEventListener("mouseup",this),this.node.removeEventListener("mousemove",this),this.node.removeEventListener("mouseenter",this),this.node.removeEventListener("mouseleave",this),this.node.removeEventListener("contextmenu",this),document.removeEventListener("mousedown",this,!0)}onActivateRequest(e){this.isAttached&&this.node.focus()}onUpdateRequest(e){let i=this._items,r=this.renderer,o=this._activeIndex,s=de.computeCollapsed(i),a=new Array(i.length);for(let l=0,h=i.length;l<h;++l){let y=i[l],I=l===o,_=s[l];a[l]=r.renderItem({item:y,active:I,collapsed:_,onfocus:()=>{this.activeIndex=l}})}Re.render(a,this.contentNode)}onCloseRequest(e){this._cancelOpenTimer(),this._cancelCloseTimer(),this.activeIndex=-1;let i=this._childMenu;i&&(this._childIndex=-1,this._childMenu=null,i._parentMenu=null,i.close());let r=this._parentMenu;r&&(this._parentMenu=null,r._childIndex=-1,r._childMenu=null,r.activate()),this.isAttached&&this._aboutToClose.emit(void 0),super.onCloseRequest(e)}_evtKeyDown(e){e.preventDefault(),e.stopPropagation();let i=e.keyCode;if(i===13){this.triggerActiveItem();return}if(i===27){this.close();return}if(i===37){this._parentMenu?this.close():this._menuRequested.emit("previous");return}if(i===38){this.activatePreviousItem();return}if(i===39){let a=this.activeItem;a&&a.type==="submenu"?this.triggerActiveItem():this.rootMenu._menuRequested.emit("next");return}if(i===40){this.activateNextItem();return}let r=Oe().keyForKeydownEvent(e);if(!r)return;let o=this._activeIndex+1,s=de.findMnemonic(this._items,r,o);s.index!==-1&&!s.multiple?(this.activeIndex=s.index,this.triggerActiveItem()):s.index!==-1?this.activeIndex=s.index:s.auto!==-1&&(this.activeIndex=s.auto)}_evtMouseUp(e){e.button===0&&(e.preventDefault(),e.stopPropagation(),this.triggerActiveItem())}_evtMouseMove(e){let i=R.findFirstIndex(this.contentNode.children,o=>U.hitTest(o,e.clientX,e.clientY));if(i===this._activeIndex)return;if(this.activeIndex=i,i=this.activeIndex,i===this._childIndex){this._cancelOpenTimer(),this._cancelCloseTimer();return}this._childIndex!==-1&&this._startCloseTimer(),this._cancelOpenTimer();let r=this.activeItem;!r||r.type!=="submenu"||!r.submenu||this._startOpenTimer()}_evtMouseEnter(e){for(let i=this._parentMenu;i;i=i._parentMenu)i._cancelOpenTimer(),i._cancelCloseTimer(),i.activeIndex=i._childIndex}_evtMouseLeave(e){if(this._cancelOpenTimer(),!this._childMenu){this.activeIndex=-1;return}let{clientX:i,clientY:r}=e;if(U.hitTest(this._childMenu.node,i,r)){this._cancelCloseTimer();return}this.activeIndex=-1,this._startCloseTimer()}_evtMouseDown(e){this._parentMenu||(de.hitTestMenus(this,e.clientX,e.clientY)?(e.preventDefault(),e.stopPropagation()):this.close())}_openChildMenu(e=!1){let i=this.activeItem;if(!i||i.type!=="submenu"||!i.submenu){this._closeChildMenu();return}let r=i.submenu;if(r===this._childMenu)return;ue.saveWindowData(),this._closeChildMenu(),this._childMenu=r,this._childIndex=this._activeIndex,r._parentMenu=this,P.sendMessage(this,z.Msg.UpdateRequest);let o=this.contentNode.children[this._activeIndex];de.openSubmenu(r,o),e&&(r.activeIndex=-1,r.activateNextItem()),r.activate()}_closeChildMenu(){this._childMenu&&this._childMenu.close()}_startOpenTimer(){this._openTimerID===0&&(this._openTimerID=window.setTimeout(()=>{this._openTimerID=0,this._openChildMenu()},de.TIMER_DELAY))}_startCloseTimer(){this._closeTimerID===0&&(this._closeTimerID=window.setTimeout(()=>{this._closeTimerID=0,this._closeChildMenu()},de.TIMER_DELAY))}_cancelOpenTimer(){this._openTimerID!==0&&(clearTimeout(this._openTimerID),this._openTimerID=0)}_cancelCloseTimer(){this._closeTimerID!==0&&(clearTimeout(this._closeTimerID),this._closeTimerID=0)}static saveWindowData(){de.saveWindowData()}};(e=>{class n{renderItem(r){let o=this.createItemClass(r),s=this.createItemDataset(r),a=this.createItemARIA(r);return Z.li({className:o,dataset:s,tabindex:"0",onfocus:r.onfocus,...a},this.renderIcon(r),this.renderLabel(r),this.renderShortcut(r),this.renderSubmenu(r))}renderIcon(r){let o=this.createIconClass(r);return typeof r.item.icon=="string"?Z.div({className:o},r.item.iconLabel):Z.div({className:o},r.item.icon,r.item.iconLabel)}renderLabel(r){let o=this.formatLabel(r);return Z.div({className:"lm-Menu-itemLabel p-Menu-itemLabel"},o)}renderShortcut(r){let o=this.formatShortcut(r);return Z.div({className:"lm-Menu-itemShortcut p-Menu-itemShortcut"},o)}renderSubmenu(r){return Z.div({className:"lm-Menu-itemSubmenuIcon p-Menu-itemSubmenuIcon"})}createItemClass(r){let o="lm-Menu-item";o+=" p-Menu-item",r.item.isEnabled||(o+=" lm-mod-disabled",o+=" p-mod-disabled"),r.item.isToggled&&(o+=" lm-mod-toggled",o+=" p-mod-toggled"),r.item.isVisible||(o+=" lm-mod-hidden",o+=" p-mod-hidden"),r.active&&(o+=" lm-mod-active",o+=" p-mod-active"),r.collapsed&&(o+=" lm-mod-collapsed",o+=" p-mod-collapsed");let s=r.item.className;return s&&(o+=` ${s}`),o}createItemDataset(r){let o,{type:s,command:a,dataset:l}=r.item;return s==="command"?o={...l,type:s,command:a}:o={...l,type:s},o}createIconClass(r){let o="lm-Menu-itemIcon";o+=" p-Menu-itemIcon";let s=r.item.iconClass;return s?`${o} ${s}`:o}createItemARIA(r){let o={};switch(r.item.type){case"separator":o.role="presentation";break;case"submenu":o["aria-haspopup"]="true",r.item.isEnabled||(o["aria-disabled"]="true");break;default:r.item.isEnabled||(o["aria-disabled"]="true"),o.role="menuitem"}return o}formatLabel(r){let{label:o,mnemonic:s}=r.item;if(s<0||s>=o.length)return o;let a=o.slice(0,s),l=o.slice(s+1),h=o[s],y=Z.span({className:"lm-Menu-itemMnemonic p-Menu-itemMnemonic"},h);return[a,y,l]}formatShortcut(r){let o=r.item.keyBinding;return o?_t.formatKeystroke(o.keys):null}}e.Renderer=n,e.defaultRenderer=new n})(ue||={});var de;(f=>{f.TIMER_DELAY=300,f.SUBMENU_OVERLAP=3;let e=null,i=0;function r(){return i>0?(i--,e):I()}function o(){e=I(),i++}f.saveWindowData=o;function s(){let w=document.createElement("div"),x=document.createElement("ul");return x.className="lm-Menu-content",x.classList.add("p-Menu-content"),w.appendChild(x),x.setAttribute("role","menu"),w.tabIndex=0,w}f.createNode=s;function a(w){return w.type!=="separator"&&w.isEnabled&&w.isVisible}f.canActivate=a;function l(w,x){return new p(w.commands,x)}f.createItem=l;function h(w,x,T){for(let A=w;A;A=A.childMenu)if(U.hitTest(A.node,x,T))return!0;return!1}f.hitTestMenus=h;function y(w){let x=new Array(w.length);R.fill(x,!1);let T=0,A=w.length;for(;T<A;++T){let v=w[T];if(!!v.isVisible){if(v.type!=="separator")break;x[T]=!0}}let E=A-1;for(;E>=0;--E){let v=w[E];if(!!v.isVisible){if(v.type!=="separator")break;x[E]=!0}}let S=!1;for(;++T<E;){let v=w[T];!v.isVisible||(v.type!=="separator"?S=!1:S?x[T]=!0:S=!0)}return x}f.computeCollapsed=y;function I(){return{pageXOffset:window.pageXOffset,pageYOffset:window.pageYOffset,clientWidth:document.documentElement.clientWidth,clientHeight:document.documentElement.clientHeight}}function _(w,x,T,A,E){let S=r(),v=S.pageXOffset,M=S.pageYOffset,d=S.clientWidth,u=S.clientHeight;P.sendMessage(w,z.Msg.UpdateRequest);let b=u-(E?T:0),k=w.node,g=k.style;g.opacity="0",g.maxHeight=`${b}px`,z.attach(w,document.body);let{width:L,height:B}=k.getBoundingClientRect();!A&&x+L>v+d&&(x=v+d-L),!E&&T+B>M+u&&(T>M+u?T=M+u-B:T=T-B),g.transform=`translate(${Math.max(0,x)}px, ${Math.max(0,T)}px`,g.opacity="1"}f.openRootMenu=_;function m(w,x){let T=r(),A=T.pageXOffset,E=T.pageYOffset,S=T.clientWidth,v=T.clientHeight;P.sendMessage(w,z.Msg.UpdateRequest);let M=v,d=w.node,u=d.style;u.opacity="0",u.maxHeight=`${M}px`,z.attach(w,document.body);let{width:b,height:k}=d.getBoundingClientRect(),g=U.boxSizing(w.node),L=x.getBoundingClientRect(),B=L.right-3;B+b>A+S&&(B=L.left+3-b);let O=L.top-g.borderTop-g.paddingTop;O+k>E+v&&(O=L.bottom+g.borderBottom+g.paddingBottom-k),u.transform=`translate(${Math.max(0,B)}px, ${Math.max(0,O)}px`,u.opacity="1"}f.openSubmenu=m;function c(w,x,T){let A=-1,E=-1,S=!1,v=x.toUpperCase();for(let M=0,d=w.length;M<d;++M){let u=(M+T)%d,b=w[u];if(!a(b))continue;let k=b.label;if(k.length===0)continue;let g=b.mnemonic;if(g>=0&&g<k.length){k[g].toUpperCase()===v&&(A===-1?A=u:S=!0);continue}E===-1&&k[0].toUpperCase()===v&&(E=u)}return{index:A,multiple:S,auto:E}}f.findMnemonic=c;class p{constructor(x,T){this._commands=x,this.type=T.type||"command",this.command=T.command||"",this.args=T.args||pn.JSONExt.emptyObject,this.submenu=T.submenu||null}get label(){return this.type==="command"?this._commands.label(this.command,this.args):this.type==="submenu"&&this.submenu?this.submenu.title.label:""}get mnemonic(){return this.type==="command"?this._commands.mnemonic(this.command,this.args):this.type==="submenu"&&this.submenu?this.submenu.title.mnemonic:-1}get icon(){return this.type==="command"?this._commands.icon(this.command,this.args):this.type==="submenu"&&this.submenu?this.submenu.title.icon:this.iconClass}get iconClass(){return this.type==="command"?this._commands.iconClass(this.command,this.args):this.type==="submenu"&&this.submenu?this.submenu.title.iconClass:""}get iconLabel(){return this.type==="command"?this._commands.iconLabel(this.command,this.args):this.type==="submenu"&&this.submenu?this.submenu.title.iconLabel:""}get caption(){return this.type==="command"?this._commands.caption(this.command,this.args):this.type==="submenu"&&this.submenu?this.submenu.title.caption:""}get className(){return this.type==="command"?this._commands.className(this.command,this.args):this.type==="submenu"&&this.submenu?this.submenu.title.className:""}get dataset(){return this.type==="command"?this._commands.dataset(this.command,this.args):this.type==="submenu"&&this.submenu?this.submenu.title.dataset:{}}get isEnabled(){return this.type==="command"?this._commands.isEnabled(this.command,this.args):this.type==="submenu"?this.submenu!==null:!0}get isToggled(){return this.type==="command"?this._commands.isToggled(this.command,this.args):!1}get isVisible(){return this.type==="command"?this._commands.isVisible(this.command,this.args):this.type==="submenu"?this.submenu!==null:!0}get keyBinding(){if(this.type==="command"){let{command:x,args:T}=this;return R.findLastValue(this._commands.keyBindings,A=>A.command===x&&pn.JSONExt.deepEqual(A.args,T))||null}return null}}})(de||={});var tt=class extends ue.Renderer{formatLabel(t){let{label:e,mnemonic:i}=t.item;if(i<0||i>=e.length)return e;let r=e.slice(0,i),o=e.slice(i+1),s=e[i],a=te.span({className:"lm-Menu-itemMnemonic p-Menu-itemMnemonic"},s);return[r,a,o]}renderLabel(t){let e=this.formatLabel(t);return te.div({className:"lm-Menu-itemLabel p-Menu-itemLabel"},e)}renderSubmenu(t){return te.div({className:"lm-Menu-itemSubmenuIcon p-Menu-itemSubmenuIcon"})}renderItem(t){let e=this.createItemClass(t),i=this.createItemDataset(t),r=this.createItemARIA(t);return te.li({className:e,dataset:i,tabindex:"0",onfocus:t.onfocus,...r},this.renderLabel(t),this.renderShortcut(t),this.renderSubmenu(t))}};var jt=class extends le{constructor(t,e={}){super(e),this._addEventListeners(),this.__content_node__,this._workspace=t}onUpdateRequest(t){this.__content_node__=this.contentNode;let e=this._titles,i=this.renderer,r=this.currentTitle,o=new Array;for(let s=0,a=e.length;s<a;++s){let l=e[s],h=l===r,y=e.filter(_=>_!==r),I;y.length>0&&(I=this.onClick.bind(this,y,s)),h?o[s]=i.renderTab({title:l,zIndex:e.length+1,current:h,onClick:I}):o[s]=i.renderInert()}Re.render(o,this.contentNode),this._check_shade()}onClick(t,e,i){let r=new pe,o=new tt(null);this._menu=new ue({commands:r,renderer:o}),this._menu.addClass("perspective-workspace-menu"),this._menu.dataset.minwidth=this._titles[e];for(let a of t)this._menu.addItem({command:"tabbar:switch",args:{title:a}});r.addCommand("tabbar:switch",{execute:async({title:a})=>{let l=this._titles.findIndex(h=>h===a);this.currentTitle=a,this.tabActivateRequested.emit({index:l,title:a})},label:({title:a})=>a.label||"untitled",mnemonic:0});let s=i.target.getBoundingClientRect();this._menu.open(s.x,s.y+s.height),this._menu.aboutToClose.connect(()=>{this._menu=void 0}),i.preventDefault(),i.stopPropagation()}_check_shade(){Array.from(this.contentNode.children).filter(t=>t.classList.contains("settings_open")&&t.classList.contains("p-mod-current")).length>0?this.contentNode.classList.add("inactive-blur"):this.contentNode.classList.remove("inactive-blur")}handleEvent(t){switch(this._menu?.close(),this.retargetEvent(t),t.type){case"contextmenu":let e=this.currentTitle.owner;this.parent.parent.parent.showContextMenu(e,t),t.preventDefault();break;case"mousedown":if(t.target.id===Kt.Label)return;break;case"pointerdown":if(t.target.id===Kt.Label){let i=this.contentNode.children,r=Qt.findFirstIndex(i,s=>un.hitTest(s,t.clientX,t.clientY));if(r<0)break;let o=this.titles[r];this._workspace._maximize(o.owner),requestAnimationFrame(()=>o.owner.viewer.toggleConfig());return}break}super.handleEvent(t)}retargetEvent(t){return Object.defineProperty(t,"target",{value:t.composedPath()[0],enumerable:!0}),t}_addEventListeners(){this.node.addEventListener("dblclick",this),this.node.addEventListener("contextmenu",this)}};var fn=class extends Te.Renderer{constructor(t){super(),this._workspace=t}createTabBar(){let t=new jt(this._workspace,{renderer:new Nt});return t.addClass("p-DockPanel-tabBar"),t}},oe=class extends Te{constructor(t){super({renderer:new fn(t)}),this._renderer.dock=this}_onTabDetachRequested(t,e){super._onTabDetachRequested(t,e);let i=t.titles[e.index].owner,r=this.layout.saveLayout();pt(this.layout.widgets()).length>1&&this.layout.removeWidget(i),i.addClass("widget-blur"),this._drag&&this._drag._promise.then(()=>{i.node.isConnected||this.layout.restoreLayout(r),i.removeClass("widget-blur")})}static getWidgets(t){return t?.hasOwnProperty("main")?oe.getWidgets(t.main):t?.children?t.children.flatMap(e=>oe.getWidgets(e)):t?.widgets?t.widgets:[]}static mapWidgets(t,e){return e.main?e.main=oe.mapWidgets(t,e.main):e.children?e.children=e.children.map(i=>oe.mapWidgets(t,i)):e.widgets&&(e.widgets=e.widgets.map(i=>t(i))),e}onAfterAttach(){this.spacing=parseInt(window.getComputedStyle(this.node).padding)||0}};var ci=(n,t)=>{let e=new pe;return e.addCommand("workspace:export",{execute:async i=>{let r=document.createElement("perspective-export-menu");n.apply_indicator_theme(),r.unsafe_set_model(await i.widget.viewer.unsafeGetModel()),r.open(t),i.init_overlay(),r.addEventListener("blur",()=>{i.contextMenu.aboutToClose.emit({})})},isEnabled:i=>{if(i.contextMenu.node.isConnected){let r=i.contextMenu.node.getBoundingClientRect();t.style.top=r.top+"px",t.style.left=r.left+"px"}return!0},label:"Export",mnemonic:0}),e.addCommand("workspace:copy",{execute:async i=>{let r=document.createElement("perspective-copy-menu");n.apply_indicator_theme(),r.unsafe_set_model(await i.widget.viewer.unsafeGetModel()),r.open(t),i.init_overlay(),r.addEventListener("blur",()=>{i.contextMenu.aboutToClose.emit({})})},isEnabled:i=>{if(i.contextMenu.node.isConnected){let r=i.contextMenu.node.getBoundingClientRect();t.style.top=r.top+"px",t.style.left=r.left+"px"}return!0},label:"Copy",mnemonic:0}),e.addCommand("workspace:new",{execute:i=>{let r=n._createWidgetAndNode({config:{table:i.table}});n.dockpanel.addWidget(r,{mode:"split-right",ref:i.widget})},label:i=>i.table}),e.addCommand("workspace:newview",{execute:async i=>{let r=await i.target_widget.save(),o=n._createWidgetAndNode({config:r});n.dockpanel.addWidget(o,{mode:"split-right",ref:i.widget})},isVisible:i=>i.target_widget.title.label!=="",label:i=>i.target_widget.title.label||"untitled"}),e.addCommand("workspace:reset",{execute:i=>i.widget.viewer.reset(),label:"Reset",mnemonic:0}),e.addCommand("workspace:duplicate",{execute:({widget:i})=>n.duplicate(i),isVisible:i=>i.widget.parent===n.dockpanel,label:"Duplicate",mnemonic:0}),e.addCommand("workspace:master",{execute:i=>n.toggleMasterDetail(i.widget),isVisible:()=>n.mode===He.GLOBAL_FILTERS,label:i=>i.widget.parent===n.dockpanel?"Create Global Filter":"Remove Global Filter",mnemonic:0}),e.addCommand("workspace:close",{execute:i=>{i.widget.close()},label:()=>"Close",mnemonic:0}),e.addCommand("workspace:help",{label:"Shift+Click for Browser Menu",isEnabled:()=>!1}),e.add,e};var xt=class extends z{constructor({viewer:t,node:e}){super({node:e}),this.viewer=t,this.master=!1}set master(t){t!==void 0&&this._master!==t&&(t?(this.viewer.classList.add("workspace-master-widget"),this.viewer.classList.remove("workspace-detail-widget"),this.viewer.toggleAttribute?.("selectable",!0)):(this.viewer.classList.add("workspace-detail-widget"),this.viewer.classList.remove("workspace-master-widget"),this.viewer.removeAttribute("selectable")),this._master=t)}get master(){return this._master}get name(){return console.error("Test"),this._title}set linked(t){t!==void 0&&(t?this.viewer.setAttribute("linked",""):this.viewer.removeAttribute("linked"))}get linked(){return this.viewer.hasAttribute("linked")}toggleConfig(){return this.viewer.toggleConfig()}async load(t){this._is_table_loaded=!0;let e=[this.viewer.load(t)];this._restore_config&&e.push(this._restore_config()),await Promise.all(e)}restore(t){let{master:e,table:i,linked:r,name:o,editable:s,selectable:a,...l}=t;this.master=e,this.linked=r,this._title=t.title,this.title.label=t.title,i&&this.viewer.setAttribute("table",i),a&&this.viewer.setAttribute("selectable",a),s&&this.viewer.setAttribute("editable",s);let h=()=>this.viewer.restore({...l});if(this._is_table_loaded)return h();this._restore_config=h}async save(){let t={...await this.viewer.save(),master:this.master,table:this.viewer.getAttribute("table"),linked:this.linked};return this.viewer.hasAttribute("selectable")&&(t.selectable=this.viewer.getAttribute("selectable")),this.viewer.hasAttribute("editable")&&(t.editable=this.viewer.getAttribute("editable")),t}removeClass(t){super.removeClass(t),this.viewer&&this.viewer.classList.remove(t)}async onCloseRequest(t){super.onCloseRequest(t),this.viewer.parentElement&&this.viewer.parentElement.removeChild(this.viewer),await this.viewer.delete()}};var rl=$e(js()),ol=$e(il()),Gn=[1,3],Ig=0,ht={LEFT:"left",RIGHT:"right"},He={GLOBAL_FILTERS:"globalFilters",LINKED:"linked"},$n=class extends Map{set(t,e){this._set_listener?.(t,e),super.set(t,e)}get(t){return super.get(t)}delete(t){return this._delete_listener?.(t)?super.delete(t):!1}addSetListener(t){this._set_listener=t}addDeleteListener(t){this._delete_listener=t}},Bt=class extends ze{constructor(t,e={}){super({orientation:"horizontal"}),this.addClass("perspective-workspace"),this.dockpanel=new oe(this),this.detailPanel=new Ze,this.detailPanel.layout.fitPolicy="set-no-constraint",this.detailPanel.addClass("perspective-scroll-panel"),this.detailPanel.addWidget(this.dockpanel),this.masterPanel=new ze({orientation:"vertical"}),this.masterPanel.addClass("master-panel"),this.dockpanel.layoutModified.connect(()=>this.workspaceUpdated()),this.addWidget(this.detailPanel),this.spacing=8,this.element=t,this._side=e.side||ht.LEFT,this.mode=e.mode||He.GLOBAL_FILTERS,this._linkedViewers=[],this.listeners=new WeakMap,this._tables=new $n,this._tables.addSetListener(this._set_listener.bind(this)),this._tables.addDeleteListener(this._delete_listener.bind(this)),this.indicator=this.init_indicator(),this.commands=ci(this,this.indicator),this.menuRenderer=new tt(this.element),this.customCommands=[],t.addEventListener("contextmenu",i=>this.showContextMenu(null,i))}init_indicator(){let t=document.createElement("perspective-indicator");return t.style.position="fixed",t.style.pointerEvents="none",document.body.appendChild(t),t}apply_indicator_theme(){let t=JSON.parse(window.getComputedStyle(this.element).getPropertyValue("--theme-name").trim());this.indicator.setAttribute("theme",t)}addTable(t,e){this.tables.set(t,e)}getTable(t){return this.tables.get(t)}removeTable(t){return this.tables.delete(t)}get tables(){return this._tables}set side(t){if(ht[t.toUpperCase()]===void 0){console.warn("Unknown `side` attribute:",t);return}if(this._side!==t&&this.masterPanel.isAttached){let e=this.relativeSizes().slice().reverse();this.detailPanel.close(),this.detailPanel.removeClass("has-master-panel"),this.masterPanel.close(),t===ht.LEFT?(this.addWidget(this.masterPanel),this.addWidget(this.detailPanel)):(this.addWidget(this.detailPanel),this.addWidget(this.masterPanel)),this.setRelativeSizes(e)}this._side=t}get side(){return this._side}async save(){let t=this.dockpanel.mode==="single-document",e=t?this._minimizedLayoutSlots:oe.mapWidgets(s=>s.viewer.getAttribute("slot"),this.dockpanel.saveLayout()),i={sizes:[...this.relativeSizes()],detail:e,mode:this.mode};if(this.masterPanel.isAttached){let s={widgets:this.masterPanel.widgets.map(a=>a.viewer.getAttribute("slot")),sizes:[...this.masterPanel.relativeSizes()]};i.master=s}let r={};for(let s of this.masterPanel.widgets)r[s.viewer.getAttribute("slot")]=await s.save();let o=oe.getWidgets(t?this._minimizedLayout:this.dockpanel.saveLayout());return await Promise.all(o.map(async s=>{let a=s.viewer.getAttribute("slot");r[a]=await s.save(),r[a].settings=!1})),{...i,viewers:r}}async restore(t){let{sizes:e,master:i,detail:r,viewers:o=[],mode:s=He.GLOBAL_FILTERS}=structuredClone(t);this.mode=s,this.mode===He.GLOBAL_FILTERS&&i&&i.widgets.length>0?this.setupMasterPanel(e||Gn):(this.masterPanel.isAttached&&(this.detailPanel.removeClass("has-master-panel"),this.masterPanel.close()),this.addWidget(this.detailPanel));let a=[];for(let l of this._capture_viewers())for(let h of this._capture_widgets()){let y=this._restore_callback.bind(this,o,l,h);if(r){let I=oe.mapWidgets(y.bind(this,!1),r);this.dockpanel.mode="multiple-document",this.dockpanel.restoreLayout(I),a=a.concat(oe.getWidgets(I).map(_=>_.task))}i&&(this.mode===He.GLOBAL_FILTERS?(a=a.concat(i.widgets.map(I=>y.bind(this,!0)(I).task)),i.sizes&&this.masterPanel.setRelativeSizes(i.sizes)):a=a.concat(i.widgets.map(I=>{let _=y.bind(this,void 0)(I);return this.dockpanel.addWidget(_),_.task})))}await Promise.all(a)}*_capture_widgets(){let t=this.getAllWidgets();yield t;for(let e of t)e.node.isConnected||e.close()}*_capture_viewers(){let t=Array.from(this.element.children);yield t;let e=this.getAllWidgets();for(let i of t)!e.find(o=>o.viewer===i)&&Array.from(this.element.children).indexOf(i)>-1&&(this.element.removeChild(i),i.delete())}_restore_callback(t,e,i,r,o){let s;typeof o=="string"?s=t[o]:(s=o,o=s.slot);let a=!!o&&e.find(h=>h.getAttribute("slot")===o),l;return a?(l=i.find(h=>h.viewer===a),l?(l.load(this.tables.get(s.table)),l.restore({...s,master:r})):l=this._createWidget({config:{...s,master:r},viewer:a})):s?l=this._createWidgetAndNode({config:{...s,master:r},slot:o}):console.error(`Could not find or create <perspective-viewer> for slot "${o}"`),(r||this.mode===He.LINKED)&&(l.viewer.addEventListener("perspective-select",this.onPerspectiveSelect.bind(this)),l.viewer.addEventListener("perspective-click",this.onPerspectiveSelect.bind(this)),this.masterPanel.addWidget(l)),l.linked&&this._linkWidget(l),l}_validate(t){if(!t||!("view"in t)||typeof t?.view!="function")throw new Error("Only `perspective.Table()` instances can be added to `tables`");return t}_set_listener(t,e){typeof e?.then=="function"?e=e.then(this._validate):this._validate(e),this.getAllWidgets().forEach(i=>{i.viewer.getAttribute("table")===t&&i.load(e)})}_delete_listener(t){return this.getAllWidgets().some(i=>i.viewer.getAttribute("table")===t)?(console.error(`Cannot remove table: '${t}' because it's still bound to widget(s)`),!1):!0}update_widget_for_viewer(t){let e=t.getAttribute("slot");if(e||(e=this._gen_id(),t.setAttribute("slot",e)),t.getAttribute("table")){if(!this.node.querySelector(`slot[name=${e}]`)){console.warn(`Undocked ${t.outerHTML}, creating default layout`);let o=this._createWidget({table:t.getAttribute("table"),config:{master:!1},viewer:t});this.dockpanel.addWidget(o),this.dockpanel.activateWidget(o)}}else console.warn(`No table set for ${t.outerHTML}`)}remove_unslotted_widgets(t){let e=this.getAllWidgets();for(let i of e)t.indexOf(i.viewer)===-1&&i.close()}update_details_panel(t){this.masterPanel.widgets.length===0&&this.masterPanel.close()}async duplicate(t){this.dockpanel.mode==="single-document"&&this.toggleSingleDocument(t);let e=await t.save();e.title=e.title?`${e.title} (*)`:"";let i=this._createWidgetAndNode({config:e});if(e.linked&&this._linkWidget(i),t.master){let r=this.masterPanel.widgets.indexOf(t)+1;this.masterPanel.insertWidget(r,i)}else this.dockpanel.addWidget(i,{mode:"split-right",ref:t});await i.task}toggleMasterDetail(t){let e=t.parent!==this.dockpanel;this.element.dispatchEvent(new CustomEvent("workspace-toggle-global-filter",{detail:{widget:t,isGlobalFilter:!e}})),e?this.makeDetail(t):(this.dockpanel.mode==="single-document"&&this.toggleSingleDocument(t),this.makeMaster(t))}_maximize(t){t.viewer.classList.add("widget-maximize"),this._minimizedLayout=this.dockpanel.saveLayout(),this._minimizedLayoutSlots=oe.mapWidgets(e=>e.viewer.getAttribute("slot"),this.dockpanel.saveLayout()),this._maximizedWidget=t,this.dockpanel.mode="single-document",this.dockpanel.activateWidget(t)}_unmaximize(){this._maximizedWidget.viewer.classList.remove("widget-maximize"),this.dockpanel.mode="multiple-document",this.dockpanel.restoreLayout(this._minimizedLayout)}toggleSingleDocument(t){this.dockpanel.mode!=="single-document"?this._maximize(t):this._unmaximize()}async _filterViewer(t,e,i){let r=await t.save(),o=await t.getTable(),s=Object.keys(await o.schema()),a=r.filter||[],l=I=>I[0]&&s.includes(I[0]),h=e.filter(l);h.push(...a.filter(I=>!i.has(I[0])));let y=(0,rl.default)(h,I=>I[0]);await t.restore({filter:y})}async onPerspectiveSelect(t){let e=await t.target.save();if(t.type==="perspective-click"&&(e.plugin==="Datagrid"||e.plugin===null))return;let i=new Set([...e.group_by||[],...e.split_by||[],...(e.filter||[]).map(o=>o[0])]),r=[...t.detail.config.filter];this.mode===He.LINKED?this._linkedViewers.forEach(o=>{o!==t.target&&this._filterViewer(o,r,i)}):pt(this.dockpanel.widgets()).forEach(o=>this._filterViewer(o.viewer,r,i))}async makeMaster(t){t.master=!0,t.viewer.hasAttribute("settings")&&await t.toggleConfig(),this.masterPanel.isAttached||(this.detailPanel.close(),this.setupMasterPanel(Gn)),this.masterPanel.addWidget(t),t.isHidden&&t.show(),t.viewer.restyleElement(),t.viewer.addEventListener("perspective-click",this.onPerspectiveSelect.bind(this)),t.viewer.addEventListener("perspective-select",this.onPerspectiveSelect.bind(this))}makeDetail(t){t.master=!1,this.dockpanel.addWidget(t,{mode:`split-${this._side}`}),this.masterPanel.widgets.length===0&&(this.detailPanel.close(),this.masterPanel.close(),this.detailPanel.removeClass("has-master-panel"),this.addWidget(this.detailPanel)),t.viewer.restyleElement(),t.viewer.removeEventListener("perspective-click",this.onPerspectiveSelect.bind(this)),t.viewer.removeEventListener("perspective-select",this.onPerspectiveSelect.bind(this))}isLinked(t){return this._linkedViewers.indexOf(t.viewer)>-1}async _linkWidget(t){t.title.className+=" linked",this._linkedViewers.indexOf(t.viewer)===-1&&(this._linkedViewers.push(t.viewer),this._linkedViewers.length===1&&this.getAllWidgets().forEach(async e=>{(await e.viewer.save()).group_by&&await e.viewer.restore({selectable:!0})}))}toggleLink(t){t.linked=!t.linked,t.linked?this._linkWidget(t):(t.title.className=t.title.className.replace(/ linked/g,""),this._linkedViewers=this._linkedViewers.filter(e=>e!==t.viewer),this._linkedViewers.length===0&&this.getAllWidgets().forEach(e=>e.viewer.restore({selectable:!1})))}createContextMenu(t){let e=new ue({commands:this.commands,renderer:this.menuRenderer}),i=ei(this.dockpanel.tabBars(),o=>o.currentTitle.owner===t),r=()=>{t&&(t.addClass("context-focus"),t.viewer.classList.add("context-focus"),i&&i.node.classList.add("context-focus"),this.element.classList.add("context-menu"),this.addClass("context-menu"),t.viewer.classList.contains("workspace-master-widget")?e.node.classList.add("workspace-master-menu"):e.node.classList.remove("workspace-master-menu"))};return e.init_overlay=r,(t?.parent===this.dockpanel||t===null)&&e.addItem({type:"submenu",command:"workspace:newmenu",submenu:(()=>{let o=new ue({commands:this.commands,renderer:this.menuRenderer});for(let l of this.tables.keys())o.addItem({command:"workspace:new",args:{table:l,widget:t}});let s=oe.getWidgets(this.dockpanel.saveLayout());s.length>0&&o.addItem({type:"separator"});let a=new Set;for(let l of s)a.has(l.title.label)||(o.addItem({command:"workspace:newview",args:{widget:t,target_widget:l}}),a.add(l.title.label));return o.title.label="New Table",o})()}),t&&(t?.parent===this.dockpanel&&e.addItem({type:"separator"}),e.addItem({command:"workspace:maximize",args:{widget:t}}),e.addItem({command:"workspace:minimize",args:{widget:t}}),e.addItem({command:"workspace:duplicate",args:{widget:t}}),e.addItem({command:"workspace:master",args:{widget:t}}),e.addItem({command:"workspace:link",args:{widget:t}}),e.addItem({type:"separator"}),e.addItem({command:"workspace:reset",args:{widget:t}}),e.addItem({command:"workspace:export",args:{contextMenu:e,widget:t,init_overlay:r}}),e.addItem({command:"workspace:copy",args:{contextMenu:e,widget:t,init_overlay:r}}),e.addItem({type:"separator"}),e.addItem({command:"workspace:close",args:{widget:t}}),e.addItem({command:"workspace:help"})),this.customCommands.length>0&&(e.addItem({type:"separator"}),this.customCommands.forEach(o=>{e.addItem({command:o,args:{widget:t}})})),e.aboutToClose.connect(()=>{t&&(this.element.classList.remove("context-menu"),this.removeClass("context-menu"),t.removeClass("context-focus"),i?.node?.classList.remove("context-focus"))}),e}showContextMenu(t,e){if(!e.shiftKey){let i=this.createContextMenu(t);i.init_overlay(),i.open(e.clientX,e.clientY),e.preventDefault(),e.stopPropagation()}}clearLayout(){this.getAllWidgets().forEach(t=>t.close()),this.widgets.forEach(t=>t.close()),this.detailPanel.close(),this._linkedViewers=[],this.masterPanel.isAttached&&(this.detailPanel.removeClass("has-master-panel"),this.masterPanel.close())}setupMasterPanel(t){this.detailPanel.addClass("has-master-panel"),this.side===ht.RIGHT?(this.addWidget(this.detailPanel),this.addWidget(this.masterPanel),this.setRelativeSizes(t.slice().reverse())):(this.addWidget(this.masterPanel),this.addWidget(this.detailPanel),this.setRelativeSizes(t))}_addContextMenuItem(t){this.customCommands.push(t.id),this.commands.addCommand(t.id,{execute:e=>t.execute({widget:e.widget}),label:t.label,isVisible:e=>t.isVisible({widget:e.widget}),mnemonic:0})}addViewer(t){let e=this._createWidgetAndNode({config:t});this.dockpanel.mode==="single-document"&&this.toggleSingleDocument(),t.master?(this.masterPanel.isAttached||this.setupMasterPanel(Gn),this.masterPanel.addWidget(e)):(this.detailPanel.isAttached||this.addWidget(this.detailPanel),this.dockpanel.addWidget(e,{mode:"split-right"})),this.update()}_createWidgetAndNode({config:t,slot:e}){let i=this._createNode(e),r=t.table,o=document.createElement("perspective-viewer");return o.setAttribute("slot",i.querySelector("slot").getAttribute("name")),r&&o.setAttribute("table",r),this._createWidget({config:t,node:i,viewer:o})}_gen_id(){let t=`PERSPECTIVE_GENERATED_ID_${Ig++}`;return this.element.querySelector(`[slot=${t}]`)&&(t=this._gen_id()),t}_createNode(t){let e=this.node.querySelector(`slot[name=${t}]`);if(e)e=e.parentElement.parentElement;else{let i=document.createElement("slot");t=t||this._gen_id(),i.setAttribute("name",t);let r=document.createElement("div");r.classList.add("viewer-container"),r.appendChild(i),e=document.createElement("div"),e.classList.add("workspace-widget"),e.appendChild(r)}return e}_createWidget({config:t,node:e,viewer:i}){if(!e){let a=i.getAttribute("slot");e=this.node.querySelector(`slot[name=${a}]`),e?e=e.parentElement.parentElement:e=this._createNode(a)}let r=this.tables.get(i.getAttribute("table")||t.table),o=new xt({node:e,viewer:i});o.task=(async()=>{r&&o.load(r),await o.restore(t)})();let s=new CustomEvent("workspace-new-view",{detail:{config:t,widget:o}});return this.element.dispatchEvent(s),o.title.closable=!0,this.element.appendChild(o.viewer),this._addWidgetEventListeners(o),o}_addWidgetEventListeners(t){this.listeners.has(t)&&this.listeners.get(t)();let e=o=>{!o.detail&&this.dockpanel.mode==="single-document"&&this._unmaximize()},i=o=>this.showContextMenu(t,o),r=async o=>{this.workspaceUpdated();let s=await o.target?.save();s&&(t.title.label=s.title)};t.node.addEventListener("contextmenu",i),t.viewer.addEventListener("perspective-toggle-settings",e),t.viewer.addEventListener("perspective-config-update",r),t.viewer.addEventListener("perspective-plugin-update",this.workspaceUpdated.bind(this)),t.title.changed.connect(r),this.listeners.set(t,()=>{t.node.removeEventListener("contextmenu",i),t.viewer.removeEventListener("perspective-toggle-settings",e),t.viewer.removeEventListener("perspective-config-update",r),t.viewer.removeEventListener("perspective-plugin-update",this.workspaceUpdated.bind(this)),t.title.changed.disconnect(r)})}getAllWidgets(){return[...this.masterPanel.widgets,...pt(this.dockpanel.widgets())]}async _fireUpdateEvent(){let t=await this.save();if(t){let e={};this.tables.forEach((i,r)=>{e[r]=i}),this.element.dispatchEvent(new CustomEvent("workspace-layout-update",{detail:{tables:e,layout:t}}))}}async workspaceUpdated(){this._save||(this._save=(0,ol.default)(()=>this.dockpanel.mode!=="single-document"&&this._fireUpdateEvent(),500)),this._save()}};var Zt;(M=>{function n(d,u){let b=h.get(d);if(!b||b.length===0){w(d,u);return}zt(Pt(b),g=>g?f(g,d,u):!0)&&w(d,u)}M.sendMessage=n;function t(d,u){if(!u.isConflatable){x(d,u);return}Rt(l,k=>k.handler!==d||!k.msg||k.msg.type!==u.type||!k.msg.isConflatable?!1:k.msg.conflate(u))||x(d,u)}M.postMessage=t;function e(d,u){let b=h.get(d);b&&b.indexOf(u)!==-1||(b?b.push(u):h.set(d,[u]))}M.installMessageHook=e;function i(d,u){let b=h.get(d);if(!b)return;let k=b.indexOf(u);k!==-1&&(b[k]=null,A(b))}M.removeMessageHook=i;function r(d){let u=h.get(d);u&&u.length>0&&(R.fill(u,null),A(u)),F(l,b=>{b.handler===d&&(b.handler=null,b.msg=null)})}M.clearData=r;function o(){m||_===0||(p(_),m=!0,T(),m=!1)}M.flush=o;function s(){return I}M.getExceptionHandler=s;function a(d){let u=I;return I=d,u}M.setExceptionHandler=a;let l=new Ye,h=new WeakMap,y=new Set,I=d=>{console.error(d)},_=0,m=!1,c=(()=>typeof requestAnimationFrame=="function"?requestAnimationFrame:setImmediate)(),p=(()=>typeof cancelAnimationFrame=="function"?cancelAnimationFrame:clearImmediate)();function f(d,u,b){let k=!0;try{typeof d=="function"?k=d(u,b):k=d.messageHook(u,b)}catch(g){I(g)}return k}function w(d,u){try{d.processMessage(u)}catch(b){I(b)}}function x(d,u){l.addLast({handler:d,msg:u}),_===0&&(_=c(T))}function T(){if(_=0,l.isEmpty)return;let d={handler:null,msg:null};for(l.addLast(d);;){let u=l.removeFirst();if(u===d)return;u.handler&&u.msg&&n(u.handler,u.msg)}}function A(d){y.size===0&&c(E),y.add(d)}function E(){y.forEach(S),y.clear()}function S(d){R.removeAllWhere(d,v)}function v(d){return d===null}})(Zt||={});function Tg(n){let t=document.createElement("div");return t.innerHTML=n,Array.prototype.slice.call(t.children)[0]}function wg(n){if(n.content)return;n.content=document.createDocumentFragment();let t;for(;t=n.firstChild;)Node.prototype.appendChild.call(n.content,t)}function Mg(n,t,e){let i=Tg(n);wg(i),t&&(i.innerHTML=`<style>${t.toString()}</style>`+i.innerHTML),i.innerHTML=`<style id="psp_styles" scope="${i.getAttribute("id")}">test{}</style>`+i.innerHTML;let r=0,o=class extends e{attributeChangedCallback(a,l,h){r>0||(h===null&&(h="null"),a[0]!=="_"&&l!=h&&!!Object.getOwnPropertyDescriptor(e.prototype,a).set&&(this[a]=h))}_setAttributeSafe(a,l){r++;try{this.setAttribute(a,l)}finally{r--}}connectedCallback(){if(!this._initialized){this._initializing=!0;var a=document.importNode(i.content,!0);this.attachShadow({mode:"open"}),this._vieux&&(this._vieux.appendChild(a),a=this._vieux),this.shadowRoot.appendChild(a),super.connectedCallback&&super.connectedCallback();for(let l of Object.getOwnPropertyNames(e.prototype))l!=="connectedCallback"&&this.hasAttribute(l)&&l[0]!=="_"&&!!Object.getOwnPropertyDescriptor(e.prototype,l).set&&(this[l]=this.getAttribute(l));this._initializing=!1,this._initialized=!0}}static get observedAttributes(){return Object.getOwnPropertyNames(e.prototype)}};for(let a of Object.getOwnPropertyNames(e.prototype)){let l=Object.getOwnPropertyDescriptor(e.prototype,a);if(l&&l.set){let h=l.set;l.set=function(y){if(!this.hasAttribute(a)||this.getAttribute(a)!==y){this.setAttribute(a,y);return}!this._initializing&&!this._initialized||h.call(this,y)},Object.defineProperty(e.prototype,a,l)}}let s=i.getAttribute("id");window.customElements.define(s,o)}function al(n,...t){let e=t.map(i=>i.toString()).join(`
`);return function(i){return Mg(n,{toString:()=>e},i)}}var sl='.workspace-master-widget{--config-button-icon--content:var(--open-settings-button--content,"\\1F527")!important;}.workspace-master-widget[settings]{--config-button-icon--content:var(--close-settings-button--content,"\\1F527")!important;}.workspace-detail-widget.widget-maximize{--config-button-icon--content:var(--open-settings-button--content,"\\1F527")!important;}.workspace-detail-widget.widget-maximize[settings]{--config-button-icon--content:var(--close-settings-button--content,"\\1F527")!important;}.p-DockPanel-widget{border:1px solid#eaeaea;border-width:0px!important;min-width:300px;min-height:200px;}.workspace-detail-widget{--config-button-icon--content:""!important;}.context-menu>perspective-viewer.context-focus{opacity:1;filter:none;}.context-menu>perspective-viewer{filter:saturate(0);}.context-menu>perspective-viewer>*{pointer-events:none;}perspective-viewer{flex:1;position:relative;display:block;align-items:center;justify-content:center;flex-direction:column;width:100%;height:100%;overflow:visible!important;}.lm-mod-override-cursor{cursor:grabbing!important;}.lm-mod-override-cursor perspective-viewer>*{pointer-events:none;}.p-Menu,.lm-Menu{z-index:10000;position:absolute;white-space:nowrap;overflow-x:hidden;overflow-y:auto;outline:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}.p-Menu-content,.lm-Menu-content{margin:0;padding:0;display:table;list-style-type:none;}.p-Menu-item,.lm-Menu-item{display:table-row;}.p-Menu-item.p-mod-hidden,.p-Menu-item.p-mod-collapsed,.lm-Menu-item.lm-mod-hidden,.lm-Menu-item.lm-mod-collapsed{display:none!important;}.p-Menu-itemIcon,.p-Menu-itemSubmenuIcon,.lm-Menu-itemIcon,.lm-Menu-itemSubmenuIcon{display:table-cell;text-align:center;}.p-Menu-itemLabel,.lm-Menu-itemLabel{display:table-cell;text-align:left;}.p-Menu-itemShortcut,.lm-Menu-itemShortcut{display:table-cell;text-align:right;}.p-Menu{font-size:12px;padding:8px;background:white;color:#666;border:1px solid var(--inactive--color);border-radius:3px;max-width:350px;}.p-Menu.perspective-workspace-menu .p-Menu-item{padding-left:37px!important;min-width:var(--min-width);}.p-Menu-item.p-mod-active{background-color:var(--icon--color);color:var(--plugin--background);}.p-Menu-item.p-mod-disabled{opacity:0.5;}.p-Menu-itemIcon{width:24px;height:12px;margin-right:4px;}.p-Menu-itemLabel{flex:1 1;padding:4px 2px 4px 2px;}.p-Menu-itemMnemonic{text-decoration:underline;}.p-Menu-itemShortcut{padding:4px 0px;}.p-Menu-itemSubmenuIcon{width:24px;height:18px;}.p-Menu-item{display:flex;align-items:center;outline:none;margin:0 -8px;padding:0 8px;}.p-Menu-item[data-type="separator"]>div{padding:0;height:9px;}.p-Menu-item[data-type="separator"]>div::after{content:"";display:block;position:relative;top:4px;border-top:1px solid#dddddd;}.p-MenuBar-menu{transform:translateY(-1px);}.p-MenuBar-item{padding:10px 32px;border-left:1px solid transparent;border-right:1px solid transparent;color:#737373!important;}.p-MenuBar-item.p-mod-active{background:rgba(0,0,0,0.2);}.p-MenuBar.p-mod-active .p-MenuBar-item.p-mod-active{z-index:10001;background:rgba(0,0,0,0.2);}.p-Menu-itemIcon:before{content:attr(content);font-family:"ui-monospace","SFMono-Regular","SF Mono","Menlo","Consolas","Liberation Mono",monospace;}[data-type="submenu"] .lm-Menu-itemSubmenuIcon:before{content:">";font-family:"ui-monospace","SFMono-Regular","SF Mono","Menlo","Consolas","Liberation Mono",monospace;height:18px;}.p-mod-drag-image.p-TabBar-tab{display:none;}';var Yn=class extends HTMLElement{set side(t){this.setAttribute("side",t),this.workspace&&(this.workspace.side=t)}get side(){return this.getAttribute("side")}save(){return this.workspace.save()}async restore(t){await this.workspace.restore(t)}async flush(){await Promise.all(Array.from(this.querySelectorAll("perspective-viewer")).map(t=>t.flush()))}addViewer(t){this.workspace.addViewer(t)}addTable(t,e){this.workspace.addTable(t,e)}getTable(t){return this.workspace.getTable(t)}removeTable(t){return this.workspace.removeTable(t)}get tables(){return this.workspace.tables}notifyResize(){this.workspace.update()}_light_dom_changed(){let t=Array.from(this.childNodes);for(let e of t)e.tagName==="PERSPECTIVE-VIEWER"&&this.workspace.update_widget_for_viewer(e);this.workspace.remove_unslotted_widgets(t),this.workspace.update_details_panel(t)}_register_light_dom_listener(){let t=new MutationObserver(this._light_dom_changed.bind(this)),e={attributes:!1,childList:!0,subtree:!1};t.observe(this,e),this._light_dom_changed()}connectedCallback(){if(!this.side){this.side=this.side||ht.LEFT;let t=this.shadowRoot.querySelector("#container");this.workspace=new Bt(this,{side:this.side}),this._register_light_dom_listener(),Zt.sendMessage(this.workspace,z.Msg.BeforeAttach),t.insertBefore(this.workspace.node,null),Zt.sendMessage(this.workspace,z.Msg.AfterAttach),window.onresize=this.workspace.update.bind(this.workspace)}}},Xn=document.createElement("style");Xn.toggleAttribute("injected",!0);Xn.innerHTML=sl;document.head.appendChild(Xn);al(Qn,Zn)(Yn);export{xt as PerspectiveViewerWidget,Bt as PerspectiveWorkspace};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
//# sourceMappingURL=perspective-workspace.js.map
